(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&i(c)}).observe(document,{childList:!0,subtree:!0});function t(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function i(o){if(o.ep)return;o.ep=!0;const l=t(o);fetch(o.href,l)}})();var Qd={exports:{}},$l={},Kd={exports:{}},Se={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var v_;function IT(){if(v_)return Se;v_=1;var n=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),c=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),_=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),w=Symbol.iterator;function I(L){return L===null||typeof L!="object"?null:(L=w&&L[w]||L["@@iterator"],typeof L=="function"?L:null)}var x={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},U=Object.assign,q={};function z(L,G,ce){this.props=L,this.context=G,this.refs=q,this.updater=ce||x}z.prototype.isReactComponent={},z.prototype.setState=function(L,G){if(typeof L!="object"&&typeof L!="function"&&L!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,L,G,"setState")},z.prototype.forceUpdate=function(L){this.updater.enqueueForceUpdate(this,L,"forceUpdate")};function ae(){}ae.prototype=z.prototype;function me(L,G,ce){this.props=L,this.context=G,this.refs=q,this.updater=ce||x}var _e=me.prototype=new ae;_e.constructor=me,U(_e,z.prototype),_e.isPureReactComponent=!0;var we=Array.isArray,at=Object.prototype.hasOwnProperty,Me={current:null},D={key:!0,ref:!0,__self:!0,__source:!0};function S(L,G,ce){var Ie,Ce={},Ve=null,Ue=null;if(G!=null)for(Ie in G.ref!==void 0&&(Ue=G.ref),G.key!==void 0&&(Ve=""+G.key),G)at.call(G,Ie)&&!D.hasOwnProperty(Ie)&&(Ce[Ie]=G[Ie]);var je=arguments.length-2;if(je===1)Ce.children=ce;else if(1<je){for(var Ge=Array(je),St=0;St<je;St++)Ge[St]=arguments[St+2];Ce.children=Ge}if(L&&L.defaultProps)for(Ie in je=L.defaultProps,je)Ce[Ie]===void 0&&(Ce[Ie]=je[Ie]);return{$$typeof:n,type:L,key:Ve,ref:Ue,props:Ce,_owner:Me.current}}function A(L,G){return{$$typeof:n,type:L.type,key:G,ref:L.ref,props:L.props,_owner:L._owner}}function N(L){return typeof L=="object"&&L!==null&&L.$$typeof===n}function V(L){var G={"=":"=0",":":"=2"};return"$"+L.replace(/[=:]/g,function(ce){return G[ce]})}var O=/\/+/g;function R(L,G){return typeof L=="object"&&L!==null&&L.key!=null?V(""+L.key):G.toString(36)}function ut(L,G,ce,Ie,Ce){var Ve=typeof L;(Ve==="undefined"||Ve==="boolean")&&(L=null);var Ue=!1;if(L===null)Ue=!0;else switch(Ve){case"string":case"number":Ue=!0;break;case"object":switch(L.$$typeof){case n:case e:Ue=!0}}if(Ue)return Ue=L,Ce=Ce(Ue),L=Ie===""?"."+R(Ue,0):Ie,we(Ce)?(ce="",L!=null&&(ce=L.replace(O,"$&/")+"/"),ut(Ce,G,ce,"",function(St){return St})):Ce!=null&&(N(Ce)&&(Ce=A(Ce,ce+(!Ce.key||Ue&&Ue.key===Ce.key?"":(""+Ce.key).replace(O,"$&/")+"/")+L)),G.push(Ce)),1;if(Ue=0,Ie=Ie===""?".":Ie+":",we(L))for(var je=0;je<L.length;je++){Ve=L[je];var Ge=Ie+R(Ve,je);Ue+=ut(Ve,G,ce,Ge,Ce)}else if(Ge=I(L),typeof Ge=="function")for(L=Ge.call(L),je=0;!(Ve=L.next()).done;)Ve=Ve.value,Ge=Ie+R(Ve,je++),Ue+=ut(Ve,G,ce,Ge,Ce);else if(Ve==="object")throw G=String(L),Error("Objects are not valid as a React child (found: "+(G==="[object Object]"?"object with keys {"+Object.keys(L).join(", ")+"}":G)+"). If you meant to render a collection of children, use an array instead.");return Ue}function jt(L,G,ce){if(L==null)return L;var Ie=[],Ce=0;return ut(L,Ie,"","",function(Ve){return G.call(ce,Ve,Ce++)}),Ie}function Bt(L){if(L._status===-1){var G=L._result;G=G(),G.then(function(ce){(L._status===0||L._status===-1)&&(L._status=1,L._result=ce)},function(ce){(L._status===0||L._status===-1)&&(L._status=2,L._result=ce)}),L._status===-1&&(L._status=0,L._result=G)}if(L._status===1)return L._result.default;throw L._result}var We={current:null},ee={transition:null},de={ReactCurrentDispatcher:We,ReactCurrentBatchConfig:ee,ReactCurrentOwner:Me};function re(){throw Error("act(...) is not supported in production builds of React.")}return Se.Children={map:jt,forEach:function(L,G,ce){jt(L,function(){G.apply(this,arguments)},ce)},count:function(L){var G=0;return jt(L,function(){G++}),G},toArray:function(L){return jt(L,function(G){return G})||[]},only:function(L){if(!N(L))throw Error("React.Children.only expected to receive a single React element child.");return L}},Se.Component=z,Se.Fragment=t,Se.Profiler=o,Se.PureComponent=me,Se.StrictMode=i,Se.Suspense=p,Se.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=de,Se.act=re,Se.cloneElement=function(L,G,ce){if(L==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+L+".");var Ie=U({},L.props),Ce=L.key,Ve=L.ref,Ue=L._owner;if(G!=null){if(G.ref!==void 0&&(Ve=G.ref,Ue=Me.current),G.key!==void 0&&(Ce=""+G.key),L.type&&L.type.defaultProps)var je=L.type.defaultProps;for(Ge in G)at.call(G,Ge)&&!D.hasOwnProperty(Ge)&&(Ie[Ge]=G[Ge]===void 0&&je!==void 0?je[Ge]:G[Ge])}var Ge=arguments.length-2;if(Ge===1)Ie.children=ce;else if(1<Ge){je=Array(Ge);for(var St=0;St<Ge;St++)je[St]=arguments[St+2];Ie.children=je}return{$$typeof:n,type:L.type,key:Ce,ref:Ve,props:Ie,_owner:Ue}},Se.createContext=function(L){return L={$$typeof:c,_currentValue:L,_currentValue2:L,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},L.Provider={$$typeof:l,_context:L},L.Consumer=L},Se.createElement=S,Se.createFactory=function(L){var G=S.bind(null,L);return G.type=L,G},Se.createRef=function(){return{current:null}},Se.forwardRef=function(L){return{$$typeof:d,render:L}},Se.isValidElement=N,Se.lazy=function(L){return{$$typeof:v,_payload:{_status:-1,_result:L},_init:Bt}},Se.memo=function(L,G){return{$$typeof:_,type:L,compare:G===void 0?null:G}},Se.startTransition=function(L){var G=ee.transition;ee.transition={};try{L()}finally{ee.transition=G}},Se.unstable_act=re,Se.useCallback=function(L,G){return We.current.useCallback(L,G)},Se.useContext=function(L){return We.current.useContext(L)},Se.useDebugValue=function(){},Se.useDeferredValue=function(L){return We.current.useDeferredValue(L)},Se.useEffect=function(L,G){return We.current.useEffect(L,G)},Se.useId=function(){return We.current.useId()},Se.useImperativeHandle=function(L,G,ce){return We.current.useImperativeHandle(L,G,ce)},Se.useInsertionEffect=function(L,G){return We.current.useInsertionEffect(L,G)},Se.useLayoutEffect=function(L,G){return We.current.useLayoutEffect(L,G)},Se.useMemo=function(L,G){return We.current.useMemo(L,G)},Se.useReducer=function(L,G,ce){return We.current.useReducer(L,G,ce)},Se.useRef=function(L){return We.current.useRef(L)},Se.useState=function(L){return We.current.useState(L)},Se.useSyncExternalStore=function(L,G,ce){return We.current.useSyncExternalStore(L,G,ce)},Se.useTransition=function(){return We.current.useTransition()},Se.version="18.3.1",Se}var E_;function Xf(){return E_||(E_=1,Kd.exports=IT()),Kd.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var w_;function CT(){if(w_)return $l;w_=1;var n=Xf(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,o=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(d,p,_){var v,w={},I=null,x=null;_!==void 0&&(I=""+_),p.key!==void 0&&(I=""+p.key),p.ref!==void 0&&(x=p.ref);for(v in p)i.call(p,v)&&!l.hasOwnProperty(v)&&(w[v]=p[v]);if(d&&d.defaultProps)for(v in p=d.defaultProps,p)w[v]===void 0&&(w[v]=p[v]);return{$$typeof:e,type:d,key:I,ref:x,props:w,_owner:o.current}}return $l.Fragment=t,$l.jsx=c,$l.jsxs=c,$l}var T_;function ST(){return T_||(T_=1,Qd.exports=CT()),Qd.exports}var W=ST(),Qt=Xf(),ec={},Yd={exports:{}},cn={},Xd={exports:{}},Jd={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var I_;function RT(){return I_||(I_=1,function(n){function e(ee,de){var re=ee.length;ee.push(de);e:for(;0<re;){var L=re-1>>>1,G=ee[L];if(0<o(G,de))ee[L]=de,ee[re]=G,re=L;else break e}}function t(ee){return ee.length===0?null:ee[0]}function i(ee){if(ee.length===0)return null;var de=ee[0],re=ee.pop();if(re!==de){ee[0]=re;e:for(var L=0,G=ee.length,ce=G>>>1;L<ce;){var Ie=2*(L+1)-1,Ce=ee[Ie],Ve=Ie+1,Ue=ee[Ve];if(0>o(Ce,re))Ve<G&&0>o(Ue,Ce)?(ee[L]=Ue,ee[Ve]=re,L=Ve):(ee[L]=Ce,ee[Ie]=re,L=Ie);else if(Ve<G&&0>o(Ue,re))ee[L]=Ue,ee[Ve]=re,L=Ve;else break e}}return de}function o(ee,de){var re=ee.sortIndex-de.sortIndex;return re!==0?re:ee.id-de.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;n.unstable_now=function(){return l.now()}}else{var c=Date,d=c.now();n.unstable_now=function(){return c.now()-d}}var p=[],_=[],v=1,w=null,I=3,x=!1,U=!1,q=!1,z=typeof setTimeout=="function"?setTimeout:null,ae=typeof clearTimeout=="function"?clearTimeout:null,me=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function _e(ee){for(var de=t(_);de!==null;){if(de.callback===null)i(_);else if(de.startTime<=ee)i(_),de.sortIndex=de.expirationTime,e(p,de);else break;de=t(_)}}function we(ee){if(q=!1,_e(ee),!U)if(t(p)!==null)U=!0,Bt(at);else{var de=t(_);de!==null&&We(we,de.startTime-ee)}}function at(ee,de){U=!1,q&&(q=!1,ae(S),S=-1),x=!0;var re=I;try{for(_e(de),w=t(p);w!==null&&(!(w.expirationTime>de)||ee&&!V());){var L=w.callback;if(typeof L=="function"){w.callback=null,I=w.priorityLevel;var G=L(w.expirationTime<=de);de=n.unstable_now(),typeof G=="function"?w.callback=G:w===t(p)&&i(p),_e(de)}else i(p);w=t(p)}if(w!==null)var ce=!0;else{var Ie=t(_);Ie!==null&&We(we,Ie.startTime-de),ce=!1}return ce}finally{w=null,I=re,x=!1}}var Me=!1,D=null,S=-1,A=5,N=-1;function V(){return!(n.unstable_now()-N<A)}function O(){if(D!==null){var ee=n.unstable_now();N=ee;var de=!0;try{de=D(!0,ee)}finally{de?R():(Me=!1,D=null)}}else Me=!1}var R;if(typeof me=="function")R=function(){me(O)};else if(typeof MessageChannel<"u"){var ut=new MessageChannel,jt=ut.port2;ut.port1.onmessage=O,R=function(){jt.postMessage(null)}}else R=function(){z(O,0)};function Bt(ee){D=ee,Me||(Me=!0,R())}function We(ee,de){S=z(function(){ee(n.unstable_now())},de)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(ee){ee.callback=null},n.unstable_continueExecution=function(){U||x||(U=!0,Bt(at))},n.unstable_forceFrameRate=function(ee){0>ee||125<ee?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<ee?Math.floor(1e3/ee):5},n.unstable_getCurrentPriorityLevel=function(){return I},n.unstable_getFirstCallbackNode=function(){return t(p)},n.unstable_next=function(ee){switch(I){case 1:case 2:case 3:var de=3;break;default:de=I}var re=I;I=de;try{return ee()}finally{I=re}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(ee,de){switch(ee){case 1:case 2:case 3:case 4:case 5:break;default:ee=3}var re=I;I=ee;try{return de()}finally{I=re}},n.unstable_scheduleCallback=function(ee,de,re){var L=n.unstable_now();switch(typeof re=="object"&&re!==null?(re=re.delay,re=typeof re=="number"&&0<re?L+re:L):re=L,ee){case 1:var G=-1;break;case 2:G=250;break;case 5:G=1073741823;break;case 4:G=1e4;break;default:G=5e3}return G=re+G,ee={id:v++,callback:de,priorityLevel:ee,startTime:re,expirationTime:G,sortIndex:-1},re>L?(ee.sortIndex=re,e(_,ee),t(p)===null&&ee===t(_)&&(q?(ae(S),S=-1):q=!0,We(we,re-L))):(ee.sortIndex=G,e(p,ee),U||x||(U=!0,Bt(at))),ee},n.unstable_shouldYield=V,n.unstable_wrapCallback=function(ee){var de=I;return function(){var re=I;I=de;try{return ee.apply(this,arguments)}finally{I=re}}}}(Jd)),Jd}var C_;function AT(){return C_||(C_=1,Xd.exports=RT()),Xd.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var S_;function PT(){if(S_)return cn;S_=1;var n=Xf(),e=AT();function t(r){for(var s="https://reactjs.org/docs/error-decoder.html?invariant="+r,a=1;a<arguments.length;a++)s+="&args[]="+encodeURIComponent(arguments[a]);return"Minified React error #"+r+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var i=new Set,o={};function l(r,s){c(r,s),c(r+"Capture",s)}function c(r,s){for(o[r]=s,r=0;r<s.length;r++)i.add(s[r])}var d=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),p=Object.prototype.hasOwnProperty,_=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,v={},w={};function I(r){return p.call(w,r)?!0:p.call(v,r)?!1:_.test(r)?w[r]=!0:(v[r]=!0,!1)}function x(r,s,a,h){if(a!==null&&a.type===0)return!1;switch(typeof s){case"function":case"symbol":return!0;case"boolean":return h?!1:a!==null?!a.acceptsBooleans:(r=r.toLowerCase().slice(0,5),r!=="data-"&&r!=="aria-");default:return!1}}function U(r,s,a,h){if(s===null||typeof s>"u"||x(r,s,a,h))return!0;if(h)return!1;if(a!==null)switch(a.type){case 3:return!s;case 4:return s===!1;case 5:return isNaN(s);case 6:return isNaN(s)||1>s}return!1}function q(r,s,a,h,f,g,E){this.acceptsBooleans=s===2||s===3||s===4,this.attributeName=h,this.attributeNamespace=f,this.mustUseProperty=a,this.propertyName=r,this.type=s,this.sanitizeURL=g,this.removeEmptyString=E}var z={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(r){z[r]=new q(r,0,!1,r,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(r){var s=r[0];z[s]=new q(s,1,!1,r[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(r){z[r]=new q(r,2,!1,r.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(r){z[r]=new q(r,2,!1,r,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(r){z[r]=new q(r,3,!1,r.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(r){z[r]=new q(r,3,!0,r,null,!1,!1)}),["capture","download"].forEach(function(r){z[r]=new q(r,4,!1,r,null,!1,!1)}),["cols","rows","size","span"].forEach(function(r){z[r]=new q(r,6,!1,r,null,!1,!1)}),["rowSpan","start"].forEach(function(r){z[r]=new q(r,5,!1,r.toLowerCase(),null,!1,!1)});var ae=/[\-:]([a-z])/g;function me(r){return r[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(r){var s=r.replace(ae,me);z[s]=new q(s,1,!1,r,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(r){var s=r.replace(ae,me);z[s]=new q(s,1,!1,r,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(r){var s=r.replace(ae,me);z[s]=new q(s,1,!1,r,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(r){z[r]=new q(r,1,!1,r.toLowerCase(),null,!1,!1)}),z.xlinkHref=new q("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(r){z[r]=new q(r,1,!1,r.toLowerCase(),null,!0,!0)});function _e(r,s,a,h){var f=z.hasOwnProperty(s)?z[s]:null;(f!==null?f.type!==0:h||!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(U(s,a,f,h)&&(a=null),h||f===null?I(s)&&(a===null?r.removeAttribute(s):r.setAttribute(s,""+a)):f.mustUseProperty?r[f.propertyName]=a===null?f.type===3?!1:"":a:(s=f.attributeName,h=f.attributeNamespace,a===null?r.removeAttribute(s):(f=f.type,a=f===3||f===4&&a===!0?"":""+a,h?r.setAttributeNS(h,s,a):r.setAttribute(s,a))))}var we=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,at=Symbol.for("react.element"),Me=Symbol.for("react.portal"),D=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),A=Symbol.for("react.profiler"),N=Symbol.for("react.provider"),V=Symbol.for("react.context"),O=Symbol.for("react.forward_ref"),R=Symbol.for("react.suspense"),ut=Symbol.for("react.suspense_list"),jt=Symbol.for("react.memo"),Bt=Symbol.for("react.lazy"),We=Symbol.for("react.offscreen"),ee=Symbol.iterator;function de(r){return r===null||typeof r!="object"?null:(r=ee&&r[ee]||r["@@iterator"],typeof r=="function"?r:null)}var re=Object.assign,L;function G(r){if(L===void 0)try{throw Error()}catch(a){var s=a.stack.trim().match(/\n( *(at )?)/);L=s&&s[1]||""}return`
`+L+r}var ce=!1;function Ie(r,s){if(!r||ce)return"";ce=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(s)if(s=function(){throw Error()},Object.defineProperty(s.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(s,[])}catch(j){var h=j}Reflect.construct(r,[],s)}else{try{s.call()}catch(j){h=j}r.call(s.prototype)}else{try{throw Error()}catch(j){h=j}r()}}catch(j){if(j&&h&&typeof j.stack=="string"){for(var f=j.stack.split(`
`),g=h.stack.split(`
`),E=f.length-1,C=g.length-1;1<=E&&0<=C&&f[E]!==g[C];)C--;for(;1<=E&&0<=C;E--,C--)if(f[E]!==g[C]){if(E!==1||C!==1)do if(E--,C--,0>C||f[E]!==g[C]){var P=`
`+f[E].replace(" at new "," at ");return r.displayName&&P.includes("<anonymous>")&&(P=P.replace("<anonymous>",r.displayName)),P}while(1<=E&&0<=C);break}}}finally{ce=!1,Error.prepareStackTrace=a}return(r=r?r.displayName||r.name:"")?G(r):""}function Ce(r){switch(r.tag){case 5:return G(r.type);case 16:return G("Lazy");case 13:return G("Suspense");case 19:return G("SuspenseList");case 0:case 2:case 15:return r=Ie(r.type,!1),r;case 11:return r=Ie(r.type.render,!1),r;case 1:return r=Ie(r.type,!0),r;default:return""}}function Ve(r){if(r==null)return null;if(typeof r=="function")return r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case D:return"Fragment";case Me:return"Portal";case A:return"Profiler";case S:return"StrictMode";case R:return"Suspense";case ut:return"SuspenseList"}if(typeof r=="object")switch(r.$$typeof){case V:return(r.displayName||"Context")+".Consumer";case N:return(r._context.displayName||"Context")+".Provider";case O:var s=r.render;return r=r.displayName,r||(r=s.displayName||s.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case jt:return s=r.displayName||null,s!==null?s:Ve(r.type)||"Memo";case Bt:s=r._payload,r=r._init;try{return Ve(r(s))}catch{}}return null}function Ue(r){var s=r.type;switch(r.tag){case 24:return"Cache";case 9:return(s.displayName||"Context")+".Consumer";case 10:return(s._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return r=s.render,r=r.displayName||r.name||"",s.displayName||(r!==""?"ForwardRef("+r+")":"ForwardRef");case 7:return"Fragment";case 5:return s;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ve(s);case 8:return s===S?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s}return null}function je(r){switch(typeof r){case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function Ge(r){var s=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function St(r){var s=Ge(r)?"checked":"value",a=Object.getOwnPropertyDescriptor(r.constructor.prototype,s),h=""+r[s];if(!r.hasOwnProperty(s)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var f=a.get,g=a.set;return Object.defineProperty(r,s,{configurable:!0,get:function(){return f.call(this)},set:function(E){h=""+E,g.call(this,E)}}),Object.defineProperty(r,s,{enumerable:a.enumerable}),{getValue:function(){return h},setValue:function(E){h=""+E},stopTracking:function(){r._valueTracker=null,delete r[s]}}}}function Er(r){r._valueTracker||(r._valueTracker=St(r))}function Ss(r){if(!r)return!1;var s=r._valueTracker;if(!s)return!0;var a=s.getValue(),h="";return r&&(h=Ge(r)?r.checked?"true":"false":r.value),r=h,r!==a?(s.setValue(r),!0):!1}function $r(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}function Oi(r,s){var a=s.checked;return re({},s,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:a??r._wrapperState.initialChecked})}function Rs(r,s){var a=s.defaultValue==null?"":s.defaultValue,h=s.checked!=null?s.checked:s.defaultChecked;a=je(s.value!=null?s.value:a),r._wrapperState={initialChecked:h,initialValue:a,controlled:s.type==="checkbox"||s.type==="radio"?s.checked!=null:s.value!=null}}function Jo(r,s){s=s.checked,s!=null&&_e(r,"checked",s,!1)}function Zo(r,s){Jo(r,s);var a=je(s.value),h=s.type;if(a!=null)h==="number"?(a===0&&r.value===""||r.value!=a)&&(r.value=""+a):r.value!==""+a&&(r.value=""+a);else if(h==="submit"||h==="reset"){r.removeAttribute("value");return}s.hasOwnProperty("value")?As(r,s.type,a):s.hasOwnProperty("defaultValue")&&As(r,s.type,je(s.defaultValue)),s.checked==null&&s.defaultChecked!=null&&(r.defaultChecked=!!s.defaultChecked)}function Ua(r,s,a){if(s.hasOwnProperty("value")||s.hasOwnProperty("defaultValue")){var h=s.type;if(!(h!=="submit"&&h!=="reset"||s.value!==void 0&&s.value!==null))return;s=""+r._wrapperState.initialValue,a||s===r.value||(r.value=s),r.defaultValue=s}a=r.name,a!==""&&(r.name=""),r.defaultChecked=!!r._wrapperState.initialChecked,a!==""&&(r.name=a)}function As(r,s,a){(s!=="number"||$r(r.ownerDocument)!==r)&&(a==null?r.defaultValue=""+r._wrapperState.initialValue:r.defaultValue!==""+a&&(r.defaultValue=""+a))}var wr=Array.isArray;function Tr(r,s,a,h){if(r=r.options,s){s={};for(var f=0;f<a.length;f++)s["$"+a[f]]=!0;for(a=0;a<r.length;a++)f=s.hasOwnProperty("$"+r[a].value),r[a].selected!==f&&(r[a].selected=f),f&&h&&(r[a].defaultSelected=!0)}else{for(a=""+je(a),s=null,f=0;f<r.length;f++){if(r[f].value===a){r[f].selected=!0,h&&(r[f].defaultSelected=!0);return}s!==null||r[f].disabled||(s=r[f])}s!==null&&(s.selected=!0)}}function el(r,s){if(s.dangerouslySetInnerHTML!=null)throw Error(t(91));return re({},s,{value:void 0,defaultValue:void 0,children:""+r._wrapperState.initialValue})}function Ps(r,s){var a=s.value;if(a==null){if(a=s.children,s=s.defaultValue,a!=null){if(s!=null)throw Error(t(92));if(wr(a)){if(1<a.length)throw Error(t(93));a=a[0]}s=a}s==null&&(s=""),a=s}r._wrapperState={initialValue:je(a)}}function ks(r,s){var a=je(s.value),h=je(s.defaultValue);a!=null&&(a=""+a,a!==r.value&&(r.value=a),s.defaultValue==null&&r.defaultValue!==a&&(r.defaultValue=a)),h!=null&&(r.defaultValue=""+h)}function tl(r){var s=r.textContent;s===r._wrapperState.initialValue&&s!==""&&s!==null&&(r.value=s)}function _t(r){switch(r){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function yt(r,s){return r==null||r==="http://www.w3.org/1999/xhtml"?_t(s):r==="http://www.w3.org/2000/svg"&&s==="foreignObject"?"http://www.w3.org/1999/xhtml":r}var Ir,nl=function(r){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(s,a,h,f){MSApp.execUnsafeLocalFunction(function(){return r(s,a,h,f)})}:r}(function(r,s){if(r.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in r)r.innerHTML=s;else{for(Ir=Ir||document.createElement("div"),Ir.innerHTML="<svg>"+s.valueOf().toString()+"</svg>",s=Ir.firstChild;r.firstChild;)r.removeChild(r.firstChild);for(;s.firstChild;)r.appendChild(s.firstChild)}});function Gr(r,s){if(s){var a=r.firstChild;if(a&&a===r.lastChild&&a.nodeType===3){a.nodeValue=s;return}}r.textContent=s}var Mi={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Fi=["Webkit","ms","Moz","O"];Object.keys(Mi).forEach(function(r){Fi.forEach(function(s){s=s+r.charAt(0).toUpperCase()+r.substring(1),Mi[s]=Mi[r]})});function rl(r,s,a){return s==null||typeof s=="boolean"||s===""?"":a||typeof s!="number"||s===0||Mi.hasOwnProperty(r)&&Mi[r]?(""+s).trim():s+"px"}function il(r,s){r=r.style;for(var a in s)if(s.hasOwnProperty(a)){var h=a.indexOf("--")===0,f=rl(a,s[a],h);a==="float"&&(a="cssFloat"),h?r.setProperty(a,f):r[a]=f}}var sl=re({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ol(r,s){if(s){if(sl[r]&&(s.children!=null||s.dangerouslySetInnerHTML!=null))throw Error(t(137,r));if(s.dangerouslySetInnerHTML!=null){if(s.children!=null)throw Error(t(60));if(typeof s.dangerouslySetInnerHTML!="object"||!("__html"in s.dangerouslySetInnerHTML))throw Error(t(61))}if(s.style!=null&&typeof s.style!="object")throw Error(t(62))}}function ll(r,s){if(r.indexOf("-")===-1)return typeof s.is=="string";switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var bi=null;function Ns(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var xs=null,Rn=null,rr=null;function Ds(r){if(r=xl(r)){if(typeof xs!="function")throw Error(t(280));var s=r.stateNode;s&&(s=mu(s),xs(r.stateNode,r.type,s))}}function ir(r){Rn?rr?rr.push(r):rr=[r]:Rn=r}function al(){if(Rn){var r=Rn,s=rr;if(rr=Rn=null,Ds(r),s)for(r=0;r<s.length;r++)Ds(s[r])}}function Ui(r,s){return r(s)}function ul(){}var Cr=!1;function cl(r,s,a){if(Cr)return r(s,a);Cr=!0;try{return Ui(r,s,a)}finally{Cr=!1,(Rn!==null||rr!==null)&&(ul(),al())}}function ct(r,s){var a=r.stateNode;if(a===null)return null;var h=mu(a);if(h===null)return null;a=h[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(h=!h.disabled)||(r=r.type,h=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!h;break e;default:r=!1}if(r)return null;if(a&&typeof a!="function")throw Error(t(231,s,typeof a));return a}var Vs=!1;if(d)try{var Mn={};Object.defineProperty(Mn,"passive",{get:function(){Vs=!0}}),window.addEventListener("test",Mn,Mn),window.removeEventListener("test",Mn,Mn)}catch{Vs=!1}function ji(r,s,a,h,f,g,E,C,P){var j=Array.prototype.slice.call(arguments,3);try{s.apply(a,j)}catch(K){this.onError(K)}}var Bi=!1,Ls=null,Fn=!1,hl=null,Th={onError:function(r){Bi=!0,Ls=r}};function Os(r,s,a,h,f,g,E,C,P){Bi=!1,Ls=null,ji.apply(Th,arguments)}function ja(r,s,a,h,f,g,E,C,P){if(Os.apply(this,arguments),Bi){if(Bi){var j=Ls;Bi=!1,Ls=null}else throw Error(t(198));Fn||(Fn=!0,hl=j)}}function bn(r){var s=r,a=r;if(r.alternate)for(;s.return;)s=s.return;else{r=s;do s=r,s.flags&4098&&(a=s.return),r=s.return;while(r)}return s.tag===3?a:null}function zi(r){if(r.tag===13){var s=r.memoizedState;if(s===null&&(r=r.alternate,r!==null&&(s=r.memoizedState)),s!==null)return s.dehydrated}return null}function Un(r){if(bn(r)!==r)throw Error(t(188))}function Ba(r){var s=r.alternate;if(!s){if(s=bn(r),s===null)throw Error(t(188));return s!==r?null:r}for(var a=r,h=s;;){var f=a.return;if(f===null)break;var g=f.alternate;if(g===null){if(h=f.return,h!==null){a=h;continue}break}if(f.child===g.child){for(g=f.child;g;){if(g===a)return Un(f),r;if(g===h)return Un(f),s;g=g.sibling}throw Error(t(188))}if(a.return!==h.return)a=f,h=g;else{for(var E=!1,C=f.child;C;){if(C===a){E=!0,a=f,h=g;break}if(C===h){E=!0,h=f,a=g;break}C=C.sibling}if(!E){for(C=g.child;C;){if(C===a){E=!0,a=g,h=f;break}if(C===h){E=!0,h=g,a=f;break}C=C.sibling}if(!E)throw Error(t(189))}}if(a.alternate!==h)throw Error(t(190))}if(a.tag!==3)throw Error(t(188));return a.stateNode.current===a?r:s}function dl(r){return r=Ba(r),r!==null?Ms(r):null}function Ms(r){if(r.tag===5||r.tag===6)return r;for(r=r.child;r!==null;){var s=Ms(r);if(s!==null)return s;r=r.sibling}return null}var Fs=e.unstable_scheduleCallback,fl=e.unstable_cancelCallback,za=e.unstable_shouldYield,Ih=e.unstable_requestPaint,Qe=e.unstable_now,qa=e.unstable_getCurrentPriorityLevel,qi=e.unstable_ImmediatePriority,Qr=e.unstable_UserBlockingPriority,An=e.unstable_NormalPriority,pl=e.unstable_LowPriority,Wa=e.unstable_IdlePriority,Wi=null,gn=null;function Ha(r){if(gn&&typeof gn.onCommitFiberRoot=="function")try{gn.onCommitFiberRoot(Wi,r,void 0,(r.current.flags&128)===128)}catch{}}var Jt=Math.clz32?Math.clz32:Ga,ml=Math.log,$a=Math.LN2;function Ga(r){return r>>>=0,r===0?32:31-(ml(r)/$a|0)|0}var bs=64,Us=4194304;function Kr(r){switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return r&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return r}}function Hi(r,s){var a=r.pendingLanes;if(a===0)return 0;var h=0,f=r.suspendedLanes,g=r.pingedLanes,E=a&268435455;if(E!==0){var C=E&~f;C!==0?h=Kr(C):(g&=E,g!==0&&(h=Kr(g)))}else E=a&~f,E!==0?h=Kr(E):g!==0&&(h=Kr(g));if(h===0)return 0;if(s!==0&&s!==h&&!(s&f)&&(f=h&-h,g=s&-s,f>=g||f===16&&(g&4194240)!==0))return s;if(h&4&&(h|=a&16),s=r.entangledLanes,s!==0)for(r=r.entanglements,s&=h;0<s;)a=31-Jt(s),f=1<<a,h|=r[a],s&=~f;return h}function Ch(r,s){switch(r){case 1:case 2:case 4:return s+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Sr(r,s){for(var a=r.suspendedLanes,h=r.pingedLanes,f=r.expirationTimes,g=r.pendingLanes;0<g;){var E=31-Jt(g),C=1<<E,P=f[E];P===-1?(!(C&a)||C&h)&&(f[E]=Ch(C,s)):P<=s&&(r.expiredLanes|=C),g&=~C}}function _n(r){return r=r.pendingLanes&-1073741825,r!==0?r:r&1073741824?1073741824:0}function $i(){var r=bs;return bs<<=1,!(bs&4194240)&&(bs=64),r}function Yr(r){for(var s=[],a=0;31>a;a++)s.push(r);return s}function Xr(r,s,a){r.pendingLanes|=s,s!==536870912&&(r.suspendedLanes=0,r.pingedLanes=0),r=r.eventTimes,s=31-Jt(s),r[s]=a}function He(r,s){var a=r.pendingLanes&~s;r.pendingLanes=s,r.suspendedLanes=0,r.pingedLanes=0,r.expiredLanes&=s,r.mutableReadLanes&=s,r.entangledLanes&=s,s=r.entanglements;var h=r.eventTimes;for(r=r.expirationTimes;0<a;){var f=31-Jt(a),g=1<<f;s[f]=0,h[f]=-1,r[f]=-1,a&=~g}}function Jr(r,s){var a=r.entangledLanes|=s;for(r=r.entanglements;a;){var h=31-Jt(a),f=1<<h;f&s|r[h]&s&&(r[h]|=s),a&=~f}}var Ne=0;function Zr(r){return r&=-r,1<r?4<r?r&268435455?16:536870912:4:1}var Qa,js,Ka,Ya,Xa,gl=!1,sr=[],Vt=null,jn=null,Bn=null,ei=new Map,Pn=new Map,or=[],Sh="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ja(r,s){switch(r){case"focusin":case"focusout":Vt=null;break;case"dragenter":case"dragleave":jn=null;break;case"mouseover":case"mouseout":Bn=null;break;case"pointerover":case"pointerout":ei.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pn.delete(s.pointerId)}}function nn(r,s,a,h,f,g){return r===null||r.nativeEvent!==g?(r={blockedOn:s,domEventName:a,eventSystemFlags:h,nativeEvent:g,targetContainers:[f]},s!==null&&(s=xl(s),s!==null&&js(s)),r):(r.eventSystemFlags|=h,s=r.targetContainers,f!==null&&s.indexOf(f)===-1&&s.push(f),r)}function Rh(r,s,a,h,f){switch(s){case"focusin":return Vt=nn(Vt,r,s,a,h,f),!0;case"dragenter":return jn=nn(jn,r,s,a,h,f),!0;case"mouseover":return Bn=nn(Bn,r,s,a,h,f),!0;case"pointerover":var g=f.pointerId;return ei.set(g,nn(ei.get(g)||null,r,s,a,h,f)),!0;case"gotpointercapture":return g=f.pointerId,Pn.set(g,nn(Pn.get(g)||null,r,s,a,h,f)),!0}return!1}function Za(r){var s=Xi(r.target);if(s!==null){var a=bn(s);if(a!==null){if(s=a.tag,s===13){if(s=zi(a),s!==null){r.blockedOn=s,Xa(r.priority,function(){Ka(a)});return}}else if(s===3&&a.stateNode.current.memoizedState.isDehydrated){r.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}r.blockedOn=null}function Rr(r){if(r.blockedOn!==null)return!1;for(var s=r.targetContainers;0<s.length;){var a=Bs(r.domEventName,r.eventSystemFlags,s[0],r.nativeEvent);if(a===null){a=r.nativeEvent;var h=new a.constructor(a.type,a);bi=h,a.target.dispatchEvent(h),bi=null}else return s=xl(a),s!==null&&js(s),r.blockedOn=a,!1;s.shift()}return!0}function Gi(r,s,a){Rr(r)&&a.delete(s)}function eu(){gl=!1,Vt!==null&&Rr(Vt)&&(Vt=null),jn!==null&&Rr(jn)&&(jn=null),Bn!==null&&Rr(Bn)&&(Bn=null),ei.forEach(Gi),Pn.forEach(Gi)}function zn(r,s){r.blockedOn===s&&(r.blockedOn=null,gl||(gl=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,eu)))}function qn(r){function s(f){return zn(f,r)}if(0<sr.length){zn(sr[0],r);for(var a=1;a<sr.length;a++){var h=sr[a];h.blockedOn===r&&(h.blockedOn=null)}}for(Vt!==null&&zn(Vt,r),jn!==null&&zn(jn,r),Bn!==null&&zn(Bn,r),ei.forEach(s),Pn.forEach(s),a=0;a<or.length;a++)h=or[a],h.blockedOn===r&&(h.blockedOn=null);for(;0<or.length&&(a=or[0],a.blockedOn===null);)Za(a),a.blockedOn===null&&or.shift()}var Ar=we.ReactCurrentBatchConfig,ti=!0;function tt(r,s,a,h){var f=Ne,g=Ar.transition;Ar.transition=null;try{Ne=1,_l(r,s,a,h)}finally{Ne=f,Ar.transition=g}}function Ah(r,s,a,h){var f=Ne,g=Ar.transition;Ar.transition=null;try{Ne=4,_l(r,s,a,h)}finally{Ne=f,Ar.transition=g}}function _l(r,s,a,h){if(ti){var f=Bs(r,s,a,h);if(f===null)bh(r,s,h,Qi,a),Ja(r,h);else if(Rh(f,r,s,a,h))h.stopPropagation();else if(Ja(r,h),s&4&&-1<Sh.indexOf(r)){for(;f!==null;){var g=xl(f);if(g!==null&&Qa(g),g=Bs(r,s,a,h),g===null&&bh(r,s,h,Qi,a),g===f)break;f=g}f!==null&&h.stopPropagation()}else bh(r,s,h,null,a)}}var Qi=null;function Bs(r,s,a,h){if(Qi=null,r=Ns(h),r=Xi(r),r!==null)if(s=bn(r),s===null)r=null;else if(a=s.tag,a===13){if(r=zi(s),r!==null)return r;r=null}else if(a===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;r=null}else s!==r&&(r=null);return Qi=r,null}function yl(r){switch(r){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(qa()){case qi:return 1;case Qr:return 4;case An:case pl:return 16;case Wa:return 536870912;default:return 16}default:return 16}}var yn=null,zs=null,rn=null;function vl(){if(rn)return rn;var r,s=zs,a=s.length,h,f="value"in yn?yn.value:yn.textContent,g=f.length;for(r=0;r<a&&s[r]===f[r];r++);var E=a-r;for(h=1;h<=E&&s[a-h]===f[g-h];h++);return rn=f.slice(r,1<h?1-h:void 0)}function qs(r){var s=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&s===13&&(r=13)):r=s,r===10&&(r=13),32<=r||r===13?r:0}function lr(){return!0}function El(){return!1}function Lt(r){function s(a,h,f,g,E){this._reactName=a,this._targetInst=f,this.type=h,this.nativeEvent=g,this.target=E,this.currentTarget=null;for(var C in r)r.hasOwnProperty(C)&&(a=r[C],this[C]=a?a(g):g[C]);return this.isDefaultPrevented=(g.defaultPrevented!=null?g.defaultPrevented:g.returnValue===!1)?lr:El,this.isPropagationStopped=El,this}return re(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=lr)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=lr)},persist:function(){},isPersistent:lr}),s}var Wn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ws=Lt(Wn),ar=re({},Wn,{view:0,detail:0}),Ph=Lt(ar),Hs,Pr,ni,Ki=re({},ar,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ur,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==ni&&(ni&&r.type==="mousemove"?(Hs=r.screenX-ni.screenX,Pr=r.screenY-ni.screenY):Pr=Hs=0,ni=r),Hs)},movementY:function(r){return"movementY"in r?r.movementY:Pr}}),$s=Lt(Ki),wl=re({},Ki,{dataTransfer:0}),tu=Lt(wl),Gs=re({},ar,{relatedTarget:0}),Qs=Lt(Gs),nu=re({},Wn,{animationName:0,elapsedTime:0,pseudoElement:0}),kr=Lt(nu),ru=re({},Wn,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),iu=Lt(ru),su=re({},Wn,{data:0}),Tl=Lt(su),Ks={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Zt={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ou={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function lu(r){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(r):(r=ou[r])?!!s[r]:!1}function ur(){return lu}var u=re({},ar,{key:function(r){if(r.key){var s=Ks[r.key]||r.key;if(s!=="Unidentified")return s}return r.type==="keypress"?(r=qs(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?Zt[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ur,charCode:function(r){return r.type==="keypress"?qs(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?qs(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),m=Lt(u),y=re({},Ki,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),T=Lt(y),M=re({},ar,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ur}),B=Lt(M),Z=re({},Wn,{propertyName:0,elapsedTime:0,pseudoElement:0}),qe=Lt(Z),vt=re({},Ki,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),Le=Lt(vt),Rt=[9,13,27,32],ft=d&&"CompositionEvent"in window,kn=null;d&&"documentMode"in document&&(kn=document.documentMode);var vn=d&&"TextEvent"in window&&!kn,Yi=d&&(!ft||kn&&8<kn&&11>=kn),Ys=" ",fm=!1;function pm(r,s){switch(r){case"keyup":return Rt.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function mm(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var Xs=!1;function Ew(r,s){switch(r){case"compositionend":return mm(s);case"keypress":return s.which!==32?null:(fm=!0,Ys);case"textInput":return r=s.data,r===Ys&&fm?null:r;default:return null}}function ww(r,s){if(Xs)return r==="compositionend"||!ft&&pm(r,s)?(r=vl(),rn=zs=yn=null,Xs=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return Yi&&s.locale!=="ko"?null:s.data;default:return null}}var Tw={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function gm(r){var s=r&&r.nodeName&&r.nodeName.toLowerCase();return s==="input"?!!Tw[r.type]:s==="textarea"}function _m(r,s,a,h){ir(h),s=du(s,"onChange"),0<s.length&&(a=new Ws("onChange","change",null,a,h),r.push({event:a,listeners:s}))}var Il=null,Cl=null;function Iw(r){Om(r,0)}function au(r){var s=no(r);if(Ss(s))return r}function Cw(r,s){if(r==="change")return s}var ym=!1;if(d){var kh;if(d){var Nh="oninput"in document;if(!Nh){var vm=document.createElement("div");vm.setAttribute("oninput","return;"),Nh=typeof vm.oninput=="function"}kh=Nh}else kh=!1;ym=kh&&(!document.documentMode||9<document.documentMode)}function Em(){Il&&(Il.detachEvent("onpropertychange",wm),Cl=Il=null)}function wm(r){if(r.propertyName==="value"&&au(Cl)){var s=[];_m(s,Cl,r,Ns(r)),cl(Iw,s)}}function Sw(r,s,a){r==="focusin"?(Em(),Il=s,Cl=a,Il.attachEvent("onpropertychange",wm)):r==="focusout"&&Em()}function Rw(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return au(Cl)}function Aw(r,s){if(r==="click")return au(s)}function Pw(r,s){if(r==="input"||r==="change")return au(s)}function kw(r,s){return r===s&&(r!==0||1/r===1/s)||r!==r&&s!==s}var Hn=typeof Object.is=="function"?Object.is:kw;function Sl(r,s){if(Hn(r,s))return!0;if(typeof r!="object"||r===null||typeof s!="object"||s===null)return!1;var a=Object.keys(r),h=Object.keys(s);if(a.length!==h.length)return!1;for(h=0;h<a.length;h++){var f=a[h];if(!p.call(s,f)||!Hn(r[f],s[f]))return!1}return!0}function Tm(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function Im(r,s){var a=Tm(r);r=0;for(var h;a;){if(a.nodeType===3){if(h=r+a.textContent.length,r<=s&&h>=s)return{node:a,offset:s-r};r=h}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=Tm(a)}}function Cm(r,s){return r&&s?r===s?!0:r&&r.nodeType===3?!1:s&&s.nodeType===3?Cm(r,s.parentNode):"contains"in r?r.contains(s):r.compareDocumentPosition?!!(r.compareDocumentPosition(s)&16):!1:!1}function Sm(){for(var r=window,s=$r();s instanceof r.HTMLIFrameElement;){try{var a=typeof s.contentWindow.location.href=="string"}catch{a=!1}if(a)r=s.contentWindow;else break;s=$r(r.document)}return s}function xh(r){var s=r&&r.nodeName&&r.nodeName.toLowerCase();return s&&(s==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||s==="textarea"||r.contentEditable==="true")}function Nw(r){var s=Sm(),a=r.focusedElem,h=r.selectionRange;if(s!==a&&a&&a.ownerDocument&&Cm(a.ownerDocument.documentElement,a)){if(h!==null&&xh(a)){if(s=h.start,r=h.end,r===void 0&&(r=s),"selectionStart"in a)a.selectionStart=s,a.selectionEnd=Math.min(r,a.value.length);else if(r=(s=a.ownerDocument||document)&&s.defaultView||window,r.getSelection){r=r.getSelection();var f=a.textContent.length,g=Math.min(h.start,f);h=h.end===void 0?g:Math.min(h.end,f),!r.extend&&g>h&&(f=h,h=g,g=f),f=Im(a,g);var E=Im(a,h);f&&E&&(r.rangeCount!==1||r.anchorNode!==f.node||r.anchorOffset!==f.offset||r.focusNode!==E.node||r.focusOffset!==E.offset)&&(s=s.createRange(),s.setStart(f.node,f.offset),r.removeAllRanges(),g>h?(r.addRange(s),r.extend(E.node,E.offset)):(s.setEnd(E.node,E.offset),r.addRange(s)))}}for(s=[],r=a;r=r.parentNode;)r.nodeType===1&&s.push({element:r,left:r.scrollLeft,top:r.scrollTop});for(typeof a.focus=="function"&&a.focus(),a=0;a<s.length;a++)r=s[a],r.element.scrollLeft=r.left,r.element.scrollTop=r.top}}var xw=d&&"documentMode"in document&&11>=document.documentMode,Js=null,Dh=null,Rl=null,Vh=!1;function Rm(r,s,a){var h=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Vh||Js==null||Js!==$r(h)||(h=Js,"selectionStart"in h&&xh(h)?h={start:h.selectionStart,end:h.selectionEnd}:(h=(h.ownerDocument&&h.ownerDocument.defaultView||window).getSelection(),h={anchorNode:h.anchorNode,anchorOffset:h.anchorOffset,focusNode:h.focusNode,focusOffset:h.focusOffset}),Rl&&Sl(Rl,h)||(Rl=h,h=du(Dh,"onSelect"),0<h.length&&(s=new Ws("onSelect","select",null,s,a),r.push({event:s,listeners:h}),s.target=Js)))}function uu(r,s){var a={};return a[r.toLowerCase()]=s.toLowerCase(),a["Webkit"+r]="webkit"+s,a["Moz"+r]="moz"+s,a}var Zs={animationend:uu("Animation","AnimationEnd"),animationiteration:uu("Animation","AnimationIteration"),animationstart:uu("Animation","AnimationStart"),transitionend:uu("Transition","TransitionEnd")},Lh={},Am={};d&&(Am=document.createElement("div").style,"AnimationEvent"in window||(delete Zs.animationend.animation,delete Zs.animationiteration.animation,delete Zs.animationstart.animation),"TransitionEvent"in window||delete Zs.transitionend.transition);function cu(r){if(Lh[r])return Lh[r];if(!Zs[r])return r;var s=Zs[r],a;for(a in s)if(s.hasOwnProperty(a)&&a in Am)return Lh[r]=s[a];return r}var Pm=cu("animationend"),km=cu("animationiteration"),Nm=cu("animationstart"),xm=cu("transitionend"),Dm=new Map,Vm="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ri(r,s){Dm.set(r,s),l(s,[r])}for(var Oh=0;Oh<Vm.length;Oh++){var Mh=Vm[Oh],Dw=Mh.toLowerCase(),Vw=Mh[0].toUpperCase()+Mh.slice(1);ri(Dw,"on"+Vw)}ri(Pm,"onAnimationEnd"),ri(km,"onAnimationIteration"),ri(Nm,"onAnimationStart"),ri("dblclick","onDoubleClick"),ri("focusin","onFocus"),ri("focusout","onBlur"),ri(xm,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Al="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Lw=new Set("cancel close invalid load scroll toggle".split(" ").concat(Al));function Lm(r,s,a){var h=r.type||"unknown-event";r.currentTarget=a,ja(h,s,void 0,r),r.currentTarget=null}function Om(r,s){s=(s&4)!==0;for(var a=0;a<r.length;a++){var h=r[a],f=h.event;h=h.listeners;e:{var g=void 0;if(s)for(var E=h.length-1;0<=E;E--){var C=h[E],P=C.instance,j=C.currentTarget;if(C=C.listener,P!==g&&f.isPropagationStopped())break e;Lm(f,C,j),g=P}else for(E=0;E<h.length;E++){if(C=h[E],P=C.instance,j=C.currentTarget,C=C.listener,P!==g&&f.isPropagationStopped())break e;Lm(f,C,j),g=P}}}if(Fn)throw r=hl,Fn=!1,hl=null,r}function Je(r,s){var a=s[Wh];a===void 0&&(a=s[Wh]=new Set);var h=r+"__bubble";a.has(h)||(Mm(s,r,2,!1),a.add(h))}function Fh(r,s,a){var h=0;s&&(h|=4),Mm(a,r,h,s)}var hu="_reactListening"+Math.random().toString(36).slice(2);function Pl(r){if(!r[hu]){r[hu]=!0,i.forEach(function(a){a!=="selectionchange"&&(Lw.has(a)||Fh(a,!1,r),Fh(a,!0,r))});var s=r.nodeType===9?r:r.ownerDocument;s===null||s[hu]||(s[hu]=!0,Fh("selectionchange",!1,s))}}function Mm(r,s,a,h){switch(yl(s)){case 1:var f=tt;break;case 4:f=Ah;break;default:f=_l}a=f.bind(null,s,a,r),f=void 0,!Vs||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(f=!0),h?f!==void 0?r.addEventListener(s,a,{capture:!0,passive:f}):r.addEventListener(s,a,!0):f!==void 0?r.addEventListener(s,a,{passive:f}):r.addEventListener(s,a,!1)}function bh(r,s,a,h,f){var g=h;if(!(s&1)&&!(s&2)&&h!==null)e:for(;;){if(h===null)return;var E=h.tag;if(E===3||E===4){var C=h.stateNode.containerInfo;if(C===f||C.nodeType===8&&C.parentNode===f)break;if(E===4)for(E=h.return;E!==null;){var P=E.tag;if((P===3||P===4)&&(P=E.stateNode.containerInfo,P===f||P.nodeType===8&&P.parentNode===f))return;E=E.return}for(;C!==null;){if(E=Xi(C),E===null)return;if(P=E.tag,P===5||P===6){h=g=E;continue e}C=C.parentNode}}h=h.return}cl(function(){var j=g,K=Ns(a),Y=[];e:{var Q=Dm.get(r);if(Q!==void 0){var ne=Ws,oe=r;switch(r){case"keypress":if(qs(a)===0)break e;case"keydown":case"keyup":ne=m;break;case"focusin":oe="focus",ne=Qs;break;case"focusout":oe="blur",ne=Qs;break;case"beforeblur":case"afterblur":ne=Qs;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ne=$s;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ne=tu;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ne=B;break;case Pm:case km:case Nm:ne=kr;break;case xm:ne=qe;break;case"scroll":ne=Ph;break;case"wheel":ne=Le;break;case"copy":case"cut":case"paste":ne=iu;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ne=T}var le=(s&4)!==0,ht=!le&&r==="scroll",F=le?Q!==null?Q+"Capture":null:Q;le=[];for(var k=j,b;k!==null;){b=k;var X=b.stateNode;if(b.tag===5&&X!==null&&(b=X,F!==null&&(X=ct(k,F),X!=null&&le.push(kl(k,X,b)))),ht)break;k=k.return}0<le.length&&(Q=new ne(Q,oe,null,a,K),Y.push({event:Q,listeners:le}))}}if(!(s&7)){e:{if(Q=r==="mouseover"||r==="pointerover",ne=r==="mouseout"||r==="pointerout",Q&&a!==bi&&(oe=a.relatedTarget||a.fromElement)&&(Xi(oe)||oe[Nr]))break e;if((ne||Q)&&(Q=K.window===K?K:(Q=K.ownerDocument)?Q.defaultView||Q.parentWindow:window,ne?(oe=a.relatedTarget||a.toElement,ne=j,oe=oe?Xi(oe):null,oe!==null&&(ht=bn(oe),oe!==ht||oe.tag!==5&&oe.tag!==6)&&(oe=null)):(ne=null,oe=j),ne!==oe)){if(le=$s,X="onMouseLeave",F="onMouseEnter",k="mouse",(r==="pointerout"||r==="pointerover")&&(le=T,X="onPointerLeave",F="onPointerEnter",k="pointer"),ht=ne==null?Q:no(ne),b=oe==null?Q:no(oe),Q=new le(X,k+"leave",ne,a,K),Q.target=ht,Q.relatedTarget=b,X=null,Xi(K)===j&&(le=new le(F,k+"enter",oe,a,K),le.target=b,le.relatedTarget=ht,X=le),ht=X,ne&&oe)t:{for(le=ne,F=oe,k=0,b=le;b;b=eo(b))k++;for(b=0,X=F;X;X=eo(X))b++;for(;0<k-b;)le=eo(le),k--;for(;0<b-k;)F=eo(F),b--;for(;k--;){if(le===F||F!==null&&le===F.alternate)break t;le=eo(le),F=eo(F)}le=null}else le=null;ne!==null&&Fm(Y,Q,ne,le,!1),oe!==null&&ht!==null&&Fm(Y,ht,oe,le,!0)}}e:{if(Q=j?no(j):window,ne=Q.nodeName&&Q.nodeName.toLowerCase(),ne==="select"||ne==="input"&&Q.type==="file")var ue=Cw;else if(gm(Q))if(ym)ue=Pw;else{ue=Rw;var fe=Sw}else(ne=Q.nodeName)&&ne.toLowerCase()==="input"&&(Q.type==="checkbox"||Q.type==="radio")&&(ue=Aw);if(ue&&(ue=ue(r,j))){_m(Y,ue,a,K);break e}fe&&fe(r,Q,j),r==="focusout"&&(fe=Q._wrapperState)&&fe.controlled&&Q.type==="number"&&As(Q,"number",Q.value)}switch(fe=j?no(j):window,r){case"focusin":(gm(fe)||fe.contentEditable==="true")&&(Js=fe,Dh=j,Rl=null);break;case"focusout":Rl=Dh=Js=null;break;case"mousedown":Vh=!0;break;case"contextmenu":case"mouseup":case"dragend":Vh=!1,Rm(Y,a,K);break;case"selectionchange":if(xw)break;case"keydown":case"keyup":Rm(Y,a,K)}var pe;if(ft)e:{switch(r){case"compositionstart":var ye="onCompositionStart";break e;case"compositionend":ye="onCompositionEnd";break e;case"compositionupdate":ye="onCompositionUpdate";break e}ye=void 0}else Xs?pm(r,a)&&(ye="onCompositionEnd"):r==="keydown"&&a.keyCode===229&&(ye="onCompositionStart");ye&&(Yi&&a.locale!=="ko"&&(Xs||ye!=="onCompositionStart"?ye==="onCompositionEnd"&&Xs&&(pe=vl()):(yn=K,zs="value"in yn?yn.value:yn.textContent,Xs=!0)),fe=du(j,ye),0<fe.length&&(ye=new Tl(ye,r,null,a,K),Y.push({event:ye,listeners:fe}),pe?ye.data=pe:(pe=mm(a),pe!==null&&(ye.data=pe)))),(pe=vn?Ew(r,a):ww(r,a))&&(j=du(j,"onBeforeInput"),0<j.length&&(K=new Tl("onBeforeInput","beforeinput",null,a,K),Y.push({event:K,listeners:j}),K.data=pe))}Om(Y,s)})}function kl(r,s,a){return{instance:r,listener:s,currentTarget:a}}function du(r,s){for(var a=s+"Capture",h=[];r!==null;){var f=r,g=f.stateNode;f.tag===5&&g!==null&&(f=g,g=ct(r,a),g!=null&&h.unshift(kl(r,g,f)),g=ct(r,s),g!=null&&h.push(kl(r,g,f))),r=r.return}return h}function eo(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5);return r||null}function Fm(r,s,a,h,f){for(var g=s._reactName,E=[];a!==null&&a!==h;){var C=a,P=C.alternate,j=C.stateNode;if(P!==null&&P===h)break;C.tag===5&&j!==null&&(C=j,f?(P=ct(a,g),P!=null&&E.unshift(kl(a,P,C))):f||(P=ct(a,g),P!=null&&E.push(kl(a,P,C)))),a=a.return}E.length!==0&&r.push({event:s,listeners:E})}var Ow=/\r\n?/g,Mw=/\u0000|\uFFFD/g;function bm(r){return(typeof r=="string"?r:""+r).replace(Ow,`
`).replace(Mw,"")}function fu(r,s,a){if(s=bm(s),bm(r)!==s&&a)throw Error(t(425))}function pu(){}var Uh=null,jh=null;function Bh(r,s){return r==="textarea"||r==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var zh=typeof setTimeout=="function"?setTimeout:void 0,Fw=typeof clearTimeout=="function"?clearTimeout:void 0,Um=typeof Promise=="function"?Promise:void 0,bw=typeof queueMicrotask=="function"?queueMicrotask:typeof Um<"u"?function(r){return Um.resolve(null).then(r).catch(Uw)}:zh;function Uw(r){setTimeout(function(){throw r})}function qh(r,s){var a=s,h=0;do{var f=a.nextSibling;if(r.removeChild(a),f&&f.nodeType===8)if(a=f.data,a==="/$"){if(h===0){r.removeChild(f),qn(s);return}h--}else a!=="$"&&a!=="$?"&&a!=="$!"||h++;a=f}while(a);qn(s)}function ii(r){for(;r!=null;r=r.nextSibling){var s=r.nodeType;if(s===1||s===3)break;if(s===8){if(s=r.data,s==="$"||s==="$!"||s==="$?")break;if(s==="/$")return null}}return r}function jm(r){r=r.previousSibling;for(var s=0;r;){if(r.nodeType===8){var a=r.data;if(a==="$"||a==="$!"||a==="$?"){if(s===0)return r;s--}else a==="/$"&&s++}r=r.previousSibling}return null}var to=Math.random().toString(36).slice(2),cr="__reactFiber$"+to,Nl="__reactProps$"+to,Nr="__reactContainer$"+to,Wh="__reactEvents$"+to,jw="__reactListeners$"+to,Bw="__reactHandles$"+to;function Xi(r){var s=r[cr];if(s)return s;for(var a=r.parentNode;a;){if(s=a[Nr]||a[cr]){if(a=s.alternate,s.child!==null||a!==null&&a.child!==null)for(r=jm(r);r!==null;){if(a=r[cr])return a;r=jm(r)}return s}r=a,a=r.parentNode}return null}function xl(r){return r=r[cr]||r[Nr],!r||r.tag!==5&&r.tag!==6&&r.tag!==13&&r.tag!==3?null:r}function no(r){if(r.tag===5||r.tag===6)return r.stateNode;throw Error(t(33))}function mu(r){return r[Nl]||null}var Hh=[],ro=-1;function si(r){return{current:r}}function Ze(r){0>ro||(r.current=Hh[ro],Hh[ro]=null,ro--)}function Ke(r,s){ro++,Hh[ro]=r.current,r.current=s}var oi={},zt=si(oi),sn=si(!1),Ji=oi;function io(r,s){var a=r.type.contextTypes;if(!a)return oi;var h=r.stateNode;if(h&&h.__reactInternalMemoizedUnmaskedChildContext===s)return h.__reactInternalMemoizedMaskedChildContext;var f={},g;for(g in a)f[g]=s[g];return h&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=s,r.__reactInternalMemoizedMaskedChildContext=f),f}function on(r){return r=r.childContextTypes,r!=null}function gu(){Ze(sn),Ze(zt)}function Bm(r,s,a){if(zt.current!==oi)throw Error(t(168));Ke(zt,s),Ke(sn,a)}function zm(r,s,a){var h=r.stateNode;if(s=s.childContextTypes,typeof h.getChildContext!="function")return a;h=h.getChildContext();for(var f in h)if(!(f in s))throw Error(t(108,Ue(r)||"Unknown",f));return re({},a,h)}function _u(r){return r=(r=r.stateNode)&&r.__reactInternalMemoizedMergedChildContext||oi,Ji=zt.current,Ke(zt,r),Ke(sn,sn.current),!0}function qm(r,s,a){var h=r.stateNode;if(!h)throw Error(t(169));a?(r=zm(r,s,Ji),h.__reactInternalMemoizedMergedChildContext=r,Ze(sn),Ze(zt),Ke(zt,r)):Ze(sn),Ke(sn,a)}var xr=null,yu=!1,$h=!1;function Wm(r){xr===null?xr=[r]:xr.push(r)}function zw(r){yu=!0,Wm(r)}function li(){if(!$h&&xr!==null){$h=!0;var r=0,s=Ne;try{var a=xr;for(Ne=1;r<a.length;r++){var h=a[r];do h=h(!0);while(h!==null)}xr=null,yu=!1}catch(f){throw xr!==null&&(xr=xr.slice(r+1)),Fs(qi,li),f}finally{Ne=s,$h=!1}}return null}var so=[],oo=0,vu=null,Eu=0,Nn=[],xn=0,Zi=null,Dr=1,Vr="";function es(r,s){so[oo++]=Eu,so[oo++]=vu,vu=r,Eu=s}function Hm(r,s,a){Nn[xn++]=Dr,Nn[xn++]=Vr,Nn[xn++]=Zi,Zi=r;var h=Dr;r=Vr;var f=32-Jt(h)-1;h&=~(1<<f),a+=1;var g=32-Jt(s)+f;if(30<g){var E=f-f%5;g=(h&(1<<E)-1).toString(32),h>>=E,f-=E,Dr=1<<32-Jt(s)+f|a<<f|h,Vr=g+r}else Dr=1<<g|a<<f|h,Vr=r}function Gh(r){r.return!==null&&(es(r,1),Hm(r,1,0))}function Qh(r){for(;r===vu;)vu=so[--oo],so[oo]=null,Eu=so[--oo],so[oo]=null;for(;r===Zi;)Zi=Nn[--xn],Nn[xn]=null,Vr=Nn[--xn],Nn[xn]=null,Dr=Nn[--xn],Nn[xn]=null}var En=null,wn=null,nt=!1,$n=null;function $m(r,s){var a=On(5,null,null,0);a.elementType="DELETED",a.stateNode=s,a.return=r,s=r.deletions,s===null?(r.deletions=[a],r.flags|=16):s.push(a)}function Gm(r,s){switch(r.tag){case 5:var a=r.type;return s=s.nodeType!==1||a.toLowerCase()!==s.nodeName.toLowerCase()?null:s,s!==null?(r.stateNode=s,En=r,wn=ii(s.firstChild),!0):!1;case 6:return s=r.pendingProps===""||s.nodeType!==3?null:s,s!==null?(r.stateNode=s,En=r,wn=null,!0):!1;case 13:return s=s.nodeType!==8?null:s,s!==null?(a=Zi!==null?{id:Dr,overflow:Vr}:null,r.memoizedState={dehydrated:s,treeContext:a,retryLane:1073741824},a=On(18,null,null,0),a.stateNode=s,a.return=r,r.child=a,En=r,wn=null,!0):!1;default:return!1}}function Kh(r){return(r.mode&1)!==0&&(r.flags&128)===0}function Yh(r){if(nt){var s=wn;if(s){var a=s;if(!Gm(r,s)){if(Kh(r))throw Error(t(418));s=ii(a.nextSibling);var h=En;s&&Gm(r,s)?$m(h,a):(r.flags=r.flags&-4097|2,nt=!1,En=r)}}else{if(Kh(r))throw Error(t(418));r.flags=r.flags&-4097|2,nt=!1,En=r}}}function Qm(r){for(r=r.return;r!==null&&r.tag!==5&&r.tag!==3&&r.tag!==13;)r=r.return;En=r}function wu(r){if(r!==En)return!1;if(!nt)return Qm(r),nt=!0,!1;var s;if((s=r.tag!==3)&&!(s=r.tag!==5)&&(s=r.type,s=s!=="head"&&s!=="body"&&!Bh(r.type,r.memoizedProps)),s&&(s=wn)){if(Kh(r))throw Km(),Error(t(418));for(;s;)$m(r,s),s=ii(s.nextSibling)}if(Qm(r),r.tag===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(t(317));e:{for(r=r.nextSibling,s=0;r;){if(r.nodeType===8){var a=r.data;if(a==="/$"){if(s===0){wn=ii(r.nextSibling);break e}s--}else a!=="$"&&a!=="$!"&&a!=="$?"||s++}r=r.nextSibling}wn=null}}else wn=En?ii(r.stateNode.nextSibling):null;return!0}function Km(){for(var r=wn;r;)r=ii(r.nextSibling)}function lo(){wn=En=null,nt=!1}function Xh(r){$n===null?$n=[r]:$n.push(r)}var qw=we.ReactCurrentBatchConfig;function Dl(r,s,a){if(r=a.ref,r!==null&&typeof r!="function"&&typeof r!="object"){if(a._owner){if(a=a._owner,a){if(a.tag!==1)throw Error(t(309));var h=a.stateNode}if(!h)throw Error(t(147,r));var f=h,g=""+r;return s!==null&&s.ref!==null&&typeof s.ref=="function"&&s.ref._stringRef===g?s.ref:(s=function(E){var C=f.refs;E===null?delete C[g]:C[g]=E},s._stringRef=g,s)}if(typeof r!="string")throw Error(t(284));if(!a._owner)throw Error(t(290,r))}return r}function Tu(r,s){throw r=Object.prototype.toString.call(s),Error(t(31,r==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":r))}function Ym(r){var s=r._init;return s(r._payload)}function Xm(r){function s(F,k){if(r){var b=F.deletions;b===null?(F.deletions=[k],F.flags|=16):b.push(k)}}function a(F,k){if(!r)return null;for(;k!==null;)s(F,k),k=k.sibling;return null}function h(F,k){for(F=new Map;k!==null;)k.key!==null?F.set(k.key,k):F.set(k.index,k),k=k.sibling;return F}function f(F,k){return F=mi(F,k),F.index=0,F.sibling=null,F}function g(F,k,b){return F.index=b,r?(b=F.alternate,b!==null?(b=b.index,b<k?(F.flags|=2,k):b):(F.flags|=2,k)):(F.flags|=1048576,k)}function E(F){return r&&F.alternate===null&&(F.flags|=2),F}function C(F,k,b,X){return k===null||k.tag!==6?(k=zd(b,F.mode,X),k.return=F,k):(k=f(k,b),k.return=F,k)}function P(F,k,b,X){var ue=b.type;return ue===D?K(F,k,b.props.children,X,b.key):k!==null&&(k.elementType===ue||typeof ue=="object"&&ue!==null&&ue.$$typeof===Bt&&Ym(ue)===k.type)?(X=f(k,b.props),X.ref=Dl(F,k,b),X.return=F,X):(X=$u(b.type,b.key,b.props,null,F.mode,X),X.ref=Dl(F,k,b),X.return=F,X)}function j(F,k,b,X){return k===null||k.tag!==4||k.stateNode.containerInfo!==b.containerInfo||k.stateNode.implementation!==b.implementation?(k=qd(b,F.mode,X),k.return=F,k):(k=f(k,b.children||[]),k.return=F,k)}function K(F,k,b,X,ue){return k===null||k.tag!==7?(k=as(b,F.mode,X,ue),k.return=F,k):(k=f(k,b),k.return=F,k)}function Y(F,k,b){if(typeof k=="string"&&k!==""||typeof k=="number")return k=zd(""+k,F.mode,b),k.return=F,k;if(typeof k=="object"&&k!==null){switch(k.$$typeof){case at:return b=$u(k.type,k.key,k.props,null,F.mode,b),b.ref=Dl(F,null,k),b.return=F,b;case Me:return k=qd(k,F.mode,b),k.return=F,k;case Bt:var X=k._init;return Y(F,X(k._payload),b)}if(wr(k)||de(k))return k=as(k,F.mode,b,null),k.return=F,k;Tu(F,k)}return null}function Q(F,k,b,X){var ue=k!==null?k.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return ue!==null?null:C(F,k,""+b,X);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case at:return b.key===ue?P(F,k,b,X):null;case Me:return b.key===ue?j(F,k,b,X):null;case Bt:return ue=b._init,Q(F,k,ue(b._payload),X)}if(wr(b)||de(b))return ue!==null?null:K(F,k,b,X,null);Tu(F,b)}return null}function ne(F,k,b,X,ue){if(typeof X=="string"&&X!==""||typeof X=="number")return F=F.get(b)||null,C(k,F,""+X,ue);if(typeof X=="object"&&X!==null){switch(X.$$typeof){case at:return F=F.get(X.key===null?b:X.key)||null,P(k,F,X,ue);case Me:return F=F.get(X.key===null?b:X.key)||null,j(k,F,X,ue);case Bt:var fe=X._init;return ne(F,k,b,fe(X._payload),ue)}if(wr(X)||de(X))return F=F.get(b)||null,K(k,F,X,ue,null);Tu(k,X)}return null}function oe(F,k,b,X){for(var ue=null,fe=null,pe=k,ye=k=0,kt=null;pe!==null&&ye<b.length;ye++){pe.index>ye?(kt=pe,pe=null):kt=pe.sibling;var be=Q(F,pe,b[ye],X);if(be===null){pe===null&&(pe=kt);break}r&&pe&&be.alternate===null&&s(F,pe),k=g(be,k,ye),fe===null?ue=be:fe.sibling=be,fe=be,pe=kt}if(ye===b.length)return a(F,pe),nt&&es(F,ye),ue;if(pe===null){for(;ye<b.length;ye++)pe=Y(F,b[ye],X),pe!==null&&(k=g(pe,k,ye),fe===null?ue=pe:fe.sibling=pe,fe=pe);return nt&&es(F,ye),ue}for(pe=h(F,pe);ye<b.length;ye++)kt=ne(pe,F,ye,b[ye],X),kt!==null&&(r&&kt.alternate!==null&&pe.delete(kt.key===null?ye:kt.key),k=g(kt,k,ye),fe===null?ue=kt:fe.sibling=kt,fe=kt);return r&&pe.forEach(function(gi){return s(F,gi)}),nt&&es(F,ye),ue}function le(F,k,b,X){var ue=de(b);if(typeof ue!="function")throw Error(t(150));if(b=ue.call(b),b==null)throw Error(t(151));for(var fe=ue=null,pe=k,ye=k=0,kt=null,be=b.next();pe!==null&&!be.done;ye++,be=b.next()){pe.index>ye?(kt=pe,pe=null):kt=pe.sibling;var gi=Q(F,pe,be.value,X);if(gi===null){pe===null&&(pe=kt);break}r&&pe&&gi.alternate===null&&s(F,pe),k=g(gi,k,ye),fe===null?ue=gi:fe.sibling=gi,fe=gi,pe=kt}if(be.done)return a(F,pe),nt&&es(F,ye),ue;if(pe===null){for(;!be.done;ye++,be=b.next())be=Y(F,be.value,X),be!==null&&(k=g(be,k,ye),fe===null?ue=be:fe.sibling=be,fe=be);return nt&&es(F,ye),ue}for(pe=h(F,pe);!be.done;ye++,be=b.next())be=ne(pe,F,ye,be.value,X),be!==null&&(r&&be.alternate!==null&&pe.delete(be.key===null?ye:be.key),k=g(be,k,ye),fe===null?ue=be:fe.sibling=be,fe=be);return r&&pe.forEach(function(TT){return s(F,TT)}),nt&&es(F,ye),ue}function ht(F,k,b,X){if(typeof b=="object"&&b!==null&&b.type===D&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case at:e:{for(var ue=b.key,fe=k;fe!==null;){if(fe.key===ue){if(ue=b.type,ue===D){if(fe.tag===7){a(F,fe.sibling),k=f(fe,b.props.children),k.return=F,F=k;break e}}else if(fe.elementType===ue||typeof ue=="object"&&ue!==null&&ue.$$typeof===Bt&&Ym(ue)===fe.type){a(F,fe.sibling),k=f(fe,b.props),k.ref=Dl(F,fe,b),k.return=F,F=k;break e}a(F,fe);break}else s(F,fe);fe=fe.sibling}b.type===D?(k=as(b.props.children,F.mode,X,b.key),k.return=F,F=k):(X=$u(b.type,b.key,b.props,null,F.mode,X),X.ref=Dl(F,k,b),X.return=F,F=X)}return E(F);case Me:e:{for(fe=b.key;k!==null;){if(k.key===fe)if(k.tag===4&&k.stateNode.containerInfo===b.containerInfo&&k.stateNode.implementation===b.implementation){a(F,k.sibling),k=f(k,b.children||[]),k.return=F,F=k;break e}else{a(F,k);break}else s(F,k);k=k.sibling}k=qd(b,F.mode,X),k.return=F,F=k}return E(F);case Bt:return fe=b._init,ht(F,k,fe(b._payload),X)}if(wr(b))return oe(F,k,b,X);if(de(b))return le(F,k,b,X);Tu(F,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,k!==null&&k.tag===6?(a(F,k.sibling),k=f(k,b),k.return=F,F=k):(a(F,k),k=zd(b,F.mode,X),k.return=F,F=k),E(F)):a(F,k)}return ht}var ao=Xm(!0),Jm=Xm(!1),Iu=si(null),Cu=null,uo=null,Jh=null;function Zh(){Jh=uo=Cu=null}function ed(r){var s=Iu.current;Ze(Iu),r._currentValue=s}function td(r,s,a){for(;r!==null;){var h=r.alternate;if((r.childLanes&s)!==s?(r.childLanes|=s,h!==null&&(h.childLanes|=s)):h!==null&&(h.childLanes&s)!==s&&(h.childLanes|=s),r===a)break;r=r.return}}function co(r,s){Cu=r,Jh=uo=null,r=r.dependencies,r!==null&&r.firstContext!==null&&(r.lanes&s&&(ln=!0),r.firstContext=null)}function Dn(r){var s=r._currentValue;if(Jh!==r)if(r={context:r,memoizedValue:s,next:null},uo===null){if(Cu===null)throw Error(t(308));uo=r,Cu.dependencies={lanes:0,firstContext:r}}else uo=uo.next=r;return s}var ts=null;function nd(r){ts===null?ts=[r]:ts.push(r)}function Zm(r,s,a,h){var f=s.interleaved;return f===null?(a.next=a,nd(s)):(a.next=f.next,f.next=a),s.interleaved=a,Lr(r,h)}function Lr(r,s){r.lanes|=s;var a=r.alternate;for(a!==null&&(a.lanes|=s),a=r,r=r.return;r!==null;)r.childLanes|=s,a=r.alternate,a!==null&&(a.childLanes|=s),a=r,r=r.return;return a.tag===3?a.stateNode:null}var ai=!1;function rd(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function eg(r,s){r=r.updateQueue,s.updateQueue===r&&(s.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,effects:r.effects})}function Or(r,s){return{eventTime:r,lane:s,tag:0,payload:null,callback:null,next:null}}function ui(r,s,a){var h=r.updateQueue;if(h===null)return null;if(h=h.shared,Fe&2){var f=h.pending;return f===null?s.next=s:(s.next=f.next,f.next=s),h.pending=s,Lr(r,a)}return f=h.interleaved,f===null?(s.next=s,nd(h)):(s.next=f.next,f.next=s),h.interleaved=s,Lr(r,a)}function Su(r,s,a){if(s=s.updateQueue,s!==null&&(s=s.shared,(a&4194240)!==0)){var h=s.lanes;h&=r.pendingLanes,a|=h,s.lanes=a,Jr(r,a)}}function tg(r,s){var a=r.updateQueue,h=r.alternate;if(h!==null&&(h=h.updateQueue,a===h)){var f=null,g=null;if(a=a.firstBaseUpdate,a!==null){do{var E={eventTime:a.eventTime,lane:a.lane,tag:a.tag,payload:a.payload,callback:a.callback,next:null};g===null?f=g=E:g=g.next=E,a=a.next}while(a!==null);g===null?f=g=s:g=g.next=s}else f=g=s;a={baseState:h.baseState,firstBaseUpdate:f,lastBaseUpdate:g,shared:h.shared,effects:h.effects},r.updateQueue=a;return}r=a.lastBaseUpdate,r===null?a.firstBaseUpdate=s:r.next=s,a.lastBaseUpdate=s}function Ru(r,s,a,h){var f=r.updateQueue;ai=!1;var g=f.firstBaseUpdate,E=f.lastBaseUpdate,C=f.shared.pending;if(C!==null){f.shared.pending=null;var P=C,j=P.next;P.next=null,E===null?g=j:E.next=j,E=P;var K=r.alternate;K!==null&&(K=K.updateQueue,C=K.lastBaseUpdate,C!==E&&(C===null?K.firstBaseUpdate=j:C.next=j,K.lastBaseUpdate=P))}if(g!==null){var Y=f.baseState;E=0,K=j=P=null,C=g;do{var Q=C.lane,ne=C.eventTime;if((h&Q)===Q){K!==null&&(K=K.next={eventTime:ne,lane:0,tag:C.tag,payload:C.payload,callback:C.callback,next:null});e:{var oe=r,le=C;switch(Q=s,ne=a,le.tag){case 1:if(oe=le.payload,typeof oe=="function"){Y=oe.call(ne,Y,Q);break e}Y=oe;break e;case 3:oe.flags=oe.flags&-65537|128;case 0:if(oe=le.payload,Q=typeof oe=="function"?oe.call(ne,Y,Q):oe,Q==null)break e;Y=re({},Y,Q);break e;case 2:ai=!0}}C.callback!==null&&C.lane!==0&&(r.flags|=64,Q=f.effects,Q===null?f.effects=[C]:Q.push(C))}else ne={eventTime:ne,lane:Q,tag:C.tag,payload:C.payload,callback:C.callback,next:null},K===null?(j=K=ne,P=Y):K=K.next=ne,E|=Q;if(C=C.next,C===null){if(C=f.shared.pending,C===null)break;Q=C,C=Q.next,Q.next=null,f.lastBaseUpdate=Q,f.shared.pending=null}}while(!0);if(K===null&&(P=Y),f.baseState=P,f.firstBaseUpdate=j,f.lastBaseUpdate=K,s=f.shared.interleaved,s!==null){f=s;do E|=f.lane,f=f.next;while(f!==s)}else g===null&&(f.shared.lanes=0);is|=E,r.lanes=E,r.memoizedState=Y}}function ng(r,s,a){if(r=s.effects,s.effects=null,r!==null)for(s=0;s<r.length;s++){var h=r[s],f=h.callback;if(f!==null){if(h.callback=null,h=a,typeof f!="function")throw Error(t(191,f));f.call(h)}}}var Vl={},hr=si(Vl),Ll=si(Vl),Ol=si(Vl);function ns(r){if(r===Vl)throw Error(t(174));return r}function id(r,s){switch(Ke(Ol,s),Ke(Ll,r),Ke(hr,Vl),r=s.nodeType,r){case 9:case 11:s=(s=s.documentElement)?s.namespaceURI:yt(null,"");break;default:r=r===8?s.parentNode:s,s=r.namespaceURI||null,r=r.tagName,s=yt(s,r)}Ze(hr),Ke(hr,s)}function ho(){Ze(hr),Ze(Ll),Ze(Ol)}function rg(r){ns(Ol.current);var s=ns(hr.current),a=yt(s,r.type);s!==a&&(Ke(Ll,r),Ke(hr,a))}function sd(r){Ll.current===r&&(Ze(hr),Ze(Ll))}var rt=si(0);function Au(r){for(var s=r;s!==null;){if(s.tag===13){var a=s.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||a.data==="$!"))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if(s.flags&128)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===r)break;for(;s.sibling===null;){if(s.return===null||s.return===r)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var od=[];function ld(){for(var r=0;r<od.length;r++)od[r]._workInProgressVersionPrimary=null;od.length=0}var Pu=we.ReactCurrentDispatcher,ad=we.ReactCurrentBatchConfig,rs=0,it=null,Et=null,At=null,ku=!1,Ml=!1,Fl=0,Ww=0;function qt(){throw Error(t(321))}function ud(r,s){if(s===null)return!1;for(var a=0;a<s.length&&a<r.length;a++)if(!Hn(r[a],s[a]))return!1;return!0}function cd(r,s,a,h,f,g){if(rs=g,it=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,Pu.current=r===null||r.memoizedState===null?Qw:Kw,r=a(h,f),Ml){g=0;do{if(Ml=!1,Fl=0,25<=g)throw Error(t(301));g+=1,At=Et=null,s.updateQueue=null,Pu.current=Yw,r=a(h,f)}while(Ml)}if(Pu.current=Du,s=Et!==null&&Et.next!==null,rs=0,At=Et=it=null,ku=!1,s)throw Error(t(300));return r}function hd(){var r=Fl!==0;return Fl=0,r}function dr(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return At===null?it.memoizedState=At=r:At=At.next=r,At}function Vn(){if(Et===null){var r=it.alternate;r=r!==null?r.memoizedState:null}else r=Et.next;var s=At===null?it.memoizedState:At.next;if(s!==null)At=s,Et=r;else{if(r===null)throw Error(t(310));Et=r,r={memoizedState:Et.memoizedState,baseState:Et.baseState,baseQueue:Et.baseQueue,queue:Et.queue,next:null},At===null?it.memoizedState=At=r:At=At.next=r}return At}function bl(r,s){return typeof s=="function"?s(r):s}function dd(r){var s=Vn(),a=s.queue;if(a===null)throw Error(t(311));a.lastRenderedReducer=r;var h=Et,f=h.baseQueue,g=a.pending;if(g!==null){if(f!==null){var E=f.next;f.next=g.next,g.next=E}h.baseQueue=f=g,a.pending=null}if(f!==null){g=f.next,h=h.baseState;var C=E=null,P=null,j=g;do{var K=j.lane;if((rs&K)===K)P!==null&&(P=P.next={lane:0,action:j.action,hasEagerState:j.hasEagerState,eagerState:j.eagerState,next:null}),h=j.hasEagerState?j.eagerState:r(h,j.action);else{var Y={lane:K,action:j.action,hasEagerState:j.hasEagerState,eagerState:j.eagerState,next:null};P===null?(C=P=Y,E=h):P=P.next=Y,it.lanes|=K,is|=K}j=j.next}while(j!==null&&j!==g);P===null?E=h:P.next=C,Hn(h,s.memoizedState)||(ln=!0),s.memoizedState=h,s.baseState=E,s.baseQueue=P,a.lastRenderedState=h}if(r=a.interleaved,r!==null){f=r;do g=f.lane,it.lanes|=g,is|=g,f=f.next;while(f!==r)}else f===null&&(a.lanes=0);return[s.memoizedState,a.dispatch]}function fd(r){var s=Vn(),a=s.queue;if(a===null)throw Error(t(311));a.lastRenderedReducer=r;var h=a.dispatch,f=a.pending,g=s.memoizedState;if(f!==null){a.pending=null;var E=f=f.next;do g=r(g,E.action),E=E.next;while(E!==f);Hn(g,s.memoizedState)||(ln=!0),s.memoizedState=g,s.baseQueue===null&&(s.baseState=g),a.lastRenderedState=g}return[g,h]}function ig(){}function sg(r,s){var a=it,h=Vn(),f=s(),g=!Hn(h.memoizedState,f);if(g&&(h.memoizedState=f,ln=!0),h=h.queue,pd(ag.bind(null,a,h,r),[r]),h.getSnapshot!==s||g||At!==null&&At.memoizedState.tag&1){if(a.flags|=2048,Ul(9,lg.bind(null,a,h,f,s),void 0,null),Pt===null)throw Error(t(349));rs&30||og(a,s,f)}return f}function og(r,s,a){r.flags|=16384,r={getSnapshot:s,value:a},s=it.updateQueue,s===null?(s={lastEffect:null,stores:null},it.updateQueue=s,s.stores=[r]):(a=s.stores,a===null?s.stores=[r]:a.push(r))}function lg(r,s,a,h){s.value=a,s.getSnapshot=h,ug(s)&&cg(r)}function ag(r,s,a){return a(function(){ug(s)&&cg(r)})}function ug(r){var s=r.getSnapshot;r=r.value;try{var a=s();return!Hn(r,a)}catch{return!0}}function cg(r){var s=Lr(r,1);s!==null&&Yn(s,r,1,-1)}function hg(r){var s=dr();return typeof r=="function"&&(r=r()),s.memoizedState=s.baseState=r,r={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:bl,lastRenderedState:r},s.queue=r,r=r.dispatch=Gw.bind(null,it,r),[s.memoizedState,r]}function Ul(r,s,a,h){return r={tag:r,create:s,destroy:a,deps:h,next:null},s=it.updateQueue,s===null?(s={lastEffect:null,stores:null},it.updateQueue=s,s.lastEffect=r.next=r):(a=s.lastEffect,a===null?s.lastEffect=r.next=r:(h=a.next,a.next=r,r.next=h,s.lastEffect=r)),r}function dg(){return Vn().memoizedState}function Nu(r,s,a,h){var f=dr();it.flags|=r,f.memoizedState=Ul(1|s,a,void 0,h===void 0?null:h)}function xu(r,s,a,h){var f=Vn();h=h===void 0?null:h;var g=void 0;if(Et!==null){var E=Et.memoizedState;if(g=E.destroy,h!==null&&ud(h,E.deps)){f.memoizedState=Ul(s,a,g,h);return}}it.flags|=r,f.memoizedState=Ul(1|s,a,g,h)}function fg(r,s){return Nu(8390656,8,r,s)}function pd(r,s){return xu(2048,8,r,s)}function pg(r,s){return xu(4,2,r,s)}function mg(r,s){return xu(4,4,r,s)}function gg(r,s){if(typeof s=="function")return r=r(),s(r),function(){s(null)};if(s!=null)return r=r(),s.current=r,function(){s.current=null}}function _g(r,s,a){return a=a!=null?a.concat([r]):null,xu(4,4,gg.bind(null,s,r),a)}function md(){}function yg(r,s){var a=Vn();s=s===void 0?null:s;var h=a.memoizedState;return h!==null&&s!==null&&ud(s,h[1])?h[0]:(a.memoizedState=[r,s],r)}function vg(r,s){var a=Vn();s=s===void 0?null:s;var h=a.memoizedState;return h!==null&&s!==null&&ud(s,h[1])?h[0]:(r=r(),a.memoizedState=[r,s],r)}function Eg(r,s,a){return rs&21?(Hn(a,s)||(a=$i(),it.lanes|=a,is|=a,r.baseState=!0),s):(r.baseState&&(r.baseState=!1,ln=!0),r.memoizedState=a)}function Hw(r,s){var a=Ne;Ne=a!==0&&4>a?a:4,r(!0);var h=ad.transition;ad.transition={};try{r(!1),s()}finally{Ne=a,ad.transition=h}}function wg(){return Vn().memoizedState}function $w(r,s,a){var h=fi(r);if(a={lane:h,action:a,hasEagerState:!1,eagerState:null,next:null},Tg(r))Ig(s,a);else if(a=Zm(r,s,a,h),a!==null){var f=tn();Yn(a,r,h,f),Cg(a,s,h)}}function Gw(r,s,a){var h=fi(r),f={lane:h,action:a,hasEagerState:!1,eagerState:null,next:null};if(Tg(r))Ig(s,f);else{var g=r.alternate;if(r.lanes===0&&(g===null||g.lanes===0)&&(g=s.lastRenderedReducer,g!==null))try{var E=s.lastRenderedState,C=g(E,a);if(f.hasEagerState=!0,f.eagerState=C,Hn(C,E)){var P=s.interleaved;P===null?(f.next=f,nd(s)):(f.next=P.next,P.next=f),s.interleaved=f;return}}catch{}finally{}a=Zm(r,s,f,h),a!==null&&(f=tn(),Yn(a,r,h,f),Cg(a,s,h))}}function Tg(r){var s=r.alternate;return r===it||s!==null&&s===it}function Ig(r,s){Ml=ku=!0;var a=r.pending;a===null?s.next=s:(s.next=a.next,a.next=s),r.pending=s}function Cg(r,s,a){if(a&4194240){var h=s.lanes;h&=r.pendingLanes,a|=h,s.lanes=a,Jr(r,a)}}var Du={readContext:Dn,useCallback:qt,useContext:qt,useEffect:qt,useImperativeHandle:qt,useInsertionEffect:qt,useLayoutEffect:qt,useMemo:qt,useReducer:qt,useRef:qt,useState:qt,useDebugValue:qt,useDeferredValue:qt,useTransition:qt,useMutableSource:qt,useSyncExternalStore:qt,useId:qt,unstable_isNewReconciler:!1},Qw={readContext:Dn,useCallback:function(r,s){return dr().memoizedState=[r,s===void 0?null:s],r},useContext:Dn,useEffect:fg,useImperativeHandle:function(r,s,a){return a=a!=null?a.concat([r]):null,Nu(4194308,4,gg.bind(null,s,r),a)},useLayoutEffect:function(r,s){return Nu(4194308,4,r,s)},useInsertionEffect:function(r,s){return Nu(4,2,r,s)},useMemo:function(r,s){var a=dr();return s=s===void 0?null:s,r=r(),a.memoizedState=[r,s],r},useReducer:function(r,s,a){var h=dr();return s=a!==void 0?a(s):s,h.memoizedState=h.baseState=s,r={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:s},h.queue=r,r=r.dispatch=$w.bind(null,it,r),[h.memoizedState,r]},useRef:function(r){var s=dr();return r={current:r},s.memoizedState=r},useState:hg,useDebugValue:md,useDeferredValue:function(r){return dr().memoizedState=r},useTransition:function(){var r=hg(!1),s=r[0];return r=Hw.bind(null,r[1]),dr().memoizedState=r,[s,r]},useMutableSource:function(){},useSyncExternalStore:function(r,s,a){var h=it,f=dr();if(nt){if(a===void 0)throw Error(t(407));a=a()}else{if(a=s(),Pt===null)throw Error(t(349));rs&30||og(h,s,a)}f.memoizedState=a;var g={value:a,getSnapshot:s};return f.queue=g,fg(ag.bind(null,h,g,r),[r]),h.flags|=2048,Ul(9,lg.bind(null,h,g,a,s),void 0,null),a},useId:function(){var r=dr(),s=Pt.identifierPrefix;if(nt){var a=Vr,h=Dr;a=(h&~(1<<32-Jt(h)-1)).toString(32)+a,s=":"+s+"R"+a,a=Fl++,0<a&&(s+="H"+a.toString(32)),s+=":"}else a=Ww++,s=":"+s+"r"+a.toString(32)+":";return r.memoizedState=s},unstable_isNewReconciler:!1},Kw={readContext:Dn,useCallback:yg,useContext:Dn,useEffect:pd,useImperativeHandle:_g,useInsertionEffect:pg,useLayoutEffect:mg,useMemo:vg,useReducer:dd,useRef:dg,useState:function(){return dd(bl)},useDebugValue:md,useDeferredValue:function(r){var s=Vn();return Eg(s,Et.memoizedState,r)},useTransition:function(){var r=dd(bl)[0],s=Vn().memoizedState;return[r,s]},useMutableSource:ig,useSyncExternalStore:sg,useId:wg,unstable_isNewReconciler:!1},Yw={readContext:Dn,useCallback:yg,useContext:Dn,useEffect:pd,useImperativeHandle:_g,useInsertionEffect:pg,useLayoutEffect:mg,useMemo:vg,useReducer:fd,useRef:dg,useState:function(){return fd(bl)},useDebugValue:md,useDeferredValue:function(r){var s=Vn();return Et===null?s.memoizedState=r:Eg(s,Et.memoizedState,r)},useTransition:function(){var r=fd(bl)[0],s=Vn().memoizedState;return[r,s]},useMutableSource:ig,useSyncExternalStore:sg,useId:wg,unstable_isNewReconciler:!1};function Gn(r,s){if(r&&r.defaultProps){s=re({},s),r=r.defaultProps;for(var a in r)s[a]===void 0&&(s[a]=r[a]);return s}return s}function gd(r,s,a,h){s=r.memoizedState,a=a(h,s),a=a==null?s:re({},s,a),r.memoizedState=a,r.lanes===0&&(r.updateQueue.baseState=a)}var Vu={isMounted:function(r){return(r=r._reactInternals)?bn(r)===r:!1},enqueueSetState:function(r,s,a){r=r._reactInternals;var h=tn(),f=fi(r),g=Or(h,f);g.payload=s,a!=null&&(g.callback=a),s=ui(r,g,f),s!==null&&(Yn(s,r,f,h),Su(s,r,f))},enqueueReplaceState:function(r,s,a){r=r._reactInternals;var h=tn(),f=fi(r),g=Or(h,f);g.tag=1,g.payload=s,a!=null&&(g.callback=a),s=ui(r,g,f),s!==null&&(Yn(s,r,f,h),Su(s,r,f))},enqueueForceUpdate:function(r,s){r=r._reactInternals;var a=tn(),h=fi(r),f=Or(a,h);f.tag=2,s!=null&&(f.callback=s),s=ui(r,f,h),s!==null&&(Yn(s,r,h,a),Su(s,r,h))}};function Sg(r,s,a,h,f,g,E){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(h,g,E):s.prototype&&s.prototype.isPureReactComponent?!Sl(a,h)||!Sl(f,g):!0}function Rg(r,s,a){var h=!1,f=oi,g=s.contextType;return typeof g=="object"&&g!==null?g=Dn(g):(f=on(s)?Ji:zt.current,h=s.contextTypes,g=(h=h!=null)?io(r,f):oi),s=new s(a,g),r.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s.updater=Vu,r.stateNode=s,s._reactInternals=r,h&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=f,r.__reactInternalMemoizedMaskedChildContext=g),s}function Ag(r,s,a,h){r=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(a,h),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(a,h),s.state!==r&&Vu.enqueueReplaceState(s,s.state,null)}function _d(r,s,a,h){var f=r.stateNode;f.props=a,f.state=r.memoizedState,f.refs={},rd(r);var g=s.contextType;typeof g=="object"&&g!==null?f.context=Dn(g):(g=on(s)?Ji:zt.current,f.context=io(r,g)),f.state=r.memoizedState,g=s.getDerivedStateFromProps,typeof g=="function"&&(gd(r,s,g,a),f.state=r.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof f.getSnapshotBeforeUpdate=="function"||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(s=f.state,typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount(),s!==f.state&&Vu.enqueueReplaceState(f,f.state,null),Ru(r,a,f,h),f.state=r.memoizedState),typeof f.componentDidMount=="function"&&(r.flags|=4194308)}function fo(r,s){try{var a="",h=s;do a+=Ce(h),h=h.return;while(h);var f=a}catch(g){f=`
Error generating stack: `+g.message+`
`+g.stack}return{value:r,source:s,stack:f,digest:null}}function yd(r,s,a){return{value:r,source:null,stack:a??null,digest:s??null}}function vd(r,s){try{console.error(s.value)}catch(a){setTimeout(function(){throw a})}}var Xw=typeof WeakMap=="function"?WeakMap:Map;function Pg(r,s,a){a=Or(-1,a),a.tag=3,a.payload={element:null};var h=s.value;return a.callback=function(){ju||(ju=!0,Ld=h),vd(r,s)},a}function kg(r,s,a){a=Or(-1,a),a.tag=3;var h=r.type.getDerivedStateFromError;if(typeof h=="function"){var f=s.value;a.payload=function(){return h(f)},a.callback=function(){vd(r,s)}}var g=r.stateNode;return g!==null&&typeof g.componentDidCatch=="function"&&(a.callback=function(){vd(r,s),typeof h!="function"&&(hi===null?hi=new Set([this]):hi.add(this));var E=s.stack;this.componentDidCatch(s.value,{componentStack:E!==null?E:""})}),a}function Ng(r,s,a){var h=r.pingCache;if(h===null){h=r.pingCache=new Xw;var f=new Set;h.set(s,f)}else f=h.get(s),f===void 0&&(f=new Set,h.set(s,f));f.has(a)||(f.add(a),r=hT.bind(null,r,s,a),s.then(r,r))}function xg(r){do{var s;if((s=r.tag===13)&&(s=r.memoizedState,s=s!==null?s.dehydrated!==null:!0),s)return r;r=r.return}while(r!==null);return null}function Dg(r,s,a,h,f){return r.mode&1?(r.flags|=65536,r.lanes=f,r):(r===s?r.flags|=65536:(r.flags|=128,a.flags|=131072,a.flags&=-52805,a.tag===1&&(a.alternate===null?a.tag=17:(s=Or(-1,1),s.tag=2,ui(a,s,1))),a.lanes|=1),r)}var Jw=we.ReactCurrentOwner,ln=!1;function en(r,s,a,h){s.child=r===null?Jm(s,null,a,h):ao(s,r.child,a,h)}function Vg(r,s,a,h,f){a=a.render;var g=s.ref;return co(s,f),h=cd(r,s,a,h,g,f),a=hd(),r!==null&&!ln?(s.updateQueue=r.updateQueue,s.flags&=-2053,r.lanes&=~f,Mr(r,s,f)):(nt&&a&&Gh(s),s.flags|=1,en(r,s,h,f),s.child)}function Lg(r,s,a,h,f){if(r===null){var g=a.type;return typeof g=="function"&&!Bd(g)&&g.defaultProps===void 0&&a.compare===null&&a.defaultProps===void 0?(s.tag=15,s.type=g,Og(r,s,g,h,f)):(r=$u(a.type,null,h,s,s.mode,f),r.ref=s.ref,r.return=s,s.child=r)}if(g=r.child,!(r.lanes&f)){var E=g.memoizedProps;if(a=a.compare,a=a!==null?a:Sl,a(E,h)&&r.ref===s.ref)return Mr(r,s,f)}return s.flags|=1,r=mi(g,h),r.ref=s.ref,r.return=s,s.child=r}function Og(r,s,a,h,f){if(r!==null){var g=r.memoizedProps;if(Sl(g,h)&&r.ref===s.ref)if(ln=!1,s.pendingProps=h=g,(r.lanes&f)!==0)r.flags&131072&&(ln=!0);else return s.lanes=r.lanes,Mr(r,s,f)}return Ed(r,s,a,h,f)}function Mg(r,s,a){var h=s.pendingProps,f=h.children,g=r!==null?r.memoizedState:null;if(h.mode==="hidden")if(!(s.mode&1))s.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ke(mo,Tn),Tn|=a;else{if(!(a&1073741824))return r=g!==null?g.baseLanes|a:a,s.lanes=s.childLanes=1073741824,s.memoizedState={baseLanes:r,cachePool:null,transitions:null},s.updateQueue=null,Ke(mo,Tn),Tn|=r,null;s.memoizedState={baseLanes:0,cachePool:null,transitions:null},h=g!==null?g.baseLanes:a,Ke(mo,Tn),Tn|=h}else g!==null?(h=g.baseLanes|a,s.memoizedState=null):h=a,Ke(mo,Tn),Tn|=h;return en(r,s,f,a),s.child}function Fg(r,s){var a=s.ref;(r===null&&a!==null||r!==null&&r.ref!==a)&&(s.flags|=512,s.flags|=2097152)}function Ed(r,s,a,h,f){var g=on(a)?Ji:zt.current;return g=io(s,g),co(s,f),a=cd(r,s,a,h,g,f),h=hd(),r!==null&&!ln?(s.updateQueue=r.updateQueue,s.flags&=-2053,r.lanes&=~f,Mr(r,s,f)):(nt&&h&&Gh(s),s.flags|=1,en(r,s,a,f),s.child)}function bg(r,s,a,h,f){if(on(a)){var g=!0;_u(s)}else g=!1;if(co(s,f),s.stateNode===null)Ou(r,s),Rg(s,a,h),_d(s,a,h,f),h=!0;else if(r===null){var E=s.stateNode,C=s.memoizedProps;E.props=C;var P=E.context,j=a.contextType;typeof j=="object"&&j!==null?j=Dn(j):(j=on(a)?Ji:zt.current,j=io(s,j));var K=a.getDerivedStateFromProps,Y=typeof K=="function"||typeof E.getSnapshotBeforeUpdate=="function";Y||typeof E.UNSAFE_componentWillReceiveProps!="function"&&typeof E.componentWillReceiveProps!="function"||(C!==h||P!==j)&&Ag(s,E,h,j),ai=!1;var Q=s.memoizedState;E.state=Q,Ru(s,h,E,f),P=s.memoizedState,C!==h||Q!==P||sn.current||ai?(typeof K=="function"&&(gd(s,a,K,h),P=s.memoizedState),(C=ai||Sg(s,a,C,h,Q,P,j))?(Y||typeof E.UNSAFE_componentWillMount!="function"&&typeof E.componentWillMount!="function"||(typeof E.componentWillMount=="function"&&E.componentWillMount(),typeof E.UNSAFE_componentWillMount=="function"&&E.UNSAFE_componentWillMount()),typeof E.componentDidMount=="function"&&(s.flags|=4194308)):(typeof E.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=h,s.memoizedState=P),E.props=h,E.state=P,E.context=j,h=C):(typeof E.componentDidMount=="function"&&(s.flags|=4194308),h=!1)}else{E=s.stateNode,eg(r,s),C=s.memoizedProps,j=s.type===s.elementType?C:Gn(s.type,C),E.props=j,Y=s.pendingProps,Q=E.context,P=a.contextType,typeof P=="object"&&P!==null?P=Dn(P):(P=on(a)?Ji:zt.current,P=io(s,P));var ne=a.getDerivedStateFromProps;(K=typeof ne=="function"||typeof E.getSnapshotBeforeUpdate=="function")||typeof E.UNSAFE_componentWillReceiveProps!="function"&&typeof E.componentWillReceiveProps!="function"||(C!==Y||Q!==P)&&Ag(s,E,h,P),ai=!1,Q=s.memoizedState,E.state=Q,Ru(s,h,E,f);var oe=s.memoizedState;C!==Y||Q!==oe||sn.current||ai?(typeof ne=="function"&&(gd(s,a,ne,h),oe=s.memoizedState),(j=ai||Sg(s,a,j,h,Q,oe,P)||!1)?(K||typeof E.UNSAFE_componentWillUpdate!="function"&&typeof E.componentWillUpdate!="function"||(typeof E.componentWillUpdate=="function"&&E.componentWillUpdate(h,oe,P),typeof E.UNSAFE_componentWillUpdate=="function"&&E.UNSAFE_componentWillUpdate(h,oe,P)),typeof E.componentDidUpdate=="function"&&(s.flags|=4),typeof E.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof E.componentDidUpdate!="function"||C===r.memoizedProps&&Q===r.memoizedState||(s.flags|=4),typeof E.getSnapshotBeforeUpdate!="function"||C===r.memoizedProps&&Q===r.memoizedState||(s.flags|=1024),s.memoizedProps=h,s.memoizedState=oe),E.props=h,E.state=oe,E.context=P,h=j):(typeof E.componentDidUpdate!="function"||C===r.memoizedProps&&Q===r.memoizedState||(s.flags|=4),typeof E.getSnapshotBeforeUpdate!="function"||C===r.memoizedProps&&Q===r.memoizedState||(s.flags|=1024),h=!1)}return wd(r,s,a,h,g,f)}function wd(r,s,a,h,f,g){Fg(r,s);var E=(s.flags&128)!==0;if(!h&&!E)return f&&qm(s,a,!1),Mr(r,s,g);h=s.stateNode,Jw.current=s;var C=E&&typeof a.getDerivedStateFromError!="function"?null:h.render();return s.flags|=1,r!==null&&E?(s.child=ao(s,r.child,null,g),s.child=ao(s,null,C,g)):en(r,s,C,g),s.memoizedState=h.state,f&&qm(s,a,!0),s.child}function Ug(r){var s=r.stateNode;s.pendingContext?Bm(r,s.pendingContext,s.pendingContext!==s.context):s.context&&Bm(r,s.context,!1),id(r,s.containerInfo)}function jg(r,s,a,h,f){return lo(),Xh(f),s.flags|=256,en(r,s,a,h),s.child}var Td={dehydrated:null,treeContext:null,retryLane:0};function Id(r){return{baseLanes:r,cachePool:null,transitions:null}}function Bg(r,s,a){var h=s.pendingProps,f=rt.current,g=!1,E=(s.flags&128)!==0,C;if((C=E)||(C=r!==null&&r.memoizedState===null?!1:(f&2)!==0),C?(g=!0,s.flags&=-129):(r===null||r.memoizedState!==null)&&(f|=1),Ke(rt,f&1),r===null)return Yh(s),r=s.memoizedState,r!==null&&(r=r.dehydrated,r!==null)?(s.mode&1?r.data==="$!"?s.lanes=8:s.lanes=1073741824:s.lanes=1,null):(E=h.children,r=h.fallback,g?(h=s.mode,g=s.child,E={mode:"hidden",children:E},!(h&1)&&g!==null?(g.childLanes=0,g.pendingProps=E):g=Gu(E,h,0,null),r=as(r,h,a,null),g.return=s,r.return=s,g.sibling=r,s.child=g,s.child.memoizedState=Id(a),s.memoizedState=Td,r):Cd(s,E));if(f=r.memoizedState,f!==null&&(C=f.dehydrated,C!==null))return Zw(r,s,E,h,C,f,a);if(g){g=h.fallback,E=s.mode,f=r.child,C=f.sibling;var P={mode:"hidden",children:h.children};return!(E&1)&&s.child!==f?(h=s.child,h.childLanes=0,h.pendingProps=P,s.deletions=null):(h=mi(f,P),h.subtreeFlags=f.subtreeFlags&14680064),C!==null?g=mi(C,g):(g=as(g,E,a,null),g.flags|=2),g.return=s,h.return=s,h.sibling=g,s.child=h,h=g,g=s.child,E=r.child.memoizedState,E=E===null?Id(a):{baseLanes:E.baseLanes|a,cachePool:null,transitions:E.transitions},g.memoizedState=E,g.childLanes=r.childLanes&~a,s.memoizedState=Td,h}return g=r.child,r=g.sibling,h=mi(g,{mode:"visible",children:h.children}),!(s.mode&1)&&(h.lanes=a),h.return=s,h.sibling=null,r!==null&&(a=s.deletions,a===null?(s.deletions=[r],s.flags|=16):a.push(r)),s.child=h,s.memoizedState=null,h}function Cd(r,s){return s=Gu({mode:"visible",children:s},r.mode,0,null),s.return=r,r.child=s}function Lu(r,s,a,h){return h!==null&&Xh(h),ao(s,r.child,null,a),r=Cd(s,s.pendingProps.children),r.flags|=2,s.memoizedState=null,r}function Zw(r,s,a,h,f,g,E){if(a)return s.flags&256?(s.flags&=-257,h=yd(Error(t(422))),Lu(r,s,E,h)):s.memoizedState!==null?(s.child=r.child,s.flags|=128,null):(g=h.fallback,f=s.mode,h=Gu({mode:"visible",children:h.children},f,0,null),g=as(g,f,E,null),g.flags|=2,h.return=s,g.return=s,h.sibling=g,s.child=h,s.mode&1&&ao(s,r.child,null,E),s.child.memoizedState=Id(E),s.memoizedState=Td,g);if(!(s.mode&1))return Lu(r,s,E,null);if(f.data==="$!"){if(h=f.nextSibling&&f.nextSibling.dataset,h)var C=h.dgst;return h=C,g=Error(t(419)),h=yd(g,h,void 0),Lu(r,s,E,h)}if(C=(E&r.childLanes)!==0,ln||C){if(h=Pt,h!==null){switch(E&-E){case 4:f=2;break;case 16:f=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:f=32;break;case 536870912:f=268435456;break;default:f=0}f=f&(h.suspendedLanes|E)?0:f,f!==0&&f!==g.retryLane&&(g.retryLane=f,Lr(r,f),Yn(h,r,f,-1))}return jd(),h=yd(Error(t(421))),Lu(r,s,E,h)}return f.data==="$?"?(s.flags|=128,s.child=r.child,s=dT.bind(null,r),f._reactRetry=s,null):(r=g.treeContext,wn=ii(f.nextSibling),En=s,nt=!0,$n=null,r!==null&&(Nn[xn++]=Dr,Nn[xn++]=Vr,Nn[xn++]=Zi,Dr=r.id,Vr=r.overflow,Zi=s),s=Cd(s,h.children),s.flags|=4096,s)}function zg(r,s,a){r.lanes|=s;var h=r.alternate;h!==null&&(h.lanes|=s),td(r.return,s,a)}function Sd(r,s,a,h,f){var g=r.memoizedState;g===null?r.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:h,tail:a,tailMode:f}:(g.isBackwards=s,g.rendering=null,g.renderingStartTime=0,g.last=h,g.tail=a,g.tailMode=f)}function qg(r,s,a){var h=s.pendingProps,f=h.revealOrder,g=h.tail;if(en(r,s,h.children,a),h=rt.current,h&2)h=h&1|2,s.flags|=128;else{if(r!==null&&r.flags&128)e:for(r=s.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&zg(r,a,s);else if(r.tag===19)zg(r,a,s);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===s)break e;for(;r.sibling===null;){if(r.return===null||r.return===s)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}h&=1}if(Ke(rt,h),!(s.mode&1))s.memoizedState=null;else switch(f){case"forwards":for(a=s.child,f=null;a!==null;)r=a.alternate,r!==null&&Au(r)===null&&(f=a),a=a.sibling;a=f,a===null?(f=s.child,s.child=null):(f=a.sibling,a.sibling=null),Sd(s,!1,f,a,g);break;case"backwards":for(a=null,f=s.child,s.child=null;f!==null;){if(r=f.alternate,r!==null&&Au(r)===null){s.child=f;break}r=f.sibling,f.sibling=a,a=f,f=r}Sd(s,!0,a,null,g);break;case"together":Sd(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function Ou(r,s){!(s.mode&1)&&r!==null&&(r.alternate=null,s.alternate=null,s.flags|=2)}function Mr(r,s,a){if(r!==null&&(s.dependencies=r.dependencies),is|=s.lanes,!(a&s.childLanes))return null;if(r!==null&&s.child!==r.child)throw Error(t(153));if(s.child!==null){for(r=s.child,a=mi(r,r.pendingProps),s.child=a,a.return=s;r.sibling!==null;)r=r.sibling,a=a.sibling=mi(r,r.pendingProps),a.return=s;a.sibling=null}return s.child}function eT(r,s,a){switch(s.tag){case 3:Ug(s),lo();break;case 5:rg(s);break;case 1:on(s.type)&&_u(s);break;case 4:id(s,s.stateNode.containerInfo);break;case 10:var h=s.type._context,f=s.memoizedProps.value;Ke(Iu,h._currentValue),h._currentValue=f;break;case 13:if(h=s.memoizedState,h!==null)return h.dehydrated!==null?(Ke(rt,rt.current&1),s.flags|=128,null):a&s.child.childLanes?Bg(r,s,a):(Ke(rt,rt.current&1),r=Mr(r,s,a),r!==null?r.sibling:null);Ke(rt,rt.current&1);break;case 19:if(h=(a&s.childLanes)!==0,r.flags&128){if(h)return qg(r,s,a);s.flags|=128}if(f=s.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),Ke(rt,rt.current),h)break;return null;case 22:case 23:return s.lanes=0,Mg(r,s,a)}return Mr(r,s,a)}var Wg,Rd,Hg,$g;Wg=function(r,s){for(var a=s.child;a!==null;){if(a.tag===5||a.tag===6)r.appendChild(a.stateNode);else if(a.tag!==4&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===s)break;for(;a.sibling===null;){if(a.return===null||a.return===s)return;a=a.return}a.sibling.return=a.return,a=a.sibling}},Rd=function(){},Hg=function(r,s,a,h){var f=r.memoizedProps;if(f!==h){r=s.stateNode,ns(hr.current);var g=null;switch(a){case"input":f=Oi(r,f),h=Oi(r,h),g=[];break;case"select":f=re({},f,{value:void 0}),h=re({},h,{value:void 0}),g=[];break;case"textarea":f=el(r,f),h=el(r,h),g=[];break;default:typeof f.onClick!="function"&&typeof h.onClick=="function"&&(r.onclick=pu)}ol(a,h);var E;a=null;for(j in f)if(!h.hasOwnProperty(j)&&f.hasOwnProperty(j)&&f[j]!=null)if(j==="style"){var C=f[j];for(E in C)C.hasOwnProperty(E)&&(a||(a={}),a[E]="")}else j!=="dangerouslySetInnerHTML"&&j!=="children"&&j!=="suppressContentEditableWarning"&&j!=="suppressHydrationWarning"&&j!=="autoFocus"&&(o.hasOwnProperty(j)?g||(g=[]):(g=g||[]).push(j,null));for(j in h){var P=h[j];if(C=f!=null?f[j]:void 0,h.hasOwnProperty(j)&&P!==C&&(P!=null||C!=null))if(j==="style")if(C){for(E in C)!C.hasOwnProperty(E)||P&&P.hasOwnProperty(E)||(a||(a={}),a[E]="");for(E in P)P.hasOwnProperty(E)&&C[E]!==P[E]&&(a||(a={}),a[E]=P[E])}else a||(g||(g=[]),g.push(j,a)),a=P;else j==="dangerouslySetInnerHTML"?(P=P?P.__html:void 0,C=C?C.__html:void 0,P!=null&&C!==P&&(g=g||[]).push(j,P)):j==="children"?typeof P!="string"&&typeof P!="number"||(g=g||[]).push(j,""+P):j!=="suppressContentEditableWarning"&&j!=="suppressHydrationWarning"&&(o.hasOwnProperty(j)?(P!=null&&j==="onScroll"&&Je("scroll",r),g||C===P||(g=[])):(g=g||[]).push(j,P))}a&&(g=g||[]).push("style",a);var j=g;(s.updateQueue=j)&&(s.flags|=4)}},$g=function(r,s,a,h){a!==h&&(s.flags|=4)};function jl(r,s){if(!nt)switch(r.tailMode){case"hidden":s=r.tail;for(var a=null;s!==null;)s.alternate!==null&&(a=s),s=s.sibling;a===null?r.tail=null:a.sibling=null;break;case"collapsed":a=r.tail;for(var h=null;a!==null;)a.alternate!==null&&(h=a),a=a.sibling;h===null?s||r.tail===null?r.tail=null:r.tail.sibling=null:h.sibling=null}}function Wt(r){var s=r.alternate!==null&&r.alternate.child===r.child,a=0,h=0;if(s)for(var f=r.child;f!==null;)a|=f.lanes|f.childLanes,h|=f.subtreeFlags&14680064,h|=f.flags&14680064,f.return=r,f=f.sibling;else for(f=r.child;f!==null;)a|=f.lanes|f.childLanes,h|=f.subtreeFlags,h|=f.flags,f.return=r,f=f.sibling;return r.subtreeFlags|=h,r.childLanes=a,s}function tT(r,s,a){var h=s.pendingProps;switch(Qh(s),s.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Wt(s),null;case 1:return on(s.type)&&gu(),Wt(s),null;case 3:return h=s.stateNode,ho(),Ze(sn),Ze(zt),ld(),h.pendingContext&&(h.context=h.pendingContext,h.pendingContext=null),(r===null||r.child===null)&&(wu(s)?s.flags|=4:r===null||r.memoizedState.isDehydrated&&!(s.flags&256)||(s.flags|=1024,$n!==null&&(Fd($n),$n=null))),Rd(r,s),Wt(s),null;case 5:sd(s);var f=ns(Ol.current);if(a=s.type,r!==null&&s.stateNode!=null)Hg(r,s,a,h,f),r.ref!==s.ref&&(s.flags|=512,s.flags|=2097152);else{if(!h){if(s.stateNode===null)throw Error(t(166));return Wt(s),null}if(r=ns(hr.current),wu(s)){h=s.stateNode,a=s.type;var g=s.memoizedProps;switch(h[cr]=s,h[Nl]=g,r=(s.mode&1)!==0,a){case"dialog":Je("cancel",h),Je("close",h);break;case"iframe":case"object":case"embed":Je("load",h);break;case"video":case"audio":for(f=0;f<Al.length;f++)Je(Al[f],h);break;case"source":Je("error",h);break;case"img":case"image":case"link":Je("error",h),Je("load",h);break;case"details":Je("toggle",h);break;case"input":Rs(h,g),Je("invalid",h);break;case"select":h._wrapperState={wasMultiple:!!g.multiple},Je("invalid",h);break;case"textarea":Ps(h,g),Je("invalid",h)}ol(a,g),f=null;for(var E in g)if(g.hasOwnProperty(E)){var C=g[E];E==="children"?typeof C=="string"?h.textContent!==C&&(g.suppressHydrationWarning!==!0&&fu(h.textContent,C,r),f=["children",C]):typeof C=="number"&&h.textContent!==""+C&&(g.suppressHydrationWarning!==!0&&fu(h.textContent,C,r),f=["children",""+C]):o.hasOwnProperty(E)&&C!=null&&E==="onScroll"&&Je("scroll",h)}switch(a){case"input":Er(h),Ua(h,g,!0);break;case"textarea":Er(h),tl(h);break;case"select":case"option":break;default:typeof g.onClick=="function"&&(h.onclick=pu)}h=f,s.updateQueue=h,h!==null&&(s.flags|=4)}else{E=f.nodeType===9?f:f.ownerDocument,r==="http://www.w3.org/1999/xhtml"&&(r=_t(a)),r==="http://www.w3.org/1999/xhtml"?a==="script"?(r=E.createElement("div"),r.innerHTML="<script><\/script>",r=r.removeChild(r.firstChild)):typeof h.is=="string"?r=E.createElement(a,{is:h.is}):(r=E.createElement(a),a==="select"&&(E=r,h.multiple?E.multiple=!0:h.size&&(E.size=h.size))):r=E.createElementNS(r,a),r[cr]=s,r[Nl]=h,Wg(r,s,!1,!1),s.stateNode=r;e:{switch(E=ll(a,h),a){case"dialog":Je("cancel",r),Je("close",r),f=h;break;case"iframe":case"object":case"embed":Je("load",r),f=h;break;case"video":case"audio":for(f=0;f<Al.length;f++)Je(Al[f],r);f=h;break;case"source":Je("error",r),f=h;break;case"img":case"image":case"link":Je("error",r),Je("load",r),f=h;break;case"details":Je("toggle",r),f=h;break;case"input":Rs(r,h),f=Oi(r,h),Je("invalid",r);break;case"option":f=h;break;case"select":r._wrapperState={wasMultiple:!!h.multiple},f=re({},h,{value:void 0}),Je("invalid",r);break;case"textarea":Ps(r,h),f=el(r,h),Je("invalid",r);break;default:f=h}ol(a,f),C=f;for(g in C)if(C.hasOwnProperty(g)){var P=C[g];g==="style"?il(r,P):g==="dangerouslySetInnerHTML"?(P=P?P.__html:void 0,P!=null&&nl(r,P)):g==="children"?typeof P=="string"?(a!=="textarea"||P!=="")&&Gr(r,P):typeof P=="number"&&Gr(r,""+P):g!=="suppressContentEditableWarning"&&g!=="suppressHydrationWarning"&&g!=="autoFocus"&&(o.hasOwnProperty(g)?P!=null&&g==="onScroll"&&Je("scroll",r):P!=null&&_e(r,g,P,E))}switch(a){case"input":Er(r),Ua(r,h,!1);break;case"textarea":Er(r),tl(r);break;case"option":h.value!=null&&r.setAttribute("value",""+je(h.value));break;case"select":r.multiple=!!h.multiple,g=h.value,g!=null?Tr(r,!!h.multiple,g,!1):h.defaultValue!=null&&Tr(r,!!h.multiple,h.defaultValue,!0);break;default:typeof f.onClick=="function"&&(r.onclick=pu)}switch(a){case"button":case"input":case"select":case"textarea":h=!!h.autoFocus;break e;case"img":h=!0;break e;default:h=!1}}h&&(s.flags|=4)}s.ref!==null&&(s.flags|=512,s.flags|=2097152)}return Wt(s),null;case 6:if(r&&s.stateNode!=null)$g(r,s,r.memoizedProps,h);else{if(typeof h!="string"&&s.stateNode===null)throw Error(t(166));if(a=ns(Ol.current),ns(hr.current),wu(s)){if(h=s.stateNode,a=s.memoizedProps,h[cr]=s,(g=h.nodeValue!==a)&&(r=En,r!==null))switch(r.tag){case 3:fu(h.nodeValue,a,(r.mode&1)!==0);break;case 5:r.memoizedProps.suppressHydrationWarning!==!0&&fu(h.nodeValue,a,(r.mode&1)!==0)}g&&(s.flags|=4)}else h=(a.nodeType===9?a:a.ownerDocument).createTextNode(h),h[cr]=s,s.stateNode=h}return Wt(s),null;case 13:if(Ze(rt),h=s.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(nt&&wn!==null&&s.mode&1&&!(s.flags&128))Km(),lo(),s.flags|=98560,g=!1;else if(g=wu(s),h!==null&&h.dehydrated!==null){if(r===null){if(!g)throw Error(t(318));if(g=s.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(t(317));g[cr]=s}else lo(),!(s.flags&128)&&(s.memoizedState=null),s.flags|=4;Wt(s),g=!1}else $n!==null&&(Fd($n),$n=null),g=!0;if(!g)return s.flags&65536?s:null}return s.flags&128?(s.lanes=a,s):(h=h!==null,h!==(r!==null&&r.memoizedState!==null)&&h&&(s.child.flags|=8192,s.mode&1&&(r===null||rt.current&1?wt===0&&(wt=3):jd())),s.updateQueue!==null&&(s.flags|=4),Wt(s),null);case 4:return ho(),Rd(r,s),r===null&&Pl(s.stateNode.containerInfo),Wt(s),null;case 10:return ed(s.type._context),Wt(s),null;case 17:return on(s.type)&&gu(),Wt(s),null;case 19:if(Ze(rt),g=s.memoizedState,g===null)return Wt(s),null;if(h=(s.flags&128)!==0,E=g.rendering,E===null)if(h)jl(g,!1);else{if(wt!==0||r!==null&&r.flags&128)for(r=s.child;r!==null;){if(E=Au(r),E!==null){for(s.flags|=128,jl(g,!1),h=E.updateQueue,h!==null&&(s.updateQueue=h,s.flags|=4),s.subtreeFlags=0,h=a,a=s.child;a!==null;)g=a,r=h,g.flags&=14680066,E=g.alternate,E===null?(g.childLanes=0,g.lanes=r,g.child=null,g.subtreeFlags=0,g.memoizedProps=null,g.memoizedState=null,g.updateQueue=null,g.dependencies=null,g.stateNode=null):(g.childLanes=E.childLanes,g.lanes=E.lanes,g.child=E.child,g.subtreeFlags=0,g.deletions=null,g.memoizedProps=E.memoizedProps,g.memoizedState=E.memoizedState,g.updateQueue=E.updateQueue,g.type=E.type,r=E.dependencies,g.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),a=a.sibling;return Ke(rt,rt.current&1|2),s.child}r=r.sibling}g.tail!==null&&Qe()>go&&(s.flags|=128,h=!0,jl(g,!1),s.lanes=4194304)}else{if(!h)if(r=Au(E),r!==null){if(s.flags|=128,h=!0,a=r.updateQueue,a!==null&&(s.updateQueue=a,s.flags|=4),jl(g,!0),g.tail===null&&g.tailMode==="hidden"&&!E.alternate&&!nt)return Wt(s),null}else 2*Qe()-g.renderingStartTime>go&&a!==1073741824&&(s.flags|=128,h=!0,jl(g,!1),s.lanes=4194304);g.isBackwards?(E.sibling=s.child,s.child=E):(a=g.last,a!==null?a.sibling=E:s.child=E,g.last=E)}return g.tail!==null?(s=g.tail,g.rendering=s,g.tail=s.sibling,g.renderingStartTime=Qe(),s.sibling=null,a=rt.current,Ke(rt,h?a&1|2:a&1),s):(Wt(s),null);case 22:case 23:return Ud(),h=s.memoizedState!==null,r!==null&&r.memoizedState!==null!==h&&(s.flags|=8192),h&&s.mode&1?Tn&1073741824&&(Wt(s),s.subtreeFlags&6&&(s.flags|=8192)):Wt(s),null;case 24:return null;case 25:return null}throw Error(t(156,s.tag))}function nT(r,s){switch(Qh(s),s.tag){case 1:return on(s.type)&&gu(),r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 3:return ho(),Ze(sn),Ze(zt),ld(),r=s.flags,r&65536&&!(r&128)?(s.flags=r&-65537|128,s):null;case 5:return sd(s),null;case 13:if(Ze(rt),r=s.memoizedState,r!==null&&r.dehydrated!==null){if(s.alternate===null)throw Error(t(340));lo()}return r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 19:return Ze(rt),null;case 4:return ho(),null;case 10:return ed(s.type._context),null;case 22:case 23:return Ud(),null;case 24:return null;default:return null}}var Mu=!1,Ht=!1,rT=typeof WeakSet=="function"?WeakSet:Set,se=null;function po(r,s){var a=r.ref;if(a!==null)if(typeof a=="function")try{a(null)}catch(h){ot(r,s,h)}else a.current=null}function Ad(r,s,a){try{a()}catch(h){ot(r,s,h)}}var Gg=!1;function iT(r,s){if(Uh=ti,r=Sm(),xh(r)){if("selectionStart"in r)var a={start:r.selectionStart,end:r.selectionEnd};else e:{a=(a=r.ownerDocument)&&a.defaultView||window;var h=a.getSelection&&a.getSelection();if(h&&h.rangeCount!==0){a=h.anchorNode;var f=h.anchorOffset,g=h.focusNode;h=h.focusOffset;try{a.nodeType,g.nodeType}catch{a=null;break e}var E=0,C=-1,P=-1,j=0,K=0,Y=r,Q=null;t:for(;;){for(var ne;Y!==a||f!==0&&Y.nodeType!==3||(C=E+f),Y!==g||h!==0&&Y.nodeType!==3||(P=E+h),Y.nodeType===3&&(E+=Y.nodeValue.length),(ne=Y.firstChild)!==null;)Q=Y,Y=ne;for(;;){if(Y===r)break t;if(Q===a&&++j===f&&(C=E),Q===g&&++K===h&&(P=E),(ne=Y.nextSibling)!==null)break;Y=Q,Q=Y.parentNode}Y=ne}a=C===-1||P===-1?null:{start:C,end:P}}else a=null}a=a||{start:0,end:0}}else a=null;for(jh={focusedElem:r,selectionRange:a},ti=!1,se=s;se!==null;)if(s=se,r=s.child,(s.subtreeFlags&1028)!==0&&r!==null)r.return=s,se=r;else for(;se!==null;){s=se;try{var oe=s.alternate;if(s.flags&1024)switch(s.tag){case 0:case 11:case 15:break;case 1:if(oe!==null){var le=oe.memoizedProps,ht=oe.memoizedState,F=s.stateNode,k=F.getSnapshotBeforeUpdate(s.elementType===s.type?le:Gn(s.type,le),ht);F.__reactInternalSnapshotBeforeUpdate=k}break;case 3:var b=s.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(X){ot(s,s.return,X)}if(r=s.sibling,r!==null){r.return=s.return,se=r;break}se=s.return}return oe=Gg,Gg=!1,oe}function Bl(r,s,a){var h=s.updateQueue;if(h=h!==null?h.lastEffect:null,h!==null){var f=h=h.next;do{if((f.tag&r)===r){var g=f.destroy;f.destroy=void 0,g!==void 0&&Ad(s,a,g)}f=f.next}while(f!==h)}}function Fu(r,s){if(s=s.updateQueue,s=s!==null?s.lastEffect:null,s!==null){var a=s=s.next;do{if((a.tag&r)===r){var h=a.create;a.destroy=h()}a=a.next}while(a!==s)}}function Pd(r){var s=r.ref;if(s!==null){var a=r.stateNode;switch(r.tag){case 5:r=a;break;default:r=a}typeof s=="function"?s(r):s.current=r}}function Qg(r){var s=r.alternate;s!==null&&(r.alternate=null,Qg(s)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(s=r.stateNode,s!==null&&(delete s[cr],delete s[Nl],delete s[Wh],delete s[jw],delete s[Bw])),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}function Kg(r){return r.tag===5||r.tag===3||r.tag===4}function Yg(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||Kg(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function kd(r,s,a){var h=r.tag;if(h===5||h===6)r=r.stateNode,s?a.nodeType===8?a.parentNode.insertBefore(r,s):a.insertBefore(r,s):(a.nodeType===8?(s=a.parentNode,s.insertBefore(r,a)):(s=a,s.appendChild(r)),a=a._reactRootContainer,a!=null||s.onclick!==null||(s.onclick=pu));else if(h!==4&&(r=r.child,r!==null))for(kd(r,s,a),r=r.sibling;r!==null;)kd(r,s,a),r=r.sibling}function Nd(r,s,a){var h=r.tag;if(h===5||h===6)r=r.stateNode,s?a.insertBefore(r,s):a.appendChild(r);else if(h!==4&&(r=r.child,r!==null))for(Nd(r,s,a),r=r.sibling;r!==null;)Nd(r,s,a),r=r.sibling}var Ot=null,Qn=!1;function ci(r,s,a){for(a=a.child;a!==null;)Xg(r,s,a),a=a.sibling}function Xg(r,s,a){if(gn&&typeof gn.onCommitFiberUnmount=="function")try{gn.onCommitFiberUnmount(Wi,a)}catch{}switch(a.tag){case 5:Ht||po(a,s);case 6:var h=Ot,f=Qn;Ot=null,ci(r,s,a),Ot=h,Qn=f,Ot!==null&&(Qn?(r=Ot,a=a.stateNode,r.nodeType===8?r.parentNode.removeChild(a):r.removeChild(a)):Ot.removeChild(a.stateNode));break;case 18:Ot!==null&&(Qn?(r=Ot,a=a.stateNode,r.nodeType===8?qh(r.parentNode,a):r.nodeType===1&&qh(r,a),qn(r)):qh(Ot,a.stateNode));break;case 4:h=Ot,f=Qn,Ot=a.stateNode.containerInfo,Qn=!0,ci(r,s,a),Ot=h,Qn=f;break;case 0:case 11:case 14:case 15:if(!Ht&&(h=a.updateQueue,h!==null&&(h=h.lastEffect,h!==null))){f=h=h.next;do{var g=f,E=g.destroy;g=g.tag,E!==void 0&&(g&2||g&4)&&Ad(a,s,E),f=f.next}while(f!==h)}ci(r,s,a);break;case 1:if(!Ht&&(po(a,s),h=a.stateNode,typeof h.componentWillUnmount=="function"))try{h.props=a.memoizedProps,h.state=a.memoizedState,h.componentWillUnmount()}catch(C){ot(a,s,C)}ci(r,s,a);break;case 21:ci(r,s,a);break;case 22:a.mode&1?(Ht=(h=Ht)||a.memoizedState!==null,ci(r,s,a),Ht=h):ci(r,s,a);break;default:ci(r,s,a)}}function Jg(r){var s=r.updateQueue;if(s!==null){r.updateQueue=null;var a=r.stateNode;a===null&&(a=r.stateNode=new rT),s.forEach(function(h){var f=fT.bind(null,r,h);a.has(h)||(a.add(h),h.then(f,f))})}}function Kn(r,s){var a=s.deletions;if(a!==null)for(var h=0;h<a.length;h++){var f=a[h];try{var g=r,E=s,C=E;e:for(;C!==null;){switch(C.tag){case 5:Ot=C.stateNode,Qn=!1;break e;case 3:Ot=C.stateNode.containerInfo,Qn=!0;break e;case 4:Ot=C.stateNode.containerInfo,Qn=!0;break e}C=C.return}if(Ot===null)throw Error(t(160));Xg(g,E,f),Ot=null,Qn=!1;var P=f.alternate;P!==null&&(P.return=null),f.return=null}catch(j){ot(f,s,j)}}if(s.subtreeFlags&12854)for(s=s.child;s!==null;)Zg(s,r),s=s.sibling}function Zg(r,s){var a=r.alternate,h=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:if(Kn(s,r),fr(r),h&4){try{Bl(3,r,r.return),Fu(3,r)}catch(le){ot(r,r.return,le)}try{Bl(5,r,r.return)}catch(le){ot(r,r.return,le)}}break;case 1:Kn(s,r),fr(r),h&512&&a!==null&&po(a,a.return);break;case 5:if(Kn(s,r),fr(r),h&512&&a!==null&&po(a,a.return),r.flags&32){var f=r.stateNode;try{Gr(f,"")}catch(le){ot(r,r.return,le)}}if(h&4&&(f=r.stateNode,f!=null)){var g=r.memoizedProps,E=a!==null?a.memoizedProps:g,C=r.type,P=r.updateQueue;if(r.updateQueue=null,P!==null)try{C==="input"&&g.type==="radio"&&g.name!=null&&Jo(f,g),ll(C,E);var j=ll(C,g);for(E=0;E<P.length;E+=2){var K=P[E],Y=P[E+1];K==="style"?il(f,Y):K==="dangerouslySetInnerHTML"?nl(f,Y):K==="children"?Gr(f,Y):_e(f,K,Y,j)}switch(C){case"input":Zo(f,g);break;case"textarea":ks(f,g);break;case"select":var Q=f._wrapperState.wasMultiple;f._wrapperState.wasMultiple=!!g.multiple;var ne=g.value;ne!=null?Tr(f,!!g.multiple,ne,!1):Q!==!!g.multiple&&(g.defaultValue!=null?Tr(f,!!g.multiple,g.defaultValue,!0):Tr(f,!!g.multiple,g.multiple?[]:"",!1))}f[Nl]=g}catch(le){ot(r,r.return,le)}}break;case 6:if(Kn(s,r),fr(r),h&4){if(r.stateNode===null)throw Error(t(162));f=r.stateNode,g=r.memoizedProps;try{f.nodeValue=g}catch(le){ot(r,r.return,le)}}break;case 3:if(Kn(s,r),fr(r),h&4&&a!==null&&a.memoizedState.isDehydrated)try{qn(s.containerInfo)}catch(le){ot(r,r.return,le)}break;case 4:Kn(s,r),fr(r);break;case 13:Kn(s,r),fr(r),f=r.child,f.flags&8192&&(g=f.memoizedState!==null,f.stateNode.isHidden=g,!g||f.alternate!==null&&f.alternate.memoizedState!==null||(Vd=Qe())),h&4&&Jg(r);break;case 22:if(K=a!==null&&a.memoizedState!==null,r.mode&1?(Ht=(j=Ht)||K,Kn(s,r),Ht=j):Kn(s,r),fr(r),h&8192){if(j=r.memoizedState!==null,(r.stateNode.isHidden=j)&&!K&&r.mode&1)for(se=r,K=r.child;K!==null;){for(Y=se=K;se!==null;){switch(Q=se,ne=Q.child,Q.tag){case 0:case 11:case 14:case 15:Bl(4,Q,Q.return);break;case 1:po(Q,Q.return);var oe=Q.stateNode;if(typeof oe.componentWillUnmount=="function"){h=Q,a=Q.return;try{s=h,oe.props=s.memoizedProps,oe.state=s.memoizedState,oe.componentWillUnmount()}catch(le){ot(h,a,le)}}break;case 5:po(Q,Q.return);break;case 22:if(Q.memoizedState!==null){n_(Y);continue}}ne!==null?(ne.return=Q,se=ne):n_(Y)}K=K.sibling}e:for(K=null,Y=r;;){if(Y.tag===5){if(K===null){K=Y;try{f=Y.stateNode,j?(g=f.style,typeof g.setProperty=="function"?g.setProperty("display","none","important"):g.display="none"):(C=Y.stateNode,P=Y.memoizedProps.style,E=P!=null&&P.hasOwnProperty("display")?P.display:null,C.style.display=rl("display",E))}catch(le){ot(r,r.return,le)}}}else if(Y.tag===6){if(K===null)try{Y.stateNode.nodeValue=j?"":Y.memoizedProps}catch(le){ot(r,r.return,le)}}else if((Y.tag!==22&&Y.tag!==23||Y.memoizedState===null||Y===r)&&Y.child!==null){Y.child.return=Y,Y=Y.child;continue}if(Y===r)break e;for(;Y.sibling===null;){if(Y.return===null||Y.return===r)break e;K===Y&&(K=null),Y=Y.return}K===Y&&(K=null),Y.sibling.return=Y.return,Y=Y.sibling}}break;case 19:Kn(s,r),fr(r),h&4&&Jg(r);break;case 21:break;default:Kn(s,r),fr(r)}}function fr(r){var s=r.flags;if(s&2){try{e:{for(var a=r.return;a!==null;){if(Kg(a)){var h=a;break e}a=a.return}throw Error(t(160))}switch(h.tag){case 5:var f=h.stateNode;h.flags&32&&(Gr(f,""),h.flags&=-33);var g=Yg(r);Nd(r,g,f);break;case 3:case 4:var E=h.stateNode.containerInfo,C=Yg(r);kd(r,C,E);break;default:throw Error(t(161))}}catch(P){ot(r,r.return,P)}r.flags&=-3}s&4096&&(r.flags&=-4097)}function sT(r,s,a){se=r,e_(r)}function e_(r,s,a){for(var h=(r.mode&1)!==0;se!==null;){var f=se,g=f.child;if(f.tag===22&&h){var E=f.memoizedState!==null||Mu;if(!E){var C=f.alternate,P=C!==null&&C.memoizedState!==null||Ht;C=Mu;var j=Ht;if(Mu=E,(Ht=P)&&!j)for(se=f;se!==null;)E=se,P=E.child,E.tag===22&&E.memoizedState!==null?r_(f):P!==null?(P.return=E,se=P):r_(f);for(;g!==null;)se=g,e_(g),g=g.sibling;se=f,Mu=C,Ht=j}t_(r)}else f.subtreeFlags&8772&&g!==null?(g.return=f,se=g):t_(r)}}function t_(r){for(;se!==null;){var s=se;if(s.flags&8772){var a=s.alternate;try{if(s.flags&8772)switch(s.tag){case 0:case 11:case 15:Ht||Fu(5,s);break;case 1:var h=s.stateNode;if(s.flags&4&&!Ht)if(a===null)h.componentDidMount();else{var f=s.elementType===s.type?a.memoizedProps:Gn(s.type,a.memoizedProps);h.componentDidUpdate(f,a.memoizedState,h.__reactInternalSnapshotBeforeUpdate)}var g=s.updateQueue;g!==null&&ng(s,g,h);break;case 3:var E=s.updateQueue;if(E!==null){if(a=null,s.child!==null)switch(s.child.tag){case 5:a=s.child.stateNode;break;case 1:a=s.child.stateNode}ng(s,E,a)}break;case 5:var C=s.stateNode;if(a===null&&s.flags&4){a=C;var P=s.memoizedProps;switch(s.type){case"button":case"input":case"select":case"textarea":P.autoFocus&&a.focus();break;case"img":P.src&&(a.src=P.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(s.memoizedState===null){var j=s.alternate;if(j!==null){var K=j.memoizedState;if(K!==null){var Y=K.dehydrated;Y!==null&&qn(Y)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}Ht||s.flags&512&&Pd(s)}catch(Q){ot(s,s.return,Q)}}if(s===r){se=null;break}if(a=s.sibling,a!==null){a.return=s.return,se=a;break}se=s.return}}function n_(r){for(;se!==null;){var s=se;if(s===r){se=null;break}var a=s.sibling;if(a!==null){a.return=s.return,se=a;break}se=s.return}}function r_(r){for(;se!==null;){var s=se;try{switch(s.tag){case 0:case 11:case 15:var a=s.return;try{Fu(4,s)}catch(P){ot(s,a,P)}break;case 1:var h=s.stateNode;if(typeof h.componentDidMount=="function"){var f=s.return;try{h.componentDidMount()}catch(P){ot(s,f,P)}}var g=s.return;try{Pd(s)}catch(P){ot(s,g,P)}break;case 5:var E=s.return;try{Pd(s)}catch(P){ot(s,E,P)}}}catch(P){ot(s,s.return,P)}if(s===r){se=null;break}var C=s.sibling;if(C!==null){C.return=s.return,se=C;break}se=s.return}}var oT=Math.ceil,bu=we.ReactCurrentDispatcher,xd=we.ReactCurrentOwner,Ln=we.ReactCurrentBatchConfig,Fe=0,Pt=null,pt=null,Mt=0,Tn=0,mo=si(0),wt=0,zl=null,is=0,Uu=0,Dd=0,ql=null,an=null,Vd=0,go=1/0,Fr=null,ju=!1,Ld=null,hi=null,Bu=!1,di=null,zu=0,Wl=0,Od=null,qu=-1,Wu=0;function tn(){return Fe&6?Qe():qu!==-1?qu:qu=Qe()}function fi(r){return r.mode&1?Fe&2&&Mt!==0?Mt&-Mt:qw.transition!==null?(Wu===0&&(Wu=$i()),Wu):(r=Ne,r!==0||(r=window.event,r=r===void 0?16:yl(r.type)),r):1}function Yn(r,s,a,h){if(50<Wl)throw Wl=0,Od=null,Error(t(185));Xr(r,a,h),(!(Fe&2)||r!==Pt)&&(r===Pt&&(!(Fe&2)&&(Uu|=a),wt===4&&pi(r,Mt)),un(r,h),a===1&&Fe===0&&!(s.mode&1)&&(go=Qe()+500,yu&&li()))}function un(r,s){var a=r.callbackNode;Sr(r,s);var h=Hi(r,r===Pt?Mt:0);if(h===0)a!==null&&fl(a),r.callbackNode=null,r.callbackPriority=0;else if(s=h&-h,r.callbackPriority!==s){if(a!=null&&fl(a),s===1)r.tag===0?zw(s_.bind(null,r)):Wm(s_.bind(null,r)),bw(function(){!(Fe&6)&&li()}),a=null;else{switch(Zr(h)){case 1:a=qi;break;case 4:a=Qr;break;case 16:a=An;break;case 536870912:a=Wa;break;default:a=An}a=f_(a,i_.bind(null,r))}r.callbackPriority=s,r.callbackNode=a}}function i_(r,s){if(qu=-1,Wu=0,Fe&6)throw Error(t(327));var a=r.callbackNode;if(_o()&&r.callbackNode!==a)return null;var h=Hi(r,r===Pt?Mt:0);if(h===0)return null;if(h&30||h&r.expiredLanes||s)s=Hu(r,h);else{s=h;var f=Fe;Fe|=2;var g=l_();(Pt!==r||Mt!==s)&&(Fr=null,go=Qe()+500,os(r,s));do try{uT();break}catch(C){o_(r,C)}while(!0);Zh(),bu.current=g,Fe=f,pt!==null?s=0:(Pt=null,Mt=0,s=wt)}if(s!==0){if(s===2&&(f=_n(r),f!==0&&(h=f,s=Md(r,f))),s===1)throw a=zl,os(r,0),pi(r,h),un(r,Qe()),a;if(s===6)pi(r,h);else{if(f=r.current.alternate,!(h&30)&&!lT(f)&&(s=Hu(r,h),s===2&&(g=_n(r),g!==0&&(h=g,s=Md(r,g))),s===1))throw a=zl,os(r,0),pi(r,h),un(r,Qe()),a;switch(r.finishedWork=f,r.finishedLanes=h,s){case 0:case 1:throw Error(t(345));case 2:ls(r,an,Fr);break;case 3:if(pi(r,h),(h&130023424)===h&&(s=Vd+500-Qe(),10<s)){if(Hi(r,0)!==0)break;if(f=r.suspendedLanes,(f&h)!==h){tn(),r.pingedLanes|=r.suspendedLanes&f;break}r.timeoutHandle=zh(ls.bind(null,r,an,Fr),s);break}ls(r,an,Fr);break;case 4:if(pi(r,h),(h&4194240)===h)break;for(s=r.eventTimes,f=-1;0<h;){var E=31-Jt(h);g=1<<E,E=s[E],E>f&&(f=E),h&=~g}if(h=f,h=Qe()-h,h=(120>h?120:480>h?480:1080>h?1080:1920>h?1920:3e3>h?3e3:4320>h?4320:1960*oT(h/1960))-h,10<h){r.timeoutHandle=zh(ls.bind(null,r,an,Fr),h);break}ls(r,an,Fr);break;case 5:ls(r,an,Fr);break;default:throw Error(t(329))}}}return un(r,Qe()),r.callbackNode===a?i_.bind(null,r):null}function Md(r,s){var a=ql;return r.current.memoizedState.isDehydrated&&(os(r,s).flags|=256),r=Hu(r,s),r!==2&&(s=an,an=a,s!==null&&Fd(s)),r}function Fd(r){an===null?an=r:an.push.apply(an,r)}function lT(r){for(var s=r;;){if(s.flags&16384){var a=s.updateQueue;if(a!==null&&(a=a.stores,a!==null))for(var h=0;h<a.length;h++){var f=a[h],g=f.getSnapshot;f=f.value;try{if(!Hn(g(),f))return!1}catch{return!1}}}if(a=s.child,s.subtreeFlags&16384&&a!==null)a.return=s,s=a;else{if(s===r)break;for(;s.sibling===null;){if(s.return===null||s.return===r)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function pi(r,s){for(s&=~Dd,s&=~Uu,r.suspendedLanes|=s,r.pingedLanes&=~s,r=r.expirationTimes;0<s;){var a=31-Jt(s),h=1<<a;r[a]=-1,s&=~h}}function s_(r){if(Fe&6)throw Error(t(327));_o();var s=Hi(r,0);if(!(s&1))return un(r,Qe()),null;var a=Hu(r,s);if(r.tag!==0&&a===2){var h=_n(r);h!==0&&(s=h,a=Md(r,h))}if(a===1)throw a=zl,os(r,0),pi(r,s),un(r,Qe()),a;if(a===6)throw Error(t(345));return r.finishedWork=r.current.alternate,r.finishedLanes=s,ls(r,an,Fr),un(r,Qe()),null}function bd(r,s){var a=Fe;Fe|=1;try{return r(s)}finally{Fe=a,Fe===0&&(go=Qe()+500,yu&&li())}}function ss(r){di!==null&&di.tag===0&&!(Fe&6)&&_o();var s=Fe;Fe|=1;var a=Ln.transition,h=Ne;try{if(Ln.transition=null,Ne=1,r)return r()}finally{Ne=h,Ln.transition=a,Fe=s,!(Fe&6)&&li()}}function Ud(){Tn=mo.current,Ze(mo)}function os(r,s){r.finishedWork=null,r.finishedLanes=0;var a=r.timeoutHandle;if(a!==-1&&(r.timeoutHandle=-1,Fw(a)),pt!==null)for(a=pt.return;a!==null;){var h=a;switch(Qh(h),h.tag){case 1:h=h.type.childContextTypes,h!=null&&gu();break;case 3:ho(),Ze(sn),Ze(zt),ld();break;case 5:sd(h);break;case 4:ho();break;case 13:Ze(rt);break;case 19:Ze(rt);break;case 10:ed(h.type._context);break;case 22:case 23:Ud()}a=a.return}if(Pt=r,pt=r=mi(r.current,null),Mt=Tn=s,wt=0,zl=null,Dd=Uu=is=0,an=ql=null,ts!==null){for(s=0;s<ts.length;s++)if(a=ts[s],h=a.interleaved,h!==null){a.interleaved=null;var f=h.next,g=a.pending;if(g!==null){var E=g.next;g.next=f,h.next=E}a.pending=h}ts=null}return r}function o_(r,s){do{var a=pt;try{if(Zh(),Pu.current=Du,ku){for(var h=it.memoizedState;h!==null;){var f=h.queue;f!==null&&(f.pending=null),h=h.next}ku=!1}if(rs=0,At=Et=it=null,Ml=!1,Fl=0,xd.current=null,a===null||a.return===null){wt=1,zl=s,pt=null;break}e:{var g=r,E=a.return,C=a,P=s;if(s=Mt,C.flags|=32768,P!==null&&typeof P=="object"&&typeof P.then=="function"){var j=P,K=C,Y=K.tag;if(!(K.mode&1)&&(Y===0||Y===11||Y===15)){var Q=K.alternate;Q?(K.updateQueue=Q.updateQueue,K.memoizedState=Q.memoizedState,K.lanes=Q.lanes):(K.updateQueue=null,K.memoizedState=null)}var ne=xg(E);if(ne!==null){ne.flags&=-257,Dg(ne,E,C,g,s),ne.mode&1&&Ng(g,j,s),s=ne,P=j;var oe=s.updateQueue;if(oe===null){var le=new Set;le.add(P),s.updateQueue=le}else oe.add(P);break e}else{if(!(s&1)){Ng(g,j,s),jd();break e}P=Error(t(426))}}else if(nt&&C.mode&1){var ht=xg(E);if(ht!==null){!(ht.flags&65536)&&(ht.flags|=256),Dg(ht,E,C,g,s),Xh(fo(P,C));break e}}g=P=fo(P,C),wt!==4&&(wt=2),ql===null?ql=[g]:ql.push(g),g=E;do{switch(g.tag){case 3:g.flags|=65536,s&=-s,g.lanes|=s;var F=Pg(g,P,s);tg(g,F);break e;case 1:C=P;var k=g.type,b=g.stateNode;if(!(g.flags&128)&&(typeof k.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(hi===null||!hi.has(b)))){g.flags|=65536,s&=-s,g.lanes|=s;var X=kg(g,C,s);tg(g,X);break e}}g=g.return}while(g!==null)}u_(a)}catch(ue){s=ue,pt===a&&a!==null&&(pt=a=a.return);continue}break}while(!0)}function l_(){var r=bu.current;return bu.current=Du,r===null?Du:r}function jd(){(wt===0||wt===3||wt===2)&&(wt=4),Pt===null||!(is&268435455)&&!(Uu&268435455)||pi(Pt,Mt)}function Hu(r,s){var a=Fe;Fe|=2;var h=l_();(Pt!==r||Mt!==s)&&(Fr=null,os(r,s));do try{aT();break}catch(f){o_(r,f)}while(!0);if(Zh(),Fe=a,bu.current=h,pt!==null)throw Error(t(261));return Pt=null,Mt=0,wt}function aT(){for(;pt!==null;)a_(pt)}function uT(){for(;pt!==null&&!za();)a_(pt)}function a_(r){var s=d_(r.alternate,r,Tn);r.memoizedProps=r.pendingProps,s===null?u_(r):pt=s,xd.current=null}function u_(r){var s=r;do{var a=s.alternate;if(r=s.return,s.flags&32768){if(a=nT(a,s),a!==null){a.flags&=32767,pt=a;return}if(r!==null)r.flags|=32768,r.subtreeFlags=0,r.deletions=null;else{wt=6,pt=null;return}}else if(a=tT(a,s,Tn),a!==null){pt=a;return}if(s=s.sibling,s!==null){pt=s;return}pt=s=r}while(s!==null);wt===0&&(wt=5)}function ls(r,s,a){var h=Ne,f=Ln.transition;try{Ln.transition=null,Ne=1,cT(r,s,a,h)}finally{Ln.transition=f,Ne=h}return null}function cT(r,s,a,h){do _o();while(di!==null);if(Fe&6)throw Error(t(327));a=r.finishedWork;var f=r.finishedLanes;if(a===null)return null;if(r.finishedWork=null,r.finishedLanes=0,a===r.current)throw Error(t(177));r.callbackNode=null,r.callbackPriority=0;var g=a.lanes|a.childLanes;if(He(r,g),r===Pt&&(pt=Pt=null,Mt=0),!(a.subtreeFlags&2064)&&!(a.flags&2064)||Bu||(Bu=!0,f_(An,function(){return _o(),null})),g=(a.flags&15990)!==0,a.subtreeFlags&15990||g){g=Ln.transition,Ln.transition=null;var E=Ne;Ne=1;var C=Fe;Fe|=4,xd.current=null,iT(r,a),Zg(a,r),Nw(jh),ti=!!Uh,jh=Uh=null,r.current=a,sT(a),Ih(),Fe=C,Ne=E,Ln.transition=g}else r.current=a;if(Bu&&(Bu=!1,di=r,zu=f),g=r.pendingLanes,g===0&&(hi=null),Ha(a.stateNode),un(r,Qe()),s!==null)for(h=r.onRecoverableError,a=0;a<s.length;a++)f=s[a],h(f.value,{componentStack:f.stack,digest:f.digest});if(ju)throw ju=!1,r=Ld,Ld=null,r;return zu&1&&r.tag!==0&&_o(),g=r.pendingLanes,g&1?r===Od?Wl++:(Wl=0,Od=r):Wl=0,li(),null}function _o(){if(di!==null){var r=Zr(zu),s=Ln.transition,a=Ne;try{if(Ln.transition=null,Ne=16>r?16:r,di===null)var h=!1;else{if(r=di,di=null,zu=0,Fe&6)throw Error(t(331));var f=Fe;for(Fe|=4,se=r.current;se!==null;){var g=se,E=g.child;if(se.flags&16){var C=g.deletions;if(C!==null){for(var P=0;P<C.length;P++){var j=C[P];for(se=j;se!==null;){var K=se;switch(K.tag){case 0:case 11:case 15:Bl(8,K,g)}var Y=K.child;if(Y!==null)Y.return=K,se=Y;else for(;se!==null;){K=se;var Q=K.sibling,ne=K.return;if(Qg(K),K===j){se=null;break}if(Q!==null){Q.return=ne,se=Q;break}se=ne}}}var oe=g.alternate;if(oe!==null){var le=oe.child;if(le!==null){oe.child=null;do{var ht=le.sibling;le.sibling=null,le=ht}while(le!==null)}}se=g}}if(g.subtreeFlags&2064&&E!==null)E.return=g,se=E;else e:for(;se!==null;){if(g=se,g.flags&2048)switch(g.tag){case 0:case 11:case 15:Bl(9,g,g.return)}var F=g.sibling;if(F!==null){F.return=g.return,se=F;break e}se=g.return}}var k=r.current;for(se=k;se!==null;){E=se;var b=E.child;if(E.subtreeFlags&2064&&b!==null)b.return=E,se=b;else e:for(E=k;se!==null;){if(C=se,C.flags&2048)try{switch(C.tag){case 0:case 11:case 15:Fu(9,C)}}catch(ue){ot(C,C.return,ue)}if(C===E){se=null;break e}var X=C.sibling;if(X!==null){X.return=C.return,se=X;break e}se=C.return}}if(Fe=f,li(),gn&&typeof gn.onPostCommitFiberRoot=="function")try{gn.onPostCommitFiberRoot(Wi,r)}catch{}h=!0}return h}finally{Ne=a,Ln.transition=s}}return!1}function c_(r,s,a){s=fo(a,s),s=Pg(r,s,1),r=ui(r,s,1),s=tn(),r!==null&&(Xr(r,1,s),un(r,s))}function ot(r,s,a){if(r.tag===3)c_(r,r,a);else for(;s!==null;){if(s.tag===3){c_(s,r,a);break}else if(s.tag===1){var h=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof h.componentDidCatch=="function"&&(hi===null||!hi.has(h))){r=fo(a,r),r=kg(s,r,1),s=ui(s,r,1),r=tn(),s!==null&&(Xr(s,1,r),un(s,r));break}}s=s.return}}function hT(r,s,a){var h=r.pingCache;h!==null&&h.delete(s),s=tn(),r.pingedLanes|=r.suspendedLanes&a,Pt===r&&(Mt&a)===a&&(wt===4||wt===3&&(Mt&130023424)===Mt&&500>Qe()-Vd?os(r,0):Dd|=a),un(r,s)}function h_(r,s){s===0&&(r.mode&1?(s=Us,Us<<=1,!(Us&130023424)&&(Us=4194304)):s=1);var a=tn();r=Lr(r,s),r!==null&&(Xr(r,s,a),un(r,a))}function dT(r){var s=r.memoizedState,a=0;s!==null&&(a=s.retryLane),h_(r,a)}function fT(r,s){var a=0;switch(r.tag){case 13:var h=r.stateNode,f=r.memoizedState;f!==null&&(a=f.retryLane);break;case 19:h=r.stateNode;break;default:throw Error(t(314))}h!==null&&h.delete(s),h_(r,a)}var d_;d_=function(r,s,a){if(r!==null)if(r.memoizedProps!==s.pendingProps||sn.current)ln=!0;else{if(!(r.lanes&a)&&!(s.flags&128))return ln=!1,eT(r,s,a);ln=!!(r.flags&131072)}else ln=!1,nt&&s.flags&1048576&&Hm(s,Eu,s.index);switch(s.lanes=0,s.tag){case 2:var h=s.type;Ou(r,s),r=s.pendingProps;var f=io(s,zt.current);co(s,a),f=cd(null,s,h,r,f,a);var g=hd();return s.flags|=1,typeof f=="object"&&f!==null&&typeof f.render=="function"&&f.$$typeof===void 0?(s.tag=1,s.memoizedState=null,s.updateQueue=null,on(h)?(g=!0,_u(s)):g=!1,s.memoizedState=f.state!==null&&f.state!==void 0?f.state:null,rd(s),f.updater=Vu,s.stateNode=f,f._reactInternals=s,_d(s,h,r,a),s=wd(null,s,h,!0,g,a)):(s.tag=0,nt&&g&&Gh(s),en(null,s,f,a),s=s.child),s;case 16:h=s.elementType;e:{switch(Ou(r,s),r=s.pendingProps,f=h._init,h=f(h._payload),s.type=h,f=s.tag=mT(h),r=Gn(h,r),f){case 0:s=Ed(null,s,h,r,a);break e;case 1:s=bg(null,s,h,r,a);break e;case 11:s=Vg(null,s,h,r,a);break e;case 14:s=Lg(null,s,h,Gn(h.type,r),a);break e}throw Error(t(306,h,""))}return s;case 0:return h=s.type,f=s.pendingProps,f=s.elementType===h?f:Gn(h,f),Ed(r,s,h,f,a);case 1:return h=s.type,f=s.pendingProps,f=s.elementType===h?f:Gn(h,f),bg(r,s,h,f,a);case 3:e:{if(Ug(s),r===null)throw Error(t(387));h=s.pendingProps,g=s.memoizedState,f=g.element,eg(r,s),Ru(s,h,null,a);var E=s.memoizedState;if(h=E.element,g.isDehydrated)if(g={element:h,isDehydrated:!1,cache:E.cache,pendingSuspenseBoundaries:E.pendingSuspenseBoundaries,transitions:E.transitions},s.updateQueue.baseState=g,s.memoizedState=g,s.flags&256){f=fo(Error(t(423)),s),s=jg(r,s,h,a,f);break e}else if(h!==f){f=fo(Error(t(424)),s),s=jg(r,s,h,a,f);break e}else for(wn=ii(s.stateNode.containerInfo.firstChild),En=s,nt=!0,$n=null,a=Jm(s,null,h,a),s.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(lo(),h===f){s=Mr(r,s,a);break e}en(r,s,h,a)}s=s.child}return s;case 5:return rg(s),r===null&&Yh(s),h=s.type,f=s.pendingProps,g=r!==null?r.memoizedProps:null,E=f.children,Bh(h,f)?E=null:g!==null&&Bh(h,g)&&(s.flags|=32),Fg(r,s),en(r,s,E,a),s.child;case 6:return r===null&&Yh(s),null;case 13:return Bg(r,s,a);case 4:return id(s,s.stateNode.containerInfo),h=s.pendingProps,r===null?s.child=ao(s,null,h,a):en(r,s,h,a),s.child;case 11:return h=s.type,f=s.pendingProps,f=s.elementType===h?f:Gn(h,f),Vg(r,s,h,f,a);case 7:return en(r,s,s.pendingProps,a),s.child;case 8:return en(r,s,s.pendingProps.children,a),s.child;case 12:return en(r,s,s.pendingProps.children,a),s.child;case 10:e:{if(h=s.type._context,f=s.pendingProps,g=s.memoizedProps,E=f.value,Ke(Iu,h._currentValue),h._currentValue=E,g!==null)if(Hn(g.value,E)){if(g.children===f.children&&!sn.current){s=Mr(r,s,a);break e}}else for(g=s.child,g!==null&&(g.return=s);g!==null;){var C=g.dependencies;if(C!==null){E=g.child;for(var P=C.firstContext;P!==null;){if(P.context===h){if(g.tag===1){P=Or(-1,a&-a),P.tag=2;var j=g.updateQueue;if(j!==null){j=j.shared;var K=j.pending;K===null?P.next=P:(P.next=K.next,K.next=P),j.pending=P}}g.lanes|=a,P=g.alternate,P!==null&&(P.lanes|=a),td(g.return,a,s),C.lanes|=a;break}P=P.next}}else if(g.tag===10)E=g.type===s.type?null:g.child;else if(g.tag===18){if(E=g.return,E===null)throw Error(t(341));E.lanes|=a,C=E.alternate,C!==null&&(C.lanes|=a),td(E,a,s),E=g.sibling}else E=g.child;if(E!==null)E.return=g;else for(E=g;E!==null;){if(E===s){E=null;break}if(g=E.sibling,g!==null){g.return=E.return,E=g;break}E=E.return}g=E}en(r,s,f.children,a),s=s.child}return s;case 9:return f=s.type,h=s.pendingProps.children,co(s,a),f=Dn(f),h=h(f),s.flags|=1,en(r,s,h,a),s.child;case 14:return h=s.type,f=Gn(h,s.pendingProps),f=Gn(h.type,f),Lg(r,s,h,f,a);case 15:return Og(r,s,s.type,s.pendingProps,a);case 17:return h=s.type,f=s.pendingProps,f=s.elementType===h?f:Gn(h,f),Ou(r,s),s.tag=1,on(h)?(r=!0,_u(s)):r=!1,co(s,a),Rg(s,h,f),_d(s,h,f,a),wd(null,s,h,!0,r,a);case 19:return qg(r,s,a);case 22:return Mg(r,s,a)}throw Error(t(156,s.tag))};function f_(r,s){return Fs(r,s)}function pT(r,s,a,h){this.tag=r,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=h,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function On(r,s,a,h){return new pT(r,s,a,h)}function Bd(r){return r=r.prototype,!(!r||!r.isReactComponent)}function mT(r){if(typeof r=="function")return Bd(r)?1:0;if(r!=null){if(r=r.$$typeof,r===O)return 11;if(r===jt)return 14}return 2}function mi(r,s){var a=r.alternate;return a===null?(a=On(r.tag,s,r.key,r.mode),a.elementType=r.elementType,a.type=r.type,a.stateNode=r.stateNode,a.alternate=r,r.alternate=a):(a.pendingProps=s,a.type=r.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=r.flags&14680064,a.childLanes=r.childLanes,a.lanes=r.lanes,a.child=r.child,a.memoizedProps=r.memoizedProps,a.memoizedState=r.memoizedState,a.updateQueue=r.updateQueue,s=r.dependencies,a.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},a.sibling=r.sibling,a.index=r.index,a.ref=r.ref,a}function $u(r,s,a,h,f,g){var E=2;if(h=r,typeof r=="function")Bd(r)&&(E=1);else if(typeof r=="string")E=5;else e:switch(r){case D:return as(a.children,f,g,s);case S:E=8,f|=8;break;case A:return r=On(12,a,s,f|2),r.elementType=A,r.lanes=g,r;case R:return r=On(13,a,s,f),r.elementType=R,r.lanes=g,r;case ut:return r=On(19,a,s,f),r.elementType=ut,r.lanes=g,r;case We:return Gu(a,f,g,s);default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case N:E=10;break e;case V:E=9;break e;case O:E=11;break e;case jt:E=14;break e;case Bt:E=16,h=null;break e}throw Error(t(130,r==null?r:typeof r,""))}return s=On(E,a,s,f),s.elementType=r,s.type=h,s.lanes=g,s}function as(r,s,a,h){return r=On(7,r,h,s),r.lanes=a,r}function Gu(r,s,a,h){return r=On(22,r,h,s),r.elementType=We,r.lanes=a,r.stateNode={isHidden:!1},r}function zd(r,s,a){return r=On(6,r,null,s),r.lanes=a,r}function qd(r,s,a){return s=On(4,r.children!==null?r.children:[],r.key,s),s.lanes=a,s.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},s}function gT(r,s,a,h,f){this.tag=s,this.containerInfo=r,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Yr(0),this.expirationTimes=Yr(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Yr(0),this.identifierPrefix=h,this.onRecoverableError=f,this.mutableSourceEagerHydrationData=null}function Wd(r,s,a,h,f,g,E,C,P){return r=new gT(r,s,a,C,P),s===1?(s=1,g===!0&&(s|=8)):s=0,g=On(3,null,null,s),r.current=g,g.stateNode=r,g.memoizedState={element:h,isDehydrated:a,cache:null,transitions:null,pendingSuspenseBoundaries:null},rd(g),r}function _T(r,s,a){var h=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Me,key:h==null?null:""+h,children:r,containerInfo:s,implementation:a}}function p_(r){if(!r)return oi;r=r._reactInternals;e:{if(bn(r)!==r||r.tag!==1)throw Error(t(170));var s=r;do{switch(s.tag){case 3:s=s.stateNode.context;break e;case 1:if(on(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break e}}s=s.return}while(s!==null);throw Error(t(171))}if(r.tag===1){var a=r.type;if(on(a))return zm(r,a,s)}return s}function m_(r,s,a,h,f,g,E,C,P){return r=Wd(a,h,!0,r,f,g,E,C,P),r.context=p_(null),a=r.current,h=tn(),f=fi(a),g=Or(h,f),g.callback=s??null,ui(a,g,f),r.current.lanes=f,Xr(r,f,h),un(r,h),r}function Qu(r,s,a,h){var f=s.current,g=tn(),E=fi(f);return a=p_(a),s.context===null?s.context=a:s.pendingContext=a,s=Or(g,E),s.payload={element:r},h=h===void 0?null:h,h!==null&&(s.callback=h),r=ui(f,s,E),r!==null&&(Yn(r,f,E,g),Su(r,f,E)),E}function Ku(r){if(r=r.current,!r.child)return null;switch(r.child.tag){case 5:return r.child.stateNode;default:return r.child.stateNode}}function g_(r,s){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var a=r.retryLane;r.retryLane=a!==0&&a<s?a:s}}function Hd(r,s){g_(r,s),(r=r.alternate)&&g_(r,s)}function yT(){return null}var __=typeof reportError=="function"?reportError:function(r){console.error(r)};function $d(r){this._internalRoot=r}Yu.prototype.render=$d.prototype.render=function(r){var s=this._internalRoot;if(s===null)throw Error(t(409));Qu(r,s,null,null)},Yu.prototype.unmount=$d.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var s=r.containerInfo;ss(function(){Qu(null,r,null,null)}),s[Nr]=null}};function Yu(r){this._internalRoot=r}Yu.prototype.unstable_scheduleHydration=function(r){if(r){var s=Ya();r={blockedOn:null,target:r,priority:s};for(var a=0;a<or.length&&s!==0&&s<or[a].priority;a++);or.splice(a,0,r),a===0&&Za(r)}};function Gd(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function Xu(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11&&(r.nodeType!==8||r.nodeValue!==" react-mount-point-unstable "))}function y_(){}function vT(r,s,a,h,f){if(f){if(typeof h=="function"){var g=h;h=function(){var j=Ku(E);g.call(j)}}var E=m_(s,h,r,0,null,!1,!1,"",y_);return r._reactRootContainer=E,r[Nr]=E.current,Pl(r.nodeType===8?r.parentNode:r),ss(),E}for(;f=r.lastChild;)r.removeChild(f);if(typeof h=="function"){var C=h;h=function(){var j=Ku(P);C.call(j)}}var P=Wd(r,0,!1,null,null,!1,!1,"",y_);return r._reactRootContainer=P,r[Nr]=P.current,Pl(r.nodeType===8?r.parentNode:r),ss(function(){Qu(s,P,a,h)}),P}function Ju(r,s,a,h,f){var g=a._reactRootContainer;if(g){var E=g;if(typeof f=="function"){var C=f;f=function(){var P=Ku(E);C.call(P)}}Qu(s,E,r,f)}else E=vT(a,s,r,f,h);return Ku(E)}Qa=function(r){switch(r.tag){case 3:var s=r.stateNode;if(s.current.memoizedState.isDehydrated){var a=Kr(s.pendingLanes);a!==0&&(Jr(s,a|1),un(s,Qe()),!(Fe&6)&&(go=Qe()+500,li()))}break;case 13:ss(function(){var h=Lr(r,1);if(h!==null){var f=tn();Yn(h,r,1,f)}}),Hd(r,1)}},js=function(r){if(r.tag===13){var s=Lr(r,134217728);if(s!==null){var a=tn();Yn(s,r,134217728,a)}Hd(r,134217728)}},Ka=function(r){if(r.tag===13){var s=fi(r),a=Lr(r,s);if(a!==null){var h=tn();Yn(a,r,s,h)}Hd(r,s)}},Ya=function(){return Ne},Xa=function(r,s){var a=Ne;try{return Ne=r,s()}finally{Ne=a}},xs=function(r,s,a){switch(s){case"input":if(Zo(r,a),s=a.name,a.type==="radio"&&s!=null){for(a=r;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll("input[name="+JSON.stringify(""+s)+'][type="radio"]'),s=0;s<a.length;s++){var h=a[s];if(h!==r&&h.form===r.form){var f=mu(h);if(!f)throw Error(t(90));Ss(h),Zo(h,f)}}}break;case"textarea":ks(r,a);break;case"select":s=a.value,s!=null&&Tr(r,!!a.multiple,s,!1)}},Ui=bd,ul=ss;var ET={usingClientEntryPoint:!1,Events:[xl,no,mu,ir,al,bd]},Hl={findFiberByHostInstance:Xi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},wT={bundleType:Hl.bundleType,version:Hl.version,rendererPackageName:Hl.rendererPackageName,rendererConfig:Hl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:we.ReactCurrentDispatcher,findHostInstanceByFiber:function(r){return r=dl(r),r===null?null:r.stateNode},findFiberByHostInstance:Hl.findFiberByHostInstance||yT,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Zu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Zu.isDisabled&&Zu.supportsFiber)try{Wi=Zu.inject(wT),gn=Zu}catch{}}return cn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ET,cn.createPortal=function(r,s){var a=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Gd(s))throw Error(t(200));return _T(r,s,null,a)},cn.createRoot=function(r,s){if(!Gd(r))throw Error(t(299));var a=!1,h="",f=__;return s!=null&&(s.unstable_strictMode===!0&&(a=!0),s.identifierPrefix!==void 0&&(h=s.identifierPrefix),s.onRecoverableError!==void 0&&(f=s.onRecoverableError)),s=Wd(r,1,!1,null,null,a,!1,h,f),r[Nr]=s.current,Pl(r.nodeType===8?r.parentNode:r),new $d(s)},cn.findDOMNode=function(r){if(r==null)return null;if(r.nodeType===1)return r;var s=r._reactInternals;if(s===void 0)throw typeof r.render=="function"?Error(t(188)):(r=Object.keys(r).join(","),Error(t(268,r)));return r=dl(s),r=r===null?null:r.stateNode,r},cn.flushSync=function(r){return ss(r)},cn.hydrate=function(r,s,a){if(!Xu(s))throw Error(t(200));return Ju(null,r,s,!0,a)},cn.hydrateRoot=function(r,s,a){if(!Gd(r))throw Error(t(405));var h=a!=null&&a.hydratedSources||null,f=!1,g="",E=__;if(a!=null&&(a.unstable_strictMode===!0&&(f=!0),a.identifierPrefix!==void 0&&(g=a.identifierPrefix),a.onRecoverableError!==void 0&&(E=a.onRecoverableError)),s=m_(s,null,r,1,a??null,f,!1,g,E),r[Nr]=s.current,Pl(r),h)for(r=0;r<h.length;r++)a=h[r],f=a._getVersion,f=f(a._source),s.mutableSourceEagerHydrationData==null?s.mutableSourceEagerHydrationData=[a,f]:s.mutableSourceEagerHydrationData.push(a,f);return new Yu(s)},cn.render=function(r,s,a){if(!Xu(s))throw Error(t(200));return Ju(null,r,s,!1,a)},cn.unmountComponentAtNode=function(r){if(!Xu(r))throw Error(t(40));return r._reactRootContainer?(ss(function(){Ju(null,null,r,!1,function(){r._reactRootContainer=null,r[Nr]=null})}),!0):!1},cn.unstable_batchedUpdates=bd,cn.unstable_renderSubtreeIntoContainer=function(r,s,a,h){if(!Xu(a))throw Error(t(200));if(r==null||r._reactInternals===void 0)throw Error(t(38));return Ju(r,s,a,!1,h)},cn.version="18.3.1-next-f1338f8080-20240426",cn}var R_;function kT(){if(R_)return Yd.exports;R_=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Yd.exports=PT(),Yd.exports}var A_;function NT(){if(A_)return ec;A_=1;var n=kT();return ec.createRoot=n.createRoot,ec.hydrateRoot=n.hydrateRoot,ec}var xT=NT(),P_={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mv={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J=function(n,e){if(!n)throw Wo(e)},Wo=function(n){return new Error("Firebase Database ("+mv.SDK_VERSION+") INTERNAL ASSERT FAILED: "+n)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gv=function(n){const e=[];let t=0;for(let i=0;i<n.length;i++){let o=n.charCodeAt(i);o<128?e[t++]=o:o<2048?(e[t++]=o>>6|192,e[t++]=o&63|128):(o&64512)===55296&&i+1<n.length&&(n.charCodeAt(i+1)&64512)===56320?(o=65536+((o&1023)<<10)+(n.charCodeAt(++i)&1023),e[t++]=o>>18|240,e[t++]=o>>12&63|128,e[t++]=o>>6&63|128,e[t++]=o&63|128):(e[t++]=o>>12|224,e[t++]=o>>6&63|128,e[t++]=o&63|128)}return e},DT=function(n){const e=[];let t=0,i=0;for(;t<n.length;){const o=n[t++];if(o<128)e[i++]=String.fromCharCode(o);else if(o>191&&o<224){const l=n[t++];e[i++]=String.fromCharCode((o&31)<<6|l&63)}else if(o>239&&o<365){const l=n[t++],c=n[t++],d=n[t++],p=((o&7)<<18|(l&63)<<12|(c&63)<<6|d&63)-65536;e[i++]=String.fromCharCode(55296+(p>>10)),e[i++]=String.fromCharCode(56320+(p&1023))}else{const l=n[t++],c=n[t++];e[i++]=String.fromCharCode((o&15)<<12|(l&63)<<6|c&63)}}return e.join("")},Jf={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let o=0;o<n.length;o+=3){const l=n[o],c=o+1<n.length,d=c?n[o+1]:0,p=o+2<n.length,_=p?n[o+2]:0,v=l>>2,w=(l&3)<<4|d>>4;let I=(d&15)<<2|_>>6,x=_&63;p||(x=64,c||(I=64)),i.push(t[v],t[w],t[I],t[x])}return i.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(gv(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):DT(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let o=0;o<n.length;){const l=t[n.charAt(o++)],d=o<n.length?t[n.charAt(o)]:0;++o;const _=o<n.length?t[n.charAt(o)]:64;++o;const w=o<n.length?t[n.charAt(o)]:64;if(++o,l==null||d==null||_==null||w==null)throw new VT;const I=l<<2|d>>4;if(i.push(I),_!==64){const x=d<<4&240|_>>2;if(i.push(x),w!==64){const U=_<<6&192|w;i.push(U)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class VT extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const _v=function(n){const e=gv(n);return Jf.encodeByteArray(e,!0)},wc=function(n){return _v(n).replace(/\./g,"")},_f=function(n){try{return Jf.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LT(n){return yv(void 0,n)}function yv(n,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const t=e;return new Date(t.getTime());case Object:n===void 0&&(n={});break;case Array:n=[];break;default:return e}for(const t in e)!e.hasOwnProperty(t)||!OT(t)||(n[t]=yv(n[t],e[t]));return n}function OT(n){return n!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MT(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FT=()=>MT().__FIREBASE_DEFAULTS__,bT=()=>{if(typeof process>"u"||typeof P_>"u")return;const n=P_.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},UT=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&_f(n[1]);return e&&JSON.parse(e)},Zf=()=>{try{return FT()||bT()||UT()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},jT=n=>{var e,t;return(t=(e=Zf())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},vv=n=>{const e=jT(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),i]:[e.substring(0,t),i]},Ev=()=>{var n;return(n=Zf())===null||n===void 0?void 0:n.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ep{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,i))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wv(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},i=e||"demo-project",o=n.iat||0,l=n.sub||n.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:o,exp:o+3600,auth_time:o,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}}},n);return[wc(JSON.stringify(t)),wc(JSON.stringify(c)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tv(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Iv(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Tv())}function BT(){var n;const e=(n=Zf())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function zT(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Cv(){return mv.NODE_ADMIN===!0}function qT(){return!BT()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function WT(){try{return typeof indexedDB=="object"}catch{return!1}}function HT(){return new Promise((n,e)=>{try{let t=!0;const i="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(i);o.onsuccess=()=>{o.result.close(),t||self.indexedDB.deleteDatabase(i),n(!0)},o.onupgradeneeded=()=>{t=!1},o.onerror=()=>{var l;e(((l=o.error)===null||l===void 0?void 0:l.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $T="FirebaseError";class Ho extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name=$T,Object.setPrototypeOf(this,Ho.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Sv.prototype.create)}}class Sv{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){const i=t[0]||{},o=`${this.service}/${e}`,l=this.errors[e],c=l?GT(l,i):"Error",d=`${this.serviceName}: ${c} (${o}).`;return new Ho(o,d,i)}}function GT(n,e){return n.replace(QT,(t,i)=>{const o=e[i];return o!=null?String(o):`<${i}?>`})}const QT=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ha(n){return JSON.parse(n)}function Dt(n){return JSON.stringify(n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rv=function(n){let e={},t={},i={},o="";try{const l=n.split(".");e=ha(_f(l[0])||""),t=ha(_f(l[1])||""),o=l[2],i=t.d||{},delete t.d}catch{}return{header:e,claims:t,data:i,signature:o}},KT=function(n){const e=Rv(n),t=e.claims;return!!t&&typeof t=="object"&&t.hasOwnProperty("iat")},YT=function(n){const e=Rv(n).claims;return typeof e=="object"&&e.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hr(n,e){return Object.prototype.hasOwnProperty.call(n,e)}function xo(n,e){if(Object.prototype.hasOwnProperty.call(n,e))return n[e]}function k_(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Tc(n,e,t){const i={};for(const o in n)Object.prototype.hasOwnProperty.call(n,o)&&(i[o]=e.call(t,n[o],o,n));return i}function yf(n,e){if(n===e)return!0;const t=Object.keys(n),i=Object.keys(e);for(const o of t){if(!i.includes(o))return!1;const l=n[o],c=e[o];if(N_(l)&&N_(c)){if(!yf(l,c))return!1}else if(l!==c)return!1}for(const o of i)if(!t.includes(o))return!1;return!0}function N_(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XT(n){const e=[];for(const[t,i]of Object.entries(n))Array.isArray(i)?i.forEach(o=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JT{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,t){t||(t=0);const i=this.W_;if(typeof e=="string")for(let w=0;w<16;w++)i[w]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(let w=0;w<16;w++)i[w]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(let w=16;w<80;w++){const I=i[w-3]^i[w-8]^i[w-14]^i[w-16];i[w]=(I<<1|I>>>31)&4294967295}let o=this.chain_[0],l=this.chain_[1],c=this.chain_[2],d=this.chain_[3],p=this.chain_[4],_,v;for(let w=0;w<80;w++){w<40?w<20?(_=d^l&(c^d),v=1518500249):(_=l^c^d,v=1859775393):w<60?(_=l&c|d&(l|c),v=2400959708):(_=l^c^d,v=3395469782);const I=(o<<5|o>>>27)+_+p+v+i[w]&4294967295;p=d,d=c,c=(l<<30|l>>>2)&4294967295,l=o,o=I}this.chain_[0]=this.chain_[0]+o&4294967295,this.chain_[1]=this.chain_[1]+l&4294967295,this.chain_[2]=this.chain_[2]+c&4294967295,this.chain_[3]=this.chain_[3]+d&4294967295,this.chain_[4]=this.chain_[4]+p&4294967295}update(e,t){if(e==null)return;t===void 0&&(t=e.length);const i=t-this.blockSize;let o=0;const l=this.buf_;let c=this.inbuf_;for(;o<t;){if(c===0)for(;o<=i;)this.compress_(e,o),o+=this.blockSize;if(typeof e=="string"){for(;o<t;)if(l[c]=e.charCodeAt(o),++c,++o,c===this.blockSize){this.compress_(l),c=0;break}}else for(;o<t;)if(l[c]=e[o],++c,++o,c===this.blockSize){this.compress_(l),c=0;break}}this.inbuf_=c,this.total_+=t}digest(){const e=[];let t=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let o=this.blockSize-1;o>=56;o--)this.buf_[o]=t&255,t/=256;this.compress_(this.buf_);let i=0;for(let o=0;o<5;o++)for(let l=24;l>=0;l-=8)e[i]=this.chain_[o]>>l&255,++i;return e}}function Av(n,e){return`${n} failed: ${e} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZT=function(n){const e=[];let t=0;for(let i=0;i<n.length;i++){let o=n.charCodeAt(i);if(o>=55296&&o<=56319){const l=o-55296;i++,J(i<n.length,"Surrogate pair missing trail surrogate.");const c=n.charCodeAt(i)-56320;o=65536+(l<<10)+c}o<128?e[t++]=o:o<2048?(e[t++]=o>>6|192,e[t++]=o&63|128):o<65536?(e[t++]=o>>12|224,e[t++]=o>>6&63|128,e[t++]=o&63|128):(e[t++]=o>>18|240,e[t++]=o>>12&63|128,e[t++]=o>>6&63|128,e[t++]=o&63|128)}return e},Gc=function(n){let e=0;for(let t=0;t<n.length;t++){const i=n.charCodeAt(t);i<128?e++:i<2048?e+=2:i>=55296&&i<=56319?(e+=4,t++):e+=3}return e};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pn(n){return n&&n._delegate?n._delegate:n}class Do{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const us="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e1{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const i=new ep;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:t});o&&i.resolve(o)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const i=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),o=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(l){if(o)return null;throw l}else{if(o)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(n1(e))try{this.getOrInitializeService({instanceIdentifier:us})}catch{}for(const[t,i]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:o});i.resolve(l)}catch{}}}}clearInstance(e=us){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=us){return this.instances.has(e)}getOptions(e=us){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:i,options:t});for(const[l,c]of this.instancesDeferred.entries()){const d=this.normalizeInstanceIdentifier(l);i===d&&c.resolve(o)}return o}onInit(e,t){var i;const o=this.normalizeInstanceIdentifier(t),l=(i=this.onInitCallbacks.get(o))!==null&&i!==void 0?i:new Set;l.add(e),this.onInitCallbacks.set(o,l);const c=this.instances.get(o);return c&&e(c,o),()=>{l.delete(e)}}invokeOnInitCallbacks(e,t){const i=this.onInitCallbacks.get(t);if(i)for(const o of i)try{o(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:t1(e),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=us){return this.component?this.component.multipleInstances?e:us:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function t1(n){return n===us?void 0:n}function n1(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r1{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new e1(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var xe;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(xe||(xe={}));const i1={debug:xe.DEBUG,verbose:xe.VERBOSE,info:xe.INFO,warn:xe.WARN,error:xe.ERROR,silent:xe.SILENT},s1=xe.INFO,o1={[xe.DEBUG]:"log",[xe.VERBOSE]:"log",[xe.INFO]:"info",[xe.WARN]:"warn",[xe.ERROR]:"error"},l1=(n,e,...t)=>{if(e<n.logLevel)return;const i=new Date().toISOString(),o=o1[e];if(o)console[o](`[${i}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class tp{constructor(e){this.name=e,this._logLevel=s1,this._logHandler=l1,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in xe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?i1[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,xe.DEBUG,...e),this._logHandler(this,xe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,xe.VERBOSE,...e),this._logHandler(this,xe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,xe.INFO,...e),this._logHandler(this,xe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,xe.WARN,...e),this._logHandler(this,xe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,xe.ERROR,...e),this._logHandler(this,xe.ERROR,...e)}}const a1=(n,e)=>e.some(t=>n instanceof t);let x_,D_;function u1(){return x_||(x_=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function c1(){return D_||(D_=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Pv=new WeakMap,vf=new WeakMap,kv=new WeakMap,Zd=new WeakMap,np=new WeakMap;function h1(n){const e=new Promise((t,i)=>{const o=()=>{n.removeEventListener("success",l),n.removeEventListener("error",c)},l=()=>{t(vi(n.result)),o()},c=()=>{i(n.error),o()};n.addEventListener("success",l),n.addEventListener("error",c)});return e.then(t=>{t instanceof IDBCursor&&Pv.set(t,n)}).catch(()=>{}),np.set(e,n),e}function d1(n){if(vf.has(n))return;const e=new Promise((t,i)=>{const o=()=>{n.removeEventListener("complete",l),n.removeEventListener("error",c),n.removeEventListener("abort",c)},l=()=>{t(),o()},c=()=>{i(n.error||new DOMException("AbortError","AbortError")),o()};n.addEventListener("complete",l),n.addEventListener("error",c),n.addEventListener("abort",c)});vf.set(n,e)}let Ef={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return vf.get(n);if(e==="objectStoreNames")return n.objectStoreNames||kv.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return vi(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function f1(n){Ef=n(Ef)}function p1(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const i=n.call(ef(this),e,...t);return kv.set(i,e.sort?e.sort():[e]),vi(i)}:c1().includes(n)?function(...e){return n.apply(ef(this),e),vi(Pv.get(this))}:function(...e){return vi(n.apply(ef(this),e))}}function m1(n){return typeof n=="function"?p1(n):(n instanceof IDBTransaction&&d1(n),a1(n,u1())?new Proxy(n,Ef):n)}function vi(n){if(n instanceof IDBRequest)return h1(n);if(Zd.has(n))return Zd.get(n);const e=m1(n);return e!==n&&(Zd.set(n,e),np.set(e,n)),e}const ef=n=>np.get(n);function g1(n,e,{blocked:t,upgrade:i,blocking:o,terminated:l}={}){const c=indexedDB.open(n,e),d=vi(c);return i&&c.addEventListener("upgradeneeded",p=>{i(vi(c.result),p.oldVersion,p.newVersion,vi(c.transaction),p)}),t&&c.addEventListener("blocked",p=>t(p.oldVersion,p.newVersion,p)),d.then(p=>{l&&p.addEventListener("close",()=>l()),o&&p.addEventListener("versionchange",_=>o(_.oldVersion,_.newVersion,_))}).catch(()=>{}),d}const _1=["get","getKey","getAll","getAllKeys","count"],y1=["put","add","delete","clear"],tf=new Map;function V_(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(tf.get(e))return tf.get(e);const t=e.replace(/FromIndex$/,""),i=e!==t,o=y1.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!(o||_1.includes(t)))return;const l=async function(c,...d){const p=this.transaction(c,o?"readwrite":"readonly");let _=p.store;return i&&(_=_.index(d.shift())),(await Promise.all([_[t](...d),o&&p.done]))[0]};return tf.set(e,l),l}f1(n=>({...n,get:(e,t,i)=>V_(e,t)||n.get(e,t,i),has:(e,t)=>!!V_(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v1{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(E1(t)){const i=t.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(t=>t).join(" ")}}function E1(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const wf="@firebase/app",L_="0.10.17";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Br=new tp("@firebase/app"),w1="@firebase/app-compat",T1="@firebase/analytics-compat",I1="@firebase/analytics",C1="@firebase/app-check-compat",S1="@firebase/app-check",R1="@firebase/auth",A1="@firebase/auth-compat",P1="@firebase/database",k1="@firebase/data-connect",N1="@firebase/database-compat",x1="@firebase/functions",D1="@firebase/functions-compat",V1="@firebase/installations",L1="@firebase/installations-compat",O1="@firebase/messaging",M1="@firebase/messaging-compat",F1="@firebase/performance",b1="@firebase/performance-compat",U1="@firebase/remote-config",j1="@firebase/remote-config-compat",B1="@firebase/storage",z1="@firebase/storage-compat",q1="@firebase/firestore",W1="@firebase/vertexai",H1="@firebase/firestore-compat",$1="firebase",G1="11.1.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tf="[DEFAULT]",Q1={[wf]:"fire-core",[w1]:"fire-core-compat",[I1]:"fire-analytics",[T1]:"fire-analytics-compat",[S1]:"fire-app-check",[C1]:"fire-app-check-compat",[R1]:"fire-auth",[A1]:"fire-auth-compat",[P1]:"fire-rtdb",[k1]:"fire-data-connect",[N1]:"fire-rtdb-compat",[x1]:"fire-fn",[D1]:"fire-fn-compat",[V1]:"fire-iid",[L1]:"fire-iid-compat",[O1]:"fire-fcm",[M1]:"fire-fcm-compat",[F1]:"fire-perf",[b1]:"fire-perf-compat",[U1]:"fire-rc",[j1]:"fire-rc-compat",[B1]:"fire-gcs",[z1]:"fire-gcs-compat",[q1]:"fire-fst",[H1]:"fire-fst-compat",[W1]:"fire-vertex","fire-js":"fire-js",[$1]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ic=new Map,K1=new Map,If=new Map;function O_(n,e){try{n.container.addComponent(e)}catch(t){Br.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function da(n){const e=n.name;if(If.has(e))return Br.debug(`There were multiple attempts to register component ${e}.`),!1;If.set(e,n);for(const t of Ic.values())O_(t,n);for(const t of K1.values())O_(t,n);return!0}function Nv(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y1={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ei=new Sv("app","Firebase",Y1);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X1{constructor(e,t,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Do("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ei.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xv=G1;function Dv(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const i=Object.assign({name:Tf,automaticDataCollectionEnabled:!1},e),o=i.name;if(typeof o!="string"||!o)throw Ei.create("bad-app-name",{appName:String(o)});if(t||(t=Ev()),!t)throw Ei.create("no-options");const l=Ic.get(o);if(l){if(yf(t,l.options)&&yf(i,l.config))return l;throw Ei.create("duplicate-app",{appName:o})}const c=new r1(o);for(const p of If.values())c.addComponent(p);const d=new X1(t,i,c);return Ic.set(o,d),d}function Vv(n=Tf){const e=Ic.get(n);if(!e&&n===Tf&&Ev())return Dv();if(!e)throw Ei.create("no-app",{appName:n});return e}function wi(n,e,t){var i;let o=(i=Q1[n])!==null&&i!==void 0?i:n;t&&(o+=`-${t}`);const l=o.match(/\s|\//),c=e.match(/\s|\//);if(l||c){const d=[`Unable to register library "${o}" with version "${e}":`];l&&d.push(`library name "${o}" contains illegal characters (whitespace or "/")`),l&&c&&d.push("and"),c&&d.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Br.warn(d.join(" "));return}da(new Do(`${o}-version`,()=>({library:o,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J1="firebase-heartbeat-database",Z1=1,fa="firebase-heartbeat-store";let nf=null;function Lv(){return nf||(nf=g1(J1,Z1,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(fa)}catch(t){console.warn(t)}}}}).catch(n=>{throw Ei.create("idb-open",{originalErrorMessage:n.message})})),nf}async function eI(n){try{const t=(await Lv()).transaction(fa),i=await t.objectStore(fa).get(Ov(n));return await t.done,i}catch(e){if(e instanceof Ho)Br.warn(e.message);else{const t=Ei.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Br.warn(t.message)}}}async function M_(n,e){try{const i=(await Lv()).transaction(fa,"readwrite");await i.objectStore(fa).put(e,Ov(n)),await i.done}catch(t){if(t instanceof Ho)Br.warn(t.message);else{const i=Ei.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});Br.warn(i.message)}}}function Ov(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tI=1024,nI=30*24*60*60*1e3;class rI{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new sI(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,t;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=F_();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(c=>c.date===l)?void 0:(this._heartbeatsCache.heartbeats.push({date:l,agent:o}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(c=>{const d=new Date(c.date).valueOf();return Date.now()-d<=nI}),this._storage.overwrite(this._heartbeatsCache))}catch(i){Br.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=F_(),{heartbeatsToSend:i,unsentEntries:o}=iI(this._heartbeatsCache.heartbeats),l=wc(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=t,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(t){return Br.warn(t),""}}}function F_(){return new Date().toISOString().substring(0,10)}function iI(n,e=tI){const t=[];let i=n.slice();for(const o of n){const l=t.find(c=>c.agent===o.agent);if(l){if(l.dates.push(o.date),b_(t)>e){l.dates.pop();break}}else if(t.push({agent:o.agent,dates:[o.date]}),b_(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}class sI{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return WT()?HT().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await eI(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const o=await this.read();return M_(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:o.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const o=await this.read();return M_(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...e.heartbeats]})}else return}}function b_(n){return wc(JSON.stringify({version:2,heartbeats:n})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oI(n){da(new Do("platform-logger",e=>new v1(e),"PRIVATE")),da(new Do("heartbeat",e=>new rI(e),"PRIVATE")),wi(wf,L_,n),wi(wf,L_,"esm2017"),wi("fire-js","")}oI("");var lI="firebase",aI="11.1.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */wi(lI,aI,"app");var U_={};const j_="@firebase/database",B_="1.0.10";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Mv="";function uI(n){Mv=n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cI{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){t==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),Dt(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return t==null?null:ha(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hI{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){t==null?delete this.cache_[e]:this.cache_[e]=t}get(e){return Hr(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fv=function(n){try{if(typeof window<"u"&&typeof window[n]<"u"){const e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new cI(e)}}catch{}return new hI},hs=Fv("localStorage"),dI=Fv("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ro=new tp("@firebase/database"),fI=function(){let n=1;return function(){return n++}}(),bv=function(n){const e=ZT(n),t=new JT;t.update(e);const i=t.digest();return Jf.encodeByteArray(i)},Aa=function(...n){let e="";for(let t=0;t<n.length;t++){const i=n[t];Array.isArray(i)||i&&typeof i=="object"&&typeof i.length=="number"?e+=Aa.apply(null,i):typeof i=="object"?e+=Dt(i):e+=i,e+=" "}return e};let ra=null,z_=!0;const pI=function(n,e){J(!e,"Can't turn on custom loggers persistently."),Ro.logLevel=xe.VERBOSE,ra=Ro.log.bind(Ro)},Kt=function(...n){if(z_===!0&&(z_=!1,ra===null&&dI.get("logging_enabled")===!0&&pI()),ra){const e=Aa.apply(null,n);ra(e)}},Pa=function(n){return function(...e){Kt(n,...e)}},Cf=function(...n){const e="FIREBASE INTERNAL ERROR: "+Aa(...n);Ro.error(e)},zr=function(...n){const e=`FIREBASE FATAL ERROR: ${Aa(...n)}`;throw Ro.error(e),new Error(e)},Sn=function(...n){const e="FIREBASE WARNING: "+Aa(...n);Ro.warn(e)},mI=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&Sn("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},Uv=function(n){return typeof n=="number"&&(n!==n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},gI=function(n){if(document.readyState==="complete")n();else{let e=!1;const t=function(){if(!document.body){setTimeout(t,Math.floor(10));return}e||(e=!0,n())};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&t()}),window.attachEvent("onload",t))}},Vo="[MIN_NAME]",ms="[MAX_NAME]",$o=function(n,e){if(n===e)return 0;if(n===Vo||e===ms)return-1;if(e===Vo||n===ms)return 1;{const t=q_(n),i=q_(e);return t!==null?i!==null?t-i===0?n.length-e.length:t-i:-1:i!==null?1:n<e?-1:1}},_I=function(n,e){return n===e?0:n<e?-1:1},Gl=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+Dt(e))},rp=function(n){if(typeof n!="object"||n===null)return Dt(n);const e=[];for(const i in n)e.push(i);e.sort();let t="{";for(let i=0;i<e.length;i++)i!==0&&(t+=","),t+=Dt(e[i]),t+=":",t+=rp(n[e[i]]);return t+="}",t},jv=function(n,e){const t=n.length;if(t<=e)return[n];const i=[];for(let o=0;o<t;o+=e)o+e>t?i.push(n.substring(o,t)):i.push(n.substring(o,o+e));return i};function mn(n,e){for(const t in n)n.hasOwnProperty(t)&&e(t,n[t])}const Bv=function(n){J(!Uv(n),"Invalid JSON number");const e=11,t=52,i=(1<<e-1)-1;let o,l,c,d,p;n===0?(l=0,c=0,o=1/n===-1/0?1:0):(o=n<0,n=Math.abs(n),n>=Math.pow(2,1-i)?(d=Math.min(Math.floor(Math.log(n)/Math.LN2),i),l=d+i,c=Math.round(n*Math.pow(2,t-d)-Math.pow(2,t))):(l=0,c=Math.round(n/Math.pow(2,1-i-t))));const _=[];for(p=t;p;p-=1)_.push(c%2?1:0),c=Math.floor(c/2);for(p=e;p;p-=1)_.push(l%2?1:0),l=Math.floor(l/2);_.push(o?1:0),_.reverse();const v=_.join("");let w="";for(p=0;p<64;p+=8){let I=parseInt(v.substr(p,8),2).toString(16);I.length===1&&(I="0"+I),w=w+I}return w.toLowerCase()},yI=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},vI=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function EI(n,e){let t="Unknown Error";n==="too_big"?t="The data requested exceeds the maximum size that can be accessed with a single request.":n==="permission_denied"?t="Client doesn't have permission to access the desired data.":n==="unavailable"&&(t="The service is unavailable");const i=new Error(n+" at "+e._path.toString()+": "+t);return i.code=n.toUpperCase(),i}const wI=new RegExp("^-?(0*)\\d{1,10}$"),TI=-2147483648,II=2147483647,q_=function(n){if(wI.test(n)){const e=Number(n);if(e>=TI&&e<=II)return e}return null},ka=function(n){try{n()}catch(e){setTimeout(()=>{const t=e.stack||"";throw Sn("Exception was thrown by user callback.",t),e},Math.floor(0))}},CI=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},ia=function(n,e){const t=setTimeout(n,e);return typeof t=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(t):typeof t=="object"&&t.unref&&t.unref(),t};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SI{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=t==null?void 0:t.getImmediate({optional:!0}),this.appCheck||t==null||t.get().then(i=>this.appCheck=i)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((t,i)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,i):t(null)},0)})}addTokenChangeListener(e){var t;(t=this.appCheckProvider)===null||t===void 0||t.get().then(i=>i.addTokenListener(e))}notifyForInvalidToken(){Sn(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RI{constructor(e,t,i){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=i,this.auth_=null,this.auth_=i.getImmediate({optional:!0}),this.auth_||i.onInit(o=>this.auth_=o)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&t.code==="auth/token-not-initialized"?(Kt("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,i)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,i):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Sn(e)}}class fc{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}fc.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ip="5",zv="v",qv="s",Wv="r",Hv="f",$v=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,Gv="ls",Qv="p",Sf="ac",Kv="websocket",Yv="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xv{constructor(e,t,i,o,l=!1,c="",d=!1,p=!1){this.secure=t,this.namespace=i,this.webSocketOnly=o,this.nodeAdmin=l,this.persistenceKey=c,this.includeNamespaceInQueryParams=d,this.isUsingEmulator=p,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=hs.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&hs.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",t=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${t}`}}function AI(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams}function Jv(n,e,t){J(typeof e=="string","typeof type must == string"),J(typeof t=="object","typeof params must == object");let i;if(e===Kv)i=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else if(e===Yv)i=(n.secure?"https://":"http://")+n.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);AI(n)&&(t.ns=n.namespace);const o=[];return mn(t,(l,c)=>{o.push(l+"="+c)}),i+o.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PI{constructor(){this.counters_={}}incrementCounter(e,t=1){Hr(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return LT(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rf={},sf={};function sp(n){const e=n.toString();return rf[e]||(rf[e]=new PI),rf[e]}function kI(n,e){const t=n.toString();return sf[t]||(sf[t]=e()),sf[t]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NI{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const i=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let o=0;o<i.length;++o)i[o]&&ka(()=>{this.onMessage_(i[o])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W_="start",xI="close",DI="pLPCommand",VI="pRTLPCB",Zv="id",e0="pw",t0="ser",LI="cb",OI="seg",MI="ts",FI="d",bI="dframe",n0=1870,r0=30,UI=n0-r0,jI=25e3,BI=3e4;class To{constructor(e,t,i,o,l,c,d){this.connId=e,this.repoInfo=t,this.applicationId=i,this.appCheckToken=o,this.authToken=l,this.transportSessionId=c,this.lastSessionId=d,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Pa(e),this.stats_=sp(t),this.urlFn=p=>(this.appCheckToken&&(p[Sf]=this.appCheckToken),Jv(t,Yv,p))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new NI(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(BI)),gI(()=>{if(this.isClosed_)return;this.scriptTagHolder=new op((...l)=>{const[c,d,p,_,v]=l;if(this.incrementIncomingBytes_(l),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,c===W_)this.id=d,this.password=p;else if(c===xI)d?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(d,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+c)},(...l)=>{const[c,d]=l;this.incrementIncomingBytes_(l),this.myPacketOrderer.handleResponse(c,d)},()=>{this.onClosed_()},this.urlFn);const i={};i[W_]="t",i[t0]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(i[LI]=this.scriptTagHolder.uniqueCallbackIdentifier),i[zv]=ip,this.transportSessionId&&(i[qv]=this.transportSessionId),this.lastSessionId&&(i[Gv]=this.lastSessionId),this.applicationId&&(i[Qv]=this.applicationId),this.appCheckToken&&(i[Sf]=this.appCheckToken),typeof location<"u"&&location.hostname&&$v.test(location.hostname)&&(i[Wv]=Hv);const o=this.urlFn(i);this.log_("Connecting via long-poll to "+o),this.scriptTagHolder.addTag(o,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){To.forceAllow_=!0}static forceDisallow(){To.forceDisallow_=!0}static isAvailable(){return To.forceAllow_?!0:!To.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!yI()&&!vI()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=Dt(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const i=_v(t),o=jv(i,UI);for(let l=0;l<o.length;l++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,o.length,o[l]),this.curSegmentNum++}addDisconnectPingFrame(e,t){this.myDisconnFrame=document.createElement("iframe");const i={};i[bI]="t",i[Zv]=e,i[e0]=t,this.myDisconnFrame.src=this.urlFn(i),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=Dt(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class op{constructor(e,t,i,o){this.onDisconnect=i,this.urlFn=o,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=fI(),window[DI+this.uniqueCallbackIdentifier]=e,window[VI+this.uniqueCallbackIdentifier]=t,this.myIFrame=op.createIFrame_();let l="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(l='<script>document.domain="'+document.domain+'";<\/script>');const c="<html><body>"+l+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(c),this.myIFrame.doc.close()}catch(d){Kt("frame writing exception"),d.stack&&Kt(d.stack),Kt(d)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||Kt("No IE domain setting required")}catch{const i=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+i+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[Zv]=this.myID,e[e0]=this.myPW,e[t0]=this.currentSerial;let t=this.urlFn(e),i="",o=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+r0+i.length<=n0;){const c=this.pendingSegs.shift();i=i+"&"+OI+o+"="+c.seg+"&"+MI+o+"="+c.ts+"&"+FI+o+"="+c.d,o++}return t=t+i,this.addLongPollTag_(t,this.currentSerial),!0}else return!1}enqueueSegment(e,t,i){this.pendingSegs.push({seg:e,ts:t,d:i}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const i=()=>{this.outstandingRequests.delete(t),this.newRequest_()},o=setTimeout(i,Math.floor(jI)),l=()=>{clearTimeout(o),i()};this.addTag(e,l)}addTag(e,t){setTimeout(()=>{try{if(!this.sendNewPolls)return;const i=this.myIFrame.doc.createElement("script");i.type="text/javascript",i.async=!0,i.src=e,i.onload=i.onreadystatechange=function(){const o=i.readyState;(!o||o==="loaded"||o==="complete")&&(i.onload=i.onreadystatechange=null,i.parentNode&&i.parentNode.removeChild(i),t())},i.onerror=()=>{Kt("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(i)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zI=16384,qI=45e3;let Cc=null;typeof MozWebSocket<"u"?Cc=MozWebSocket:typeof WebSocket<"u"&&(Cc=WebSocket);class Xn{constructor(e,t,i,o,l,c,d){this.connId=e,this.applicationId=i,this.appCheckToken=o,this.authToken=l,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Pa(this.connId),this.stats_=sp(t),this.connURL=Xn.connectionURL_(t,c,d,o,i),this.nodeAdmin=t.nodeAdmin}static connectionURL_(e,t,i,o,l){const c={};return c[zv]=ip,typeof location<"u"&&location.hostname&&$v.test(location.hostname)&&(c[Wv]=Hv),t&&(c[qv]=t),i&&(c[Gv]=i),o&&(c[Sf]=o),l&&(c[Qv]=l),Jv(e,Kv,c)}open(e,t){this.onDisconnect=t,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,hs.set("previous_websocket_failure",!0);try{let i;Cv(),this.mySock=new Cc(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");const o=i.message||i.data;o&&this.log_(o),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");const o=i.message||i.data;o&&this.log_(o),this.onClosed_()}}start(){}static forceDisallow(){Xn.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const t=/Android ([0-9]{0,}\.[0-9]{0,})/,i=navigator.userAgent.match(t);i&&i.length>1&&parseFloat(i[1])<4.4&&(e=!0)}return!e&&Cc!==null&&!Xn.forceDisallow_}static previouslyFailed(){return hs.isInMemoryStorage||hs.get("previous_websocket_failure")===!0}markConnectionHealthy(){hs.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const t=this.frames.join("");this.frames=null;const i=ha(t);this.onMessage(i)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(J(this.frames===null,"We already have a frame buffer"),e.length<=6){const t=Number(e);if(!isNaN(t))return this.handleNewFrameCount_(t),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const t=e.data;if(this.bytesReceived+=t.length,this.stats_.incrementCounter("bytes_received",t.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(t);else{const i=this.extractFrameCount_(t);i!==null&&this.appendFrame_(i)}}send(e){this.resetKeepAlive();const t=Dt(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const i=jv(t,zI);i.length>1&&this.sendString_(String(i.length));for(let o=0;o<i.length;o++)this.sendString_(i[o])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(qI))}sendString_(e){try{this.mySock.send(e)}catch(t){this.log_("Exception thrown from WebSocket.send():",t.message||t.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}Xn.responsesRequiredToBeHealthy=2;Xn.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pa{static get ALL_TRANSPORTS(){return[To,Xn]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}constructor(e){this.initTransports_(e)}initTransports_(e){const t=Xn&&Xn.isAvailable();let i=t&&!Xn.previouslyFailed();if(e.webSocketOnly&&(t||Sn("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[Xn];else{const o=this.transports_=[];for(const l of pa.ALL_TRANSPORTS)l&&l.isAvailable()&&o.push(l);pa.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}pa.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WI=6e4,HI=5e3,$I=10*1024,GI=100*1024,of="t",H_="d",QI="s",$_="r",KI="e",G_="o",Q_="a",K_="n",Y_="p",YI="h";class XI{constructor(e,t,i,o,l,c,d,p,_,v){this.id=e,this.repoInfo_=t,this.applicationId_=i,this.appCheckToken_=o,this.authToken_=l,this.onMessage_=c,this.onReady_=d,this.onDisconnect_=p,this.onKill_=_,this.lastSessionId=v,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Pa("c:"+this.id+":"),this.transportManager_=new pa(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),i=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,i)},Math.floor(0));const o=e.healthyTimeout||0;o>0&&(this.healthyTimeout_=ia(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>GI?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>$I?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(o)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){const t={t:"d",d:e};this.sendData_(t)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(of in e){const t=e[of];t===Q_?this.upgradeIfSecondaryHealthy_():t===$_?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):t===G_&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=Gl("t",e),i=Gl("d",e);if(t==="c")this.onSecondaryControl_(i);else if(t==="d")this.pendingDataMessages.push(i);else throw new Error("Unknown protocol layer: "+t)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:Y_,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:Q_,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:K_,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=Gl("t",e),i=Gl("d",e);t==="c"?this.onControl_(i):t==="d"&&this.onDataMessage_(i)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=Gl(of,e);if(H_ in e){const i=e[H_];if(t===YI){const o=Object.assign({},i);this.repoInfo_.isUsingEmulator&&(o.h=this.repoInfo_.host),this.onHandshake_(o)}else if(t===K_){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let o=0;o<this.pendingDataMessages.length;++o)this.onDataMessage_(this.pendingDataMessages[o]);this.pendingDataMessages=[],this.tryCleanupConnection()}else t===QI?this.onConnectionShutdown_(i):t===$_?this.onReset_(i):t===KI?Cf("Server Error: "+i):t===G_?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Cf("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,i=e.v,o=e.h;this.sessionId=e.s,this.repoInfo_.host=o,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),ip!==i&&Sn("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),i=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,i),ia(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(WI))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):ia(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(HI))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:Y_,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(hs.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i0{put(e,t,i,o){}merge(e,t,i,o){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,i){}onDisconnectMerge(e,t,i){}onDisconnectCancel(e,t){}reportStats(e){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s0{constructor(e){this.allowedEvents_=e,this.listeners_={},J(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const i=[...this.listeners_[e]];for(let o=0;o<i.length;o++)i[o].callback.apply(i[o].context,t)}}on(e,t,i){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:i});const o=this.getInitialEvent(e);o&&t.apply(i,o)}off(e,t,i){this.validateEventType_(e);const o=this.listeners_[e]||[];for(let l=0;l<o.length;l++)if(o[l].callback===t&&(!i||i===o[l].context)){o.splice(l,1);return}}validateEventType_(e){J(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sc extends s0{static getInstance(){return new Sc}constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!Iv()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}getInitialEvent(e){return J(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X_=32,J_=768;class $e{constructor(e,t){if(t===void 0){this.pieces_=e.split("/");let i=0;for(let o=0;o<this.pieces_.length;o++)this.pieces_[o].length>0&&(this.pieces_[i]=this.pieces_[o],i++);this.pieces_.length=i,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)this.pieces_[t]!==""&&(e+="/"+this.pieces_[t]);return e||"/"}}function Be(){return new $e("")}function Ae(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function Ci(n){return n.pieces_.length-n.pieceNum_}function Ye(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new $e(n.pieces_,e)}function o0(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function JI(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)n.pieces_[t]!==""&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}function l0(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function a0(n){if(n.pieceNum_>=n.pieces_.length)return null;const e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new $e(e,0)}function Tt(n,e){const t=[];for(let i=n.pieceNum_;i<n.pieces_.length;i++)t.push(n.pieces_[i]);if(e instanceof $e)for(let i=e.pieceNum_;i<e.pieces_.length;i++)t.push(e.pieces_[i]);else{const i=e.split("/");for(let o=0;o<i.length;o++)i[o].length>0&&t.push(i[o])}return new $e(t,0)}function Pe(n){return n.pieceNum_>=n.pieces_.length}function dn(n,e){const t=Ae(n),i=Ae(e);if(t===null)return e;if(t===i)return dn(Ye(n),Ye(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function lp(n,e){if(Ci(n)!==Ci(e))return!1;for(let t=n.pieceNum_,i=e.pieceNum_;t<=n.pieces_.length;t++,i++)if(n.pieces_[t]!==e.pieces_[i])return!1;return!0}function Jn(n,e){let t=n.pieceNum_,i=e.pieceNum_;if(Ci(n)>Ci(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[i])return!1;++t,++i}return!0}class ZI{constructor(e,t){this.errorPrefix_=t,this.parts_=l0(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let i=0;i<this.parts_.length;i++)this.byteLength_+=Gc(this.parts_[i]);u0(this)}}function eC(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=Gc(e),u0(n)}function tC(n){const e=n.parts_.pop();n.byteLength_-=Gc(e),n.parts_.length>0&&(n.byteLength_-=1)}function u0(n){if(n.byteLength_>J_)throw new Error(n.errorPrefix_+"has a key path longer than "+J_+" bytes ("+n.byteLength_+").");if(n.parts_.length>X_)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+X_+") or object contains a cycle "+cs(n))}function cs(n){return n.parts_.length===0?"":"in property '"+n.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ap extends s0{static getInstance(){return new ap}constructor(){super(["visible"]);let e,t;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(t="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(t="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(t="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const i=!document[e];i!==this.visible_&&(this.visible_=i,this.trigger("visible",i))},!1)}getInitialEvent(e){return J(e==="visible","Unknown event type: "+e),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ql=1e3,nC=60*5*1e3,Z_=30*1e3,rC=1.3,iC=3e4,sC="server_kill",ey=3;class Ur extends i0{constructor(e,t,i,o,l,c,d,p){if(super(),this.repoInfo_=e,this.applicationId_=t,this.onDataUpdate_=i,this.onConnectStatus_=o,this.onServerInfoUpdate_=l,this.authTokenProvider_=c,this.appCheckTokenProvider_=d,this.authOverride_=p,this.id=Ur.nextPersistentConnectionId_++,this.log_=Pa("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Ql,this.maxReconnectDelay_=nC,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,p&&!Cv())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");ap.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&Sc.getInstance().on("online",this.onOnline_,this)}sendRequest(e,t,i){const o=++this.requestNumber_,l={r:o,a:e,b:t};this.log_(Dt(l)),J(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(l),i&&(this.requestCBHash_[o]=i)}get(e){this.initConnection_();const t=new ep,o={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:c=>{const d=c.d;c.s==="ok"?t.resolve(d):t.reject(d)}};this.outstandingGets_.push(o),this.outstandingGetCount_++;const l=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(l),t.promise}listen(e,t,i,o){this.initConnection_();const l=e._queryIdentifier,c=e._path.toString();this.log_("Listen called for "+c+" "+l),this.listens.has(c)||this.listens.set(c,new Map),J(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),J(!this.listens.get(c).has(l),"listen() called twice for same path/queryId.");const d={onComplete:o,hashFn:t,query:e,tag:i};this.listens.get(c).set(l,d),this.connected_&&this.sendListen_(d)}sendGet_(e){const t=this.outstandingGets_[e];this.sendRequest("g",t.request,i=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),t.onComplete&&t.onComplete(i)})}sendListen_(e){const t=e.query,i=t._path.toString(),o=t._queryIdentifier;this.log_("Listen on "+i+" for "+o);const l={p:i},c="q";e.tag&&(l.q=t._queryObject,l.t=e.tag),l.h=e.hashFn(),this.sendRequest(c,l,d=>{const p=d.d,_=d.s;Ur.warnOnListenWarnings_(p,t),(this.listens.get(i)&&this.listens.get(i).get(o))===e&&(this.log_("listen response",d),_!=="ok"&&this.removeListen_(i,o),e.onComplete&&e.onComplete(_,p))})}static warnOnListenWarnings_(e,t){if(e&&typeof e=="object"&&Hr(e,"w")){const i=xo(e,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){const o='".indexOn": "'+t._queryParams.getIndex().toString()+'"',l=t._path.toString();Sn(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${o} at ${l} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||YT(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=Z_)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,t=KT(e)?"auth":"gauth",i={cred:e};this.authOverride_===null?i.noauth=!0:typeof this.authOverride_=="object"&&(i.authvar=this.authOverride_),this.sendRequest(t,i,o=>{const l=o.s,c=o.d||"error";this.authToken_===e&&(l==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(l,c))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const t=e.s,i=e.d||"error";t==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(t,i)})}unlisten(e,t){const i=e._path.toString(),o=e._queryIdentifier;this.log_("Unlisten called for "+i+" "+o),J(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,o)&&this.connected_&&this.sendUnlisten_(i,o,e._queryObject,t)}sendUnlisten_(e,t,i,o){this.log_("Unlisten on "+e+" for "+t);const l={p:e},c="n";o&&(l.q=i,l.t=o),this.sendRequest(c,l)}onDisconnectPut(e,t,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,t,i):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:t,onComplete:i})}onDisconnectMerge(e,t,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,t,i):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:t,onComplete:i})}onDisconnectCancel(e,t){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,t):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:t})}sendOnDisconnect_(e,t,i,o){const l={p:t,d:i};this.log_("onDisconnect "+e,l),this.sendRequest(e,l,c=>{o&&setTimeout(()=>{o(c.s,c.d)},Math.floor(0))})}put(e,t,i,o){this.putInternal("p",e,t,i,o)}merge(e,t,i,o){this.putInternal("m",e,t,i,o)}putInternal(e,t,i,o,l){this.initConnection_();const c={p:t,d:i};l!==void 0&&(c.h=l),this.outstandingPuts_.push({action:e,request:c,onComplete:o}),this.outstandingPutCount_++;const d=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(d):this.log_("Buffering put: "+t)}sendPut_(e){const t=this.outstandingPuts_[e].action,i=this.outstandingPuts_[e].request,o=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(t,i,l=>{this.log_(t+" response",l),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),o&&o(l.s,l.d)})}reportStats(e){if(this.connected_){const t={c:e};this.log_("reportStats",t),this.sendRequest("s",t,i=>{if(i.s!=="ok"){const l=i.d;this.log_("reportStats","Error sending stats: "+l)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+Dt(e));const t=e.r,i=this.requestCBHash_[t];i&&(delete this.requestCBHash_[t],i(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,t){this.log_("handleServerMessage",e,t),e==="d"?this.onDataUpdate_(t.p,t.d,!1,t.t):e==="m"?this.onDataUpdate_(t.p,t.d,!0,t.t):e==="c"?this.onListenRevoked_(t.p,t.q):e==="ac"?this.onAuthRevoked_(t.s,t.d):e==="apc"?this.onAppCheckRevoked_(t.s,t.d):e==="sd"?this.onSecurityDebugPacket_(t):Cf("Unrecognized action received from server: "+Dt(e)+`
Are you using the latest client?`)}onReady_(e,t){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=t,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){J(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Ql,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=Ql,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>iC&&(this.reconnectDelay_=Ql),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=new Date().getTime()-this.lastConnectionAttemptTime_;let t=Math.max(0,this.reconnectDelay_-e);t=Math.random()*t,this.log_("Trying to reconnect in "+t+"ms"),this.scheduleConnect_(t),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*rC)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),t=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),o=this.id+":"+Ur.nextConnectionId_++,l=this.lastSessionId;let c=!1,d=null;const p=function(){d?d.close():(c=!0,i())},_=function(w){J(d,"sendRequest call when we're not connected not allowed."),d.sendRequest(w)};this.realtime_={close:p,sendRequest:_};const v=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[w,I]=await Promise.all([this.authTokenProvider_.getToken(v),this.appCheckTokenProvider_.getToken(v)]);c?Kt("getToken() completed but was canceled"):(Kt("getToken() completed. Creating connection."),this.authToken_=w&&w.accessToken,this.appCheckToken_=I&&I.token,d=new XI(o,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,t,i,x=>{Sn(x+" ("+this.repoInfo_.toString()+")"),this.interrupt(sC)},l))}catch(w){this.log_("Failed to get token: "+w),c||(this.repoInfo_.nodeAdmin&&Sn(w),p())}}}interrupt(e){Kt("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){Kt("Resuming connection for reason: "+e),delete this.interruptReasons_[e],k_(this.interruptReasons_)&&(this.reconnectDelay_=Ql,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const t=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:t})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const t=this.outstandingPuts_[e];t&&"h"in t.request&&t.queued&&(t.onComplete&&t.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,t){let i;t?i=t.map(l=>rp(l)).join("$"):i="default";const o=this.removeListen_(e,i);o&&o.onComplete&&o.onComplete("permission_denied")}removeListen_(e,t){const i=new $e(e).toString();let o;if(this.listens.has(i)){const l=this.listens.get(i);o=l.get(t),l.delete(t),l.size===0&&this.listens.delete(i)}else o=void 0;return o}onAuthRevoked_(e,t){Kt("Auth token revoked: "+e+"/"+t),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=ey&&(this.reconnectDelay_=Z_,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,t){Kt("App check token revoked: "+e+"/"+t),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=ey&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const t of e.values())this.sendListen_(t);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let t="js";e["sdk."+t+"."+Mv.replace(/\./g,"-")]=1,Iv()?e["framework.cordova"]=1:zT()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=Sc.getInstance().currentlyOnline();return k_(this.interruptReasons_)&&e}}Ur.nextPersistentConnectionId_=0;Ur.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Re{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new Re(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qc{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const i=new Re(Vo,e),o=new Re(Vo,t);return this.compare(i,o)!==0}minPost(){return Re.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let tc;class c0 extends Qc{static get __EMPTY_NODE(){return tc}static set __EMPTY_NODE(e){tc=e}compare(e,t){return $o(e.name,t.name)}isDefinedOn(e){throw Wo("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return Re.MIN}maxPost(){return new Re(ms,tc)}makePost(e,t){return J(typeof e=="string","KeyIndex indexValue must always be a string."),new Re(e,tc)}toString(){return".key"}}const Ao=new c0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let nc=class{constructor(e,t,i,o,l=null){this.isReverse_=o,this.resultGenerator_=l,this.nodeStack_=[];let c=1;for(;!e.isEmpty();)if(e=e,c=t?i(e.key,t):1,o&&(c*=-1),c<0)this.isReverse_?e=e.left:e=e.right;else if(c===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),t;if(this.resultGenerator_?t=this.resultGenerator_(e.key,e.value):t={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}},In=class Xl{constructor(e,t,i,o,l){this.key=e,this.value=t,this.color=i??Xl.RED,this.left=o??pr.EMPTY_NODE,this.right=l??pr.EMPTY_NODE}copy(e,t,i,o,l){return new Xl(e??this.key,t??this.value,i??this.color,o??this.left,l??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let o=this;const l=i(e,o.key);return l<0?o=o.copy(null,null,null,o.left.insert(e,t,i),null):l===0?o=o.copy(null,t,null,null,null):o=o.copy(null,null,null,null,o.right.insert(e,t,i)),o.fixUp_()}removeMin_(){if(this.left.isEmpty())return pr.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,t){let i,o;if(i=this,t(e,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),t(e,i.key)===0){if(i.right.isEmpty())return pr.EMPTY_NODE;o=i.right.min_(),i=i.copy(o.key,o.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,Xl.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,Xl.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}};In.RED=!0;In.BLACK=!1;class oC{copy(e,t,i,o,l){return this}insert(e,t,i){return new In(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}let pr=class pc{constructor(e,t=pc.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new pc(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,In.BLACK,null,null))}remove(e){return new pc(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,In.BLACK,null,null))}get(e){let t,i=this.root_;for(;!i.isEmpty();){if(t=this.comparator_(e,i.key),t===0)return i.value;t<0?i=i.left:t>0&&(i=i.right)}return null}getPredecessorKey(e){let t,i=this.root_,o=null;for(;!i.isEmpty();)if(t=this.comparator_(e,i.key),t===0){if(i.left.isEmpty())return o?o.key:null;for(i=i.left;!i.right.isEmpty();)i=i.right;return i.key}else t<0?i=i.left:t>0&&(o=i,i=i.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new nc(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new nc(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new nc(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new nc(this.root_,null,this.comparator_,!0,e)}};pr.EMPTY_NODE=new oC;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lC(n,e){return $o(n.name,e.name)}function up(n,e){return $o(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Rf;function aC(n){Rf=n}const h0=function(n){return typeof n=="number"?"number:"+Bv(n):"string:"+n},d0=function(n){if(n.isLeafNode()){const e=n.val();J(typeof e=="string"||typeof e=="number"||typeof e=="object"&&Hr(e,".sv"),"Priority must be a string or number.")}else J(n===Rf||n.isEmpty(),"priority of unexpected type.");J(n===Rf||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ty;class Nt{static set __childrenNodeConstructor(e){ty=e}static get __childrenNodeConstructor(){return ty}constructor(e,t=Nt.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=t,this.lazyHash_=null,J(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),d0(this.priorityNode_)}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new Nt(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:Nt.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return Pe(e)?this:Ae(e)===".priority"?this.priorityNode_:Nt.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,t){return null}updateImmediateChild(e,t){return e===".priority"?this.updatePriority(t):t.isEmpty()&&e!==".priority"?this:Nt.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,t).updatePriority(this.priorityNode_)}updateChild(e,t){const i=Ae(e);return i===null?t:t.isEmpty()&&i!==".priority"?this:(J(i!==".priority"||Ci(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(i,Nt.__childrenNodeConstructor.EMPTY_NODE.updateChild(Ye(e),t)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,t){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+h0(this.priorityNode_.val())+":");const t=typeof this.value_;e+=t+":",t==="number"?e+=Bv(this.value_):e+=this.value_,this.lazyHash_=bv(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===Nt.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof Nt.__childrenNodeConstructor?-1:(J(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const t=typeof e.value_,i=typeof this.value_,o=Nt.VALUE_TYPE_ORDER.indexOf(t),l=Nt.VALUE_TYPE_ORDER.indexOf(i);return J(o>=0,"Unknown leaf type: "+t),J(l>=0,"Unknown leaf type: "+i),o===l?i==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:l-o}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const t=e;return this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)}else return!1}}Nt.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let f0,p0;function uC(n){f0=n}function cC(n){p0=n}class hC extends Qc{compare(e,t){const i=e.node.getPriority(),o=t.node.getPriority(),l=i.compareTo(o);return l===0?$o(e.name,t.name):l}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return Re.MIN}maxPost(){return new Re(ms,new Nt("[PRIORITY-POST]",p0))}makePost(e,t){const i=f0(e);return new Re(t,new Nt("[PRIORITY-POST]",i))}toString(){return".priority"}}const lt=new hC;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dC=Math.log(2);class fC{constructor(e){const t=l=>parseInt(Math.log(l)/dC,10),i=l=>parseInt(Array(l+1).join("1"),2);this.count=t(e+1),this.current_=this.count-1;const o=i(this.count);this.bits_=e+1&o}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const Rc=function(n,e,t,i){n.sort(e);const o=function(p,_){const v=_-p;let w,I;if(v===0)return null;if(v===1)return w=n[p],I=t?t(w):w,new In(I,w.node,In.BLACK,null,null);{const x=parseInt(v/2,10)+p,U=o(p,x),q=o(x+1,_);return w=n[x],I=t?t(w):w,new In(I,w.node,In.BLACK,U,q)}},l=function(p){let _=null,v=null,w=n.length;const I=function(U,q){const z=w-U,ae=w;w-=U;const me=o(z+1,ae),_e=n[z],we=t?t(_e):_e;x(new In(we,_e.node,q,null,me))},x=function(U){_?(_.left=U,_=U):(v=U,_=U)};for(let U=0;U<p.count;++U){const q=p.nextBitIsOne(),z=Math.pow(2,p.count-(U+1));q?I(z,In.BLACK):(I(z,In.BLACK),I(z,In.RED))}return v},c=new fC(n.length),d=l(c);return new pr(i||e,d)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let lf;const yo={};class br{static get Default(){return J(yo&&lt,"ChildrenNode.ts has not been loaded"),lf=lf||new br({".priority":yo},{".priority":lt}),lf}constructor(e,t){this.indexes_=e,this.indexSet_=t}get(e){const t=xo(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof pr?t:null}hasIndex(e){return Hr(this.indexSet_,e.toString())}addIndex(e,t){J(e!==Ao,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const i=[];let o=!1;const l=t.getIterator(Re.Wrap);let c=l.getNext();for(;c;)o=o||e.isDefinedOn(c.node),i.push(c),c=l.getNext();let d;o?d=Rc(i,e.getCompare()):d=yo;const p=e.toString(),_=Object.assign({},this.indexSet_);_[p]=e;const v=Object.assign({},this.indexes_);return v[p]=d,new br(v,_)}addToIndexes(e,t){const i=Tc(this.indexes_,(o,l)=>{const c=xo(this.indexSet_,l);if(J(c,"Missing index implementation for "+l),o===yo)if(c.isDefinedOn(e.node)){const d=[],p=t.getIterator(Re.Wrap);let _=p.getNext();for(;_;)_.name!==e.name&&d.push(_),_=p.getNext();return d.push(e),Rc(d,c.getCompare())}else return yo;else{const d=t.get(e.name);let p=o;return d&&(p=p.remove(new Re(e.name,d))),p.insert(e,e.node)}});return new br(i,this.indexSet_)}removeFromIndexes(e,t){const i=Tc(this.indexes_,o=>{if(o===yo)return o;{const l=t.get(e.name);return l?o.remove(new Re(e.name,l)):o}});return new br(i,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Kl;class ge{static get EMPTY_NODE(){return Kl||(Kl=new ge(new pr(up),null,br.Default))}constructor(e,t,i){this.children_=e,this.priorityNode_=t,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&d0(this.priorityNode_),this.children_.isEmpty()&&J(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Kl}updatePriority(e){return this.children_.isEmpty()?this:new ge(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const t=this.children_.get(e);return t===null?Kl:t}}getChild(e){const t=Ae(e);return t===null?this:this.getImmediateChild(t).getChild(Ye(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,t){if(J(t,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(t);{const i=new Re(e,t);let o,l;t.isEmpty()?(o=this.children_.remove(e),l=this.indexMap_.removeFromIndexes(i,this.children_)):(o=this.children_.insert(e,t),l=this.indexMap_.addToIndexes(i,this.children_));const c=o.isEmpty()?Kl:this.priorityNode_;return new ge(o,c,l)}}updateChild(e,t){const i=Ae(e);if(i===null)return t;{J(Ae(e)!==".priority"||Ci(e)===1,".priority must be the last token in a path");const o=this.getImmediateChild(i).updateChild(Ye(e),t);return this.updateImmediateChild(i,o)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const t={};let i=0,o=0,l=!0;if(this.forEachChild(lt,(c,d)=>{t[c]=d.val(e),i++,l&&ge.INTEGER_REGEXP_.test(c)?o=Math.max(o,Number(c)):l=!1}),!e&&l&&o<2*i){const c=[];for(const d in t)c[d]=t[d];return c}else return e&&!this.getPriority().isEmpty()&&(t[".priority"]=this.getPriority().val()),t}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+h0(this.getPriority().val())+":"),this.forEachChild(lt,(t,i)=>{const o=i.hash();o!==""&&(e+=":"+t+":"+o)}),this.lazyHash_=e===""?"":bv(e)}return this.lazyHash_}getPredecessorChildName(e,t,i){const o=this.resolveIndex_(i);if(o){const l=o.getPredecessorKey(new Re(e,t));return l?l.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const t=this.resolveIndex_(e);if(t){const i=t.minKey();return i&&i.name}else return this.children_.minKey()}getFirstChild(e){const t=this.getFirstChildName(e);return t?new Re(t,this.children_.get(t)):null}getLastChildName(e){const t=this.resolveIndex_(e);if(t){const i=t.maxKey();return i&&i.name}else return this.children_.maxKey()}getLastChild(e){const t=this.getLastChildName(e);return t?new Re(t,this.children_.get(t)):null}forEachChild(e,t){const i=this.resolveIndex_(e);return i?i.inorderTraversal(o=>t(o.name,o.node)):this.children_.inorderTraversal(t)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,t){const i=this.resolveIndex_(t);if(i)return i.getIteratorFrom(e,o=>o);{const o=this.children_.getIteratorFrom(e.name,Re.Wrap);let l=o.peek();for(;l!=null&&t.compare(l,e)<0;)o.getNext(),l=o.peek();return o}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,t){const i=this.resolveIndex_(t);if(i)return i.getReverseIteratorFrom(e,o=>o);{const o=this.children_.getReverseIteratorFrom(e.name,Re.Wrap);let l=o.peek();for(;l!=null&&t.compare(l,e)>0;)o.getNext(),l=o.peek();return o}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===Na?-1:0}withIndex(e){if(e===Ao||this.indexMap_.hasIndex(e))return this;{const t=this.indexMap_.addIndex(e,this.children_);return new ge(this.children_,this.priorityNode_,t)}}isIndexed(e){return e===Ao||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const t=e;if(this.getPriority().equals(t.getPriority()))if(this.children_.count()===t.children_.count()){const i=this.getIterator(lt),o=t.getIterator(lt);let l=i.getNext(),c=o.getNext();for(;l&&c;){if(l.name!==c.name||!l.node.equals(c.node))return!1;l=i.getNext(),c=o.getNext()}return l===null&&c===null}else return!1;else return!1}}resolveIndex_(e){return e===Ao?null:this.indexMap_.get(e.toString())}}ge.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class pC extends ge{constructor(){super(new pr(up),ge.EMPTY_NODE,br.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return ge.EMPTY_NODE}isEmpty(){return!1}}const Na=new pC;Object.defineProperties(Re,{MIN:{value:new Re(Vo,ge.EMPTY_NODE)},MAX:{value:new Re(ms,Na)}});c0.__EMPTY_NODE=ge.EMPTY_NODE;Nt.__childrenNodeConstructor=ge;aC(Na);cC(Na);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mC=!0;function Yt(n,e=null){if(n===null)return ge.EMPTY_NODE;if(typeof n=="object"&&".priority"in n&&(e=n[".priority"]),J(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof n=="object"&&".value"in n&&n[".value"]!==null&&(n=n[".value"]),typeof n!="object"||".sv"in n){const t=n;return new Nt(t,Yt(e))}if(!(n instanceof Array)&&mC){const t=[];let i=!1;if(mn(n,(c,d)=>{if(c.substring(0,1)!=="."){const p=Yt(d);p.isEmpty()||(i=i||!p.getPriority().isEmpty(),t.push(new Re(c,p)))}}),t.length===0)return ge.EMPTY_NODE;const l=Rc(t,lC,c=>c.name,up);if(i){const c=Rc(t,lt.getCompare());return new ge(l,Yt(e),new br({".priority":c},{".priority":lt}))}else return new ge(l,Yt(e),br.Default)}else{let t=ge.EMPTY_NODE;return mn(n,(i,o)=>{if(Hr(n,i)&&i.substring(0,1)!=="."){const l=Yt(o);(l.isLeafNode()||!l.isEmpty())&&(t=t.updateImmediateChild(i,l))}}),t.updatePriority(Yt(e))}}uC(Yt);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gC extends Qc{constructor(e){super(),this.indexPath_=e,J(!Pe(e)&&Ae(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const i=this.extractChild(e.node),o=this.extractChild(t.node),l=i.compareTo(o);return l===0?$o(e.name,t.name):l}makePost(e,t){const i=Yt(e),o=ge.EMPTY_NODE.updateChild(this.indexPath_,i);return new Re(t,o)}maxPost(){const e=ge.EMPTY_NODE.updateChild(this.indexPath_,Na);return new Re(ms,e)}toString(){return l0(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _C extends Qc{compare(e,t){const i=e.node.compareTo(t.node);return i===0?$o(e.name,t.name):i}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return Re.MIN}maxPost(){return Re.MAX}makePost(e,t){const i=Yt(e);return new Re(t,i)}toString(){return".value"}}const yC=new _C;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m0(n){return{type:"value",snapshotNode:n}}function Lo(n,e){return{type:"child_added",snapshotNode:e,childName:n}}function ma(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}function ga(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}function vC(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cp{constructor(e){this.index_=e}updateChild(e,t,i,o,l,c){J(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const d=e.getImmediateChild(t);return d.getChild(o).equals(i.getChild(o))&&d.isEmpty()===i.isEmpty()||(c!=null&&(i.isEmpty()?e.hasChild(t)?c.trackChildChange(ma(t,d)):J(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):d.isEmpty()?c.trackChildChange(Lo(t,i)):c.trackChildChange(ga(t,i,d))),e.isLeafNode()&&i.isEmpty())?e:e.updateImmediateChild(t,i).withIndex(this.index_)}updateFullNode(e,t,i){return i!=null&&(e.isLeafNode()||e.forEachChild(lt,(o,l)=>{t.hasChild(o)||i.trackChildChange(ma(o,l))}),t.isLeafNode()||t.forEachChild(lt,(o,l)=>{if(e.hasChild(o)){const c=e.getImmediateChild(o);c.equals(l)||i.trackChildChange(ga(o,l,c))}else i.trackChildChange(Lo(o,l))})),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?ge.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _a{constructor(e){this.indexedFilter_=new cp(e.getIndex()),this.index_=e.getIndex(),this.startPost_=_a.getStartPost_(e),this.endPost_=_a.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const t=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,i=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return t&&i}updateChild(e,t,i,o,l,c){return this.matches(new Re(t,i))||(i=ge.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,i,o,l,c)}updateFullNode(e,t,i){t.isLeafNode()&&(t=ge.EMPTY_NODE);let o=t.withIndex(this.index_);o=o.updatePriority(ge.EMPTY_NODE);const l=this;return t.forEachChild(lt,(c,d)=>{l.matches(new Re(c,d))||(o=o.updateImmediateChild(c,ge.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,o,i)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}else return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}else return e.getIndex().maxPost()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EC{constructor(e){this.withinDirectionalStart=t=>this.reverse_?this.withinEndPost(t):this.withinStartPost(t),this.withinDirectionalEnd=t=>this.reverse_?this.withinStartPost(t):this.withinEndPost(t),this.withinStartPost=t=>{const i=this.index_.compare(this.rangedFilter_.getStartPost(),t);return this.startIsInclusive_?i<=0:i<0},this.withinEndPost=t=>{const i=this.index_.compare(t,this.rangedFilter_.getEndPost());return this.endIsInclusive_?i<=0:i<0},this.rangedFilter_=new _a(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,t,i,o,l,c){return this.rangedFilter_.matches(new Re(t,i))||(i=ge.EMPTY_NODE),e.getImmediateChild(t).equals(i)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,i,o,l,c):this.fullLimitUpdateChild_(e,t,i,l,c)}updateFullNode(e,t,i){let o;if(t.isLeafNode()||t.isEmpty())o=ge.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<t.numChildren()&&t.isIndexed(this.index_)){o=ge.EMPTY_NODE.withIndex(this.index_);let l;this.reverse_?l=t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):l=t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let c=0;for(;l.hasNext()&&c<this.limit_;){const d=l.getNext();if(this.withinDirectionalStart(d))if(this.withinDirectionalEnd(d))o=o.updateImmediateChild(d.name,d.node),c++;else break;else continue}}else{o=t.withIndex(this.index_),o=o.updatePriority(ge.EMPTY_NODE);let l;this.reverse_?l=o.getReverseIterator(this.index_):l=o.getIterator(this.index_);let c=0;for(;l.hasNext();){const d=l.getNext();c<this.limit_&&this.withinDirectionalStart(d)&&this.withinDirectionalEnd(d)?c++:o=o.updateImmediateChild(d.name,ge.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,o,i)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,i,o,l){let c;if(this.reverse_){const w=this.index_.getCompare();c=(I,x)=>w(x,I)}else c=this.index_.getCompare();const d=e;J(d.numChildren()===this.limit_,"");const p=new Re(t,i),_=this.reverse_?d.getFirstChild(this.index_):d.getLastChild(this.index_),v=this.rangedFilter_.matches(p);if(d.hasChild(t)){const w=d.getImmediateChild(t);let I=o.getChildAfterChild(this.index_,_,this.reverse_);for(;I!=null&&(I.name===t||d.hasChild(I.name));)I=o.getChildAfterChild(this.index_,I,this.reverse_);const x=I==null?1:c(I,p);if(v&&!i.isEmpty()&&x>=0)return l!=null&&l.trackChildChange(ga(t,i,w)),d.updateImmediateChild(t,i);{l!=null&&l.trackChildChange(ma(t,w));const q=d.updateImmediateChild(t,ge.EMPTY_NODE);return I!=null&&this.rangedFilter_.matches(I)?(l!=null&&l.trackChildChange(Lo(I.name,I.node)),q.updateImmediateChild(I.name,I.node)):q}}else return i.isEmpty()?e:v&&c(_,p)>=0?(l!=null&&(l.trackChildChange(ma(_.name,_.node)),l.trackChildChange(Lo(t,i))),d.updateImmediateChild(t,i).updateImmediateChild(_.name,ge.EMPTY_NODE)):e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hp{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=lt}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return J(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return J(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Vo}hasEnd(){return this.endSet_}getIndexEndValue(){return J(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return J(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:ms}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return J(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===lt}copy(){const e=new hp;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function wC(n){return n.loadsAllData()?new cp(n.getIndex()):n.hasLimit()?new EC(n):new _a(n)}function ny(n){const e={};if(n.isDefault())return e;let t;if(n.index_===lt?t="$priority":n.index_===yC?t="$value":n.index_===Ao?t="$key":(J(n.index_ instanceof gC,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=Dt(t),n.startSet_){const i=n.startAfterSet_?"startAfter":"startAt";e[i]=Dt(n.indexStartValue_),n.startNameSet_&&(e[i]+=","+Dt(n.indexStartName_))}if(n.endSet_){const i=n.endBeforeSet_?"endBefore":"endAt";e[i]=Dt(n.indexEndValue_),n.endNameSet_&&(e[i]+=","+Dt(n.indexEndName_))}return n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function ry(n){const e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_),e.sin=!n.startAfterSet_),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_),e.ein=!n.endBeforeSet_),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;t===""&&(n.isViewFromLeft()?t="l":t="r"),e.vf=t}return n.index_!==lt&&(e.i=n.index_.toString()),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ac extends i0{reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return t!==void 0?"tag$"+t:(J(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}constructor(e,t,i,o){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=i,this.appCheckTokenProvider_=o,this.log_=Pa("p:rest:"),this.listens_={}}listen(e,t,i,o){const l=e._path.toString();this.log_("Listen called for "+l+" "+e._queryIdentifier);const c=Ac.getListenId_(e,i),d={};this.listens_[c]=d;const p=ny(e._queryParams);this.restRequest_(l+".json",p,(_,v)=>{let w=v;if(_===404&&(w=null,_=null),_===null&&this.onDataUpdate_(l,w,!1,i),xo(this.listens_,c)===d){let I;_?_===401?I="permission_denied":I="rest_error:"+_:I="ok",o(I,null)}})}unlisten(e,t){const i=Ac.getListenId_(e,t);delete this.listens_[i]}get(e){const t=ny(e._queryParams),i=e._path.toString(),o=new ep;return this.restRequest_(i+".json",t,(l,c)=>{let d=c;l===404&&(d=null,l=null),l===null?(this.onDataUpdate_(i,d,!1,null),o.resolve(d)):o.reject(new Error(d))}),o.promise}refreshAuthToken(e){}restRequest_(e,t={},i){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([o,l])=>{o&&o.accessToken&&(t.auth=o.accessToken),l&&l.token&&(t.ac=l.token);const c=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+XT(t);this.log_("Sending REST request for "+c);const d=new XMLHttpRequest;d.onreadystatechange=()=>{if(i&&d.readyState===4){this.log_("REST Response for "+c+" received. status:",d.status,"response:",d.responseText);let p=null;if(d.status>=200&&d.status<300){try{p=ha(d.responseText)}catch{Sn("Failed to parse JSON response for "+c+": "+d.responseText)}i(null,p)}else d.status!==401&&d.status!==404&&Sn("Got unsuccessful REST response for "+c+" Status: "+d.status),i(d.status);i=null}},d.open("GET",c,!0),d.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TC{constructor(){this.rootNode_=ge.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pc(){return{value:null,children:new Map}}function g0(n,e,t){if(Pe(e))n.value=t,n.children.clear();else if(n.value!==null)n.value=n.value.updateChild(e,t);else{const i=Ae(e);n.children.has(i)||n.children.set(i,Pc());const o=n.children.get(i);e=Ye(e),g0(o,e,t)}}function Af(n,e,t){n.value!==null?t(e,n.value):IC(n,(i,o)=>{const l=new $e(e.toString()+"/"+i);Af(o,l,t)})}function IC(n,e){n.children.forEach((t,i)=>{e(i,t)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CC{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&mn(this.last_,(i,o)=>{t[i]=t[i]-o}),this.last_=e,t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iy=10*1e3,SC=30*1e3,RC=5*60*1e3;class AC{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new CC(e);const i=iy+(SC-iy)*Math.random();ia(this.reportStats_.bind(this),Math.floor(i))}reportStats_(){const e=this.statsListener_.get(),t={};let i=!1;mn(e,(o,l)=>{l>0&&Hr(this.statsToReport_,o)&&(t[o]=l,i=!0)}),i&&this.server_.reportStats(t),ia(this.reportStats_.bind(this),Math.floor(Math.random()*2*RC))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Zn;(function(n){n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(Zn||(Zn={}));function _0(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function dp(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function fp(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kc{constructor(e,t,i){this.path=e,this.affectedTree=t,this.revert=i,this.type=Zn.ACK_USER_WRITE,this.source=_0()}operationForChild(e){if(Pe(this.path)){if(this.affectedTree.value!=null)return J(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new $e(e));return new kc(Be(),t,this.revert)}}else return J(Ae(this.path)===e,"operationForChild called for unrelated child."),new kc(Ye(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ya{constructor(e,t){this.source=e,this.path=t,this.type=Zn.LISTEN_COMPLETE}operationForChild(e){return Pe(this.path)?new ya(this.source,Be()):new ya(this.source,Ye(this.path))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gs{constructor(e,t,i){this.source=e,this.path=t,this.snap=i,this.type=Zn.OVERWRITE}operationForChild(e){return Pe(this.path)?new gs(this.source,Be(),this.snap.getImmediateChild(e)):new gs(this.source,Ye(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class va{constructor(e,t,i){this.source=e,this.path=t,this.children=i,this.type=Zn.MERGE}operationForChild(e){if(Pe(this.path)){const t=this.children.subtree(new $e(e));return t.isEmpty()?null:t.value?new gs(this.source,Be(),t.value):new va(this.source,Be(),t)}else return J(Ae(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new va(this.source,Ye(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _s{constructor(e,t,i){this.node_=e,this.fullyInitialized_=t,this.filtered_=i}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(Pe(e))return this.isFullyInitialized()&&!this.filtered_;const t=Ae(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PC{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function kC(n,e,t,i){const o=[],l=[];return e.forEach(c=>{c.type==="child_changed"&&n.index_.indexedValueChanged(c.oldSnap,c.snapshotNode)&&l.push(vC(c.childName,c.snapshotNode))}),Yl(n,o,"child_removed",e,i,t),Yl(n,o,"child_added",e,i,t),Yl(n,o,"child_moved",l,i,t),Yl(n,o,"child_changed",e,i,t),Yl(n,o,"value",e,i,t),o}function Yl(n,e,t,i,o,l){const c=i.filter(d=>d.type===t);c.sort((d,p)=>xC(n,d,p)),c.forEach(d=>{const p=NC(n,d,l);o.forEach(_=>{_.respondsTo(d.type)&&e.push(_.createEvent(p,n.query_))})})}function NC(n,e,t){return e.type==="value"||e.type==="child_removed"||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}function xC(n,e,t){if(e.childName==null||t.childName==null)throw Wo("Should only compare child_ events.");const i=new Re(e.childName,e.snapshotNode),o=new Re(t.childName,t.snapshotNode);return n.index_.compare(i,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kc(n,e){return{eventCache:n,serverCache:e}}function sa(n,e,t,i){return Kc(new _s(e,t,i),n.serverCache)}function y0(n,e,t,i){return Kc(n.eventCache,new _s(e,t,i))}function Pf(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function ys(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let af;const DC=()=>(af||(af=new pr(_I)),af);class et{static fromObject(e){let t=new et(null);return mn(e,(i,o)=>{t=t.set(new $e(i),o)}),t}constructor(e,t=DC()){this.value=e,this.children=t}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(this.value!=null&&t(this.value))return{path:Be(),value:this.value};if(Pe(e))return null;{const i=Ae(e),o=this.children.get(i);if(o!==null){const l=o.findRootMostMatchingPathAndValue(Ye(e),t);return l!=null?{path:Tt(new $e(i),l.path),value:l.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(Pe(e))return this;{const t=Ae(e),i=this.children.get(t);return i!==null?i.subtree(Ye(e)):new et(null)}}set(e,t){if(Pe(e))return new et(t,this.children);{const i=Ae(e),l=(this.children.get(i)||new et(null)).set(Ye(e),t),c=this.children.insert(i,l);return new et(this.value,c)}}remove(e){if(Pe(e))return this.children.isEmpty()?new et(null):new et(null,this.children);{const t=Ae(e),i=this.children.get(t);if(i){const o=i.remove(Ye(e));let l;return o.isEmpty()?l=this.children.remove(t):l=this.children.insert(t,o),this.value===null&&l.isEmpty()?new et(null):new et(this.value,l)}else return this}}get(e){if(Pe(e))return this.value;{const t=Ae(e),i=this.children.get(t);return i?i.get(Ye(e)):null}}setTree(e,t){if(Pe(e))return t;{const i=Ae(e),l=(this.children.get(i)||new et(null)).setTree(Ye(e),t);let c;return l.isEmpty()?c=this.children.remove(i):c=this.children.insert(i,l),new et(this.value,c)}}fold(e){return this.fold_(Be(),e)}fold_(e,t){const i={};return this.children.inorderTraversal((o,l)=>{i[o]=l.fold_(Tt(e,o),t)}),t(e,this.value,i)}findOnPath(e,t){return this.findOnPath_(e,Be(),t)}findOnPath_(e,t,i){const o=this.value?i(t,this.value):!1;if(o)return o;if(Pe(e))return null;{const l=Ae(e),c=this.children.get(l);return c?c.findOnPath_(Ye(e),Tt(t,l),i):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,Be(),t)}foreachOnPath_(e,t,i){if(Pe(e))return this;{this.value&&i(t,this.value);const o=Ae(e),l=this.children.get(o);return l?l.foreachOnPath_(Ye(e),Tt(t,o),i):new et(null)}}foreach(e){this.foreach_(Be(),e)}foreach_(e,t){this.children.inorderTraversal((i,o)=>{o.foreach_(Tt(e,i),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,i)=>{i.value&&e(t,i.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tr{constructor(e){this.writeTree_=e}static empty(){return new tr(new et(null))}}function oa(n,e,t){if(Pe(e))return new tr(new et(t));{const i=n.writeTree_.findRootMostValueAndPath(e);if(i!=null){const o=i.path;let l=i.value;const c=dn(o,e);return l=l.updateChild(c,t),new tr(n.writeTree_.set(o,l))}else{const o=new et(t),l=n.writeTree_.setTree(e,o);return new tr(l)}}}function sy(n,e,t){let i=n;return mn(t,(o,l)=>{i=oa(i,Tt(e,o),l)}),i}function oy(n,e){if(Pe(e))return tr.empty();{const t=n.writeTree_.setTree(e,new et(null));return new tr(t)}}function kf(n,e){return Es(n,e)!=null}function Es(n,e){const t=n.writeTree_.findRootMostValueAndPath(e);return t!=null?n.writeTree_.get(t.path).getChild(dn(t.path,e)):null}function ly(n){const e=[],t=n.writeTree_.value;return t!=null?t.isLeafNode()||t.forEachChild(lt,(i,o)=>{e.push(new Re(i,o))}):n.writeTree_.children.inorderTraversal((i,o)=>{o.value!=null&&e.push(new Re(i,o.value))}),e}function Ti(n,e){if(Pe(e))return n;{const t=Es(n,e);return t!=null?new tr(new et(t)):new tr(n.writeTree_.subtree(e))}}function Nf(n){return n.writeTree_.isEmpty()}function Oo(n,e){return v0(Be(),n.writeTree_,e)}function v0(n,e,t){if(e.value!=null)return t.updateChild(n,e.value);{let i=null;return e.children.inorderTraversal((o,l)=>{o===".priority"?(J(l.value!==null,"Priority writes must always be leaf nodes"),i=l.value):t=v0(Tt(n,o),l,t)}),!t.getChild(n).isEmpty()&&i!==null&&(t=t.updateChild(Tt(n,".priority"),i)),t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pp(n,e){return I0(e,n)}function VC(n,e,t,i,o){J(i>n.lastWriteId,"Stacking an older write on top of newer ones"),o===void 0&&(o=!0),n.allWrites.push({path:e,snap:t,writeId:i,visible:o}),o&&(n.visibleWrites=oa(n.visibleWrites,e,t)),n.lastWriteId=i}function LC(n,e){for(let t=0;t<n.allWrites.length;t++){const i=n.allWrites[t];if(i.writeId===e)return i}return null}function OC(n,e){const t=n.allWrites.findIndex(d=>d.writeId===e);J(t>=0,"removeWrite called with nonexistent writeId.");const i=n.allWrites[t];n.allWrites.splice(t,1);let o=i.visible,l=!1,c=n.allWrites.length-1;for(;o&&c>=0;){const d=n.allWrites[c];d.visible&&(c>=t&&MC(d,i.path)?o=!1:Jn(i.path,d.path)&&(l=!0)),c--}if(o){if(l)return FC(n),!0;if(i.snap)n.visibleWrites=oy(n.visibleWrites,i.path);else{const d=i.children;mn(d,p=>{n.visibleWrites=oy(n.visibleWrites,Tt(i.path,p))})}return!0}else return!1}function MC(n,e){if(n.snap)return Jn(n.path,e);for(const t in n.children)if(n.children.hasOwnProperty(t)&&Jn(Tt(n.path,t),e))return!0;return!1}function FC(n){n.visibleWrites=E0(n.allWrites,bC,Be()),n.allWrites.length>0?n.lastWriteId=n.allWrites[n.allWrites.length-1].writeId:n.lastWriteId=-1}function bC(n){return n.visible}function E0(n,e,t){let i=tr.empty();for(let o=0;o<n.length;++o){const l=n[o];if(e(l)){const c=l.path;let d;if(l.snap)Jn(t,c)?(d=dn(t,c),i=oa(i,d,l.snap)):Jn(c,t)&&(d=dn(c,t),i=oa(i,Be(),l.snap.getChild(d)));else if(l.children){if(Jn(t,c))d=dn(t,c),i=sy(i,d,l.children);else if(Jn(c,t))if(d=dn(c,t),Pe(d))i=sy(i,Be(),l.children);else{const p=xo(l.children,Ae(d));if(p){const _=p.getChild(Ye(d));i=oa(i,Be(),_)}}}else throw Wo("WriteRecord should have .snap or .children")}}return i}function w0(n,e,t,i,o){if(!i&&!o){const l=Es(n.visibleWrites,e);if(l!=null)return l;{const c=Ti(n.visibleWrites,e);if(Nf(c))return t;if(t==null&&!kf(c,Be()))return null;{const d=t||ge.EMPTY_NODE;return Oo(c,d)}}}else{const l=Ti(n.visibleWrites,e);if(!o&&Nf(l))return t;if(!o&&t==null&&!kf(l,Be()))return null;{const c=function(_){return(_.visible||o)&&(!i||!~i.indexOf(_.writeId))&&(Jn(_.path,e)||Jn(e,_.path))},d=E0(n.allWrites,c,e),p=t||ge.EMPTY_NODE;return Oo(d,p)}}}function UC(n,e,t){let i=ge.EMPTY_NODE;const o=Es(n.visibleWrites,e);if(o)return o.isLeafNode()||o.forEachChild(lt,(l,c)=>{i=i.updateImmediateChild(l,c)}),i;if(t){const l=Ti(n.visibleWrites,e);return t.forEachChild(lt,(c,d)=>{const p=Oo(Ti(l,new $e(c)),d);i=i.updateImmediateChild(c,p)}),ly(l).forEach(c=>{i=i.updateImmediateChild(c.name,c.node)}),i}else{const l=Ti(n.visibleWrites,e);return ly(l).forEach(c=>{i=i.updateImmediateChild(c.name,c.node)}),i}}function jC(n,e,t,i,o){J(i||o,"Either existingEventSnap or existingServerSnap must exist");const l=Tt(e,t);if(kf(n.visibleWrites,l))return null;{const c=Ti(n.visibleWrites,l);return Nf(c)?o.getChild(t):Oo(c,o.getChild(t))}}function BC(n,e,t,i){const o=Tt(e,t),l=Es(n.visibleWrites,o);if(l!=null)return l;if(i.isCompleteForChild(t)){const c=Ti(n.visibleWrites,o);return Oo(c,i.getNode().getImmediateChild(t))}else return null}function zC(n,e){return Es(n.visibleWrites,e)}function qC(n,e,t,i,o,l,c){let d;const p=Ti(n.visibleWrites,e),_=Es(p,Be());if(_!=null)d=_;else if(t!=null)d=Oo(p,t);else return[];if(d=d.withIndex(c),!d.isEmpty()&&!d.isLeafNode()){const v=[],w=c.getCompare(),I=l?d.getReverseIteratorFrom(i,c):d.getIteratorFrom(i,c);let x=I.getNext();for(;x&&v.length<o;)w(x,i)!==0&&v.push(x),x=I.getNext();return v}else return[]}function WC(){return{visibleWrites:tr.empty(),allWrites:[],lastWriteId:-1}}function Nc(n,e,t,i){return w0(n.writeTree,n.treePath,e,t,i)}function mp(n,e){return UC(n.writeTree,n.treePath,e)}function ay(n,e,t,i){return jC(n.writeTree,n.treePath,e,t,i)}function xc(n,e){return zC(n.writeTree,Tt(n.treePath,e))}function HC(n,e,t,i,o,l){return qC(n.writeTree,n.treePath,e,t,i,o,l)}function gp(n,e,t){return BC(n.writeTree,n.treePath,e,t)}function T0(n,e){return I0(Tt(n.treePath,e),n.writeTree)}function I0(n,e){return{treePath:n,writeTree:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $C{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,i=e.childName;J(t==="child_added"||t==="child_changed"||t==="child_removed","Only child changes supported for tracking"),J(i!==".priority","Only non-priority child changes can be tracked.");const o=this.changeMap.get(i);if(o){const l=o.type;if(t==="child_added"&&l==="child_removed")this.changeMap.set(i,ga(i,e.snapshotNode,o.snapshotNode));else if(t==="child_removed"&&l==="child_added")this.changeMap.delete(i);else if(t==="child_removed"&&l==="child_changed")this.changeMap.set(i,ma(i,o.oldSnap));else if(t==="child_changed"&&l==="child_added")this.changeMap.set(i,Lo(i,e.snapshotNode));else if(t==="child_changed"&&l==="child_changed")this.changeMap.set(i,ga(i,e.snapshotNode,o.oldSnap));else throw Wo("Illegal combination of changes: "+e+" occurred after "+o)}else this.changeMap.set(i,e)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GC{getCompleteChild(e){return null}getChildAfterChild(e,t,i){return null}}const C0=new GC;class _p{constructor(e,t,i=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=i}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const i=this.optCompleteServerCache_!=null?new _s(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return gp(this.writes_,e,i)}}getChildAfterChild(e,t,i){const o=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:ys(this.viewCache_),l=HC(this.writes_,o,t,1,i,e);return l.length===0?null:l[0]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QC(n){return{filter:n}}function KC(n,e){J(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),J(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}function YC(n,e,t,i,o){const l=new $C;let c,d;if(t.type===Zn.OVERWRITE){const _=t;_.source.fromUser?c=xf(n,e,_.path,_.snap,i,o,l):(J(_.source.fromServer,"Unknown source."),d=_.source.tagged||e.serverCache.isFiltered()&&!Pe(_.path),c=Dc(n,e,_.path,_.snap,i,o,d,l))}else if(t.type===Zn.MERGE){const _=t;_.source.fromUser?c=JC(n,e,_.path,_.children,i,o,l):(J(_.source.fromServer,"Unknown source."),d=_.source.tagged||e.serverCache.isFiltered(),c=Df(n,e,_.path,_.children,i,o,d,l))}else if(t.type===Zn.ACK_USER_WRITE){const _=t;_.revert?c=tS(n,e,_.path,i,o,l):c=ZC(n,e,_.path,_.affectedTree,i,o,l)}else if(t.type===Zn.LISTEN_COMPLETE)c=eS(n,e,t.path,i,l);else throw Wo("Unknown operation type: "+t.type);const p=l.getChanges();return XC(e,c,p),{viewCache:c,changes:p}}function XC(n,e,t){const i=e.eventCache;if(i.isFullyInitialized()){const o=i.getNode().isLeafNode()||i.getNode().isEmpty(),l=Pf(n);(t.length>0||!n.eventCache.isFullyInitialized()||o&&!i.getNode().equals(l)||!i.getNode().getPriority().equals(l.getPriority()))&&t.push(m0(Pf(e)))}}function S0(n,e,t,i,o,l){const c=e.eventCache;if(xc(i,t)!=null)return e;{let d,p;if(Pe(t))if(J(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const _=ys(e),v=_ instanceof ge?_:ge.EMPTY_NODE,w=mp(i,v);d=n.filter.updateFullNode(e.eventCache.getNode(),w,l)}else{const _=Nc(i,ys(e));d=n.filter.updateFullNode(e.eventCache.getNode(),_,l)}else{const _=Ae(t);if(_===".priority"){J(Ci(t)===1,"Can't have a priority with additional path components");const v=c.getNode();p=e.serverCache.getNode();const w=ay(i,t,v,p);w!=null?d=n.filter.updatePriority(v,w):d=c.getNode()}else{const v=Ye(t);let w;if(c.isCompleteForChild(_)){p=e.serverCache.getNode();const I=ay(i,t,c.getNode(),p);I!=null?w=c.getNode().getImmediateChild(_).updateChild(v,I):w=c.getNode().getImmediateChild(_)}else w=gp(i,_,e.serverCache);w!=null?d=n.filter.updateChild(c.getNode(),_,w,v,o,l):d=c.getNode()}}return sa(e,d,c.isFullyInitialized()||Pe(t),n.filter.filtersNodes())}}function Dc(n,e,t,i,o,l,c,d){const p=e.serverCache;let _;const v=c?n.filter:n.filter.getIndexedFilter();if(Pe(t))_=v.updateFullNode(p.getNode(),i,null);else if(v.filtersNodes()&&!p.isFiltered()){const x=p.getNode().updateChild(t,i);_=v.updateFullNode(p.getNode(),x,null)}else{const x=Ae(t);if(!p.isCompleteForPath(t)&&Ci(t)>1)return e;const U=Ye(t),z=p.getNode().getImmediateChild(x).updateChild(U,i);x===".priority"?_=v.updatePriority(p.getNode(),z):_=v.updateChild(p.getNode(),x,z,U,C0,null)}const w=y0(e,_,p.isFullyInitialized()||Pe(t),v.filtersNodes()),I=new _p(o,w,l);return S0(n,w,t,o,I,d)}function xf(n,e,t,i,o,l,c){const d=e.eventCache;let p,_;const v=new _p(o,e,l);if(Pe(t))_=n.filter.updateFullNode(e.eventCache.getNode(),i,c),p=sa(e,_,!0,n.filter.filtersNodes());else{const w=Ae(t);if(w===".priority")_=n.filter.updatePriority(e.eventCache.getNode(),i),p=sa(e,_,d.isFullyInitialized(),d.isFiltered());else{const I=Ye(t),x=d.getNode().getImmediateChild(w);let U;if(Pe(I))U=i;else{const q=v.getCompleteChild(w);q!=null?o0(I)===".priority"&&q.getChild(a0(I)).isEmpty()?U=q:U=q.updateChild(I,i):U=ge.EMPTY_NODE}if(x.equals(U))p=e;else{const q=n.filter.updateChild(d.getNode(),w,U,I,v,c);p=sa(e,q,d.isFullyInitialized(),n.filter.filtersNodes())}}}return p}function uy(n,e){return n.eventCache.isCompleteForChild(e)}function JC(n,e,t,i,o,l,c){let d=e;return i.foreach((p,_)=>{const v=Tt(t,p);uy(e,Ae(v))&&(d=xf(n,d,v,_,o,l,c))}),i.foreach((p,_)=>{const v=Tt(t,p);uy(e,Ae(v))||(d=xf(n,d,v,_,o,l,c))}),d}function cy(n,e,t){return t.foreach((i,o)=>{e=e.updateChild(i,o)}),e}function Df(n,e,t,i,o,l,c,d){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let p=e,_;Pe(t)?_=i:_=new et(null).setTree(t,i);const v=e.serverCache.getNode();return _.children.inorderTraversal((w,I)=>{if(v.hasChild(w)){const x=e.serverCache.getNode().getImmediateChild(w),U=cy(n,x,I);p=Dc(n,p,new $e(w),U,o,l,c,d)}}),_.children.inorderTraversal((w,I)=>{const x=!e.serverCache.isCompleteForChild(w)&&I.value===null;if(!v.hasChild(w)&&!x){const U=e.serverCache.getNode().getImmediateChild(w),q=cy(n,U,I);p=Dc(n,p,new $e(w),q,o,l,c,d)}}),p}function ZC(n,e,t,i,o,l,c){if(xc(o,t)!=null)return e;const d=e.serverCache.isFiltered(),p=e.serverCache;if(i.value!=null){if(Pe(t)&&p.isFullyInitialized()||p.isCompleteForPath(t))return Dc(n,e,t,p.getNode().getChild(t),o,l,d,c);if(Pe(t)){let _=new et(null);return p.getNode().forEachChild(Ao,(v,w)=>{_=_.set(new $e(v),w)}),Df(n,e,t,_,o,l,d,c)}else return e}else{let _=new et(null);return i.foreach((v,w)=>{const I=Tt(t,v);p.isCompleteForPath(I)&&(_=_.set(v,p.getNode().getChild(I)))}),Df(n,e,t,_,o,l,d,c)}}function eS(n,e,t,i,o){const l=e.serverCache,c=y0(e,l.getNode(),l.isFullyInitialized()||Pe(t),l.isFiltered());return S0(n,c,t,i,C0,o)}function tS(n,e,t,i,o,l){let c;if(xc(i,t)!=null)return e;{const d=new _p(i,e,o),p=e.eventCache.getNode();let _;if(Pe(t)||Ae(t)===".priority"){let v;if(e.serverCache.isFullyInitialized())v=Nc(i,ys(e));else{const w=e.serverCache.getNode();J(w instanceof ge,"serverChildren would be complete if leaf node"),v=mp(i,w)}v=v,_=n.filter.updateFullNode(p,v,l)}else{const v=Ae(t);let w=gp(i,v,e.serverCache);w==null&&e.serverCache.isCompleteForChild(v)&&(w=p.getImmediateChild(v)),w!=null?_=n.filter.updateChild(p,v,w,Ye(t),d,l):e.eventCache.getNode().hasChild(v)?_=n.filter.updateChild(p,v,ge.EMPTY_NODE,Ye(t),d,l):_=p,_.isEmpty()&&e.serverCache.isFullyInitialized()&&(c=Nc(i,ys(e)),c.isLeafNode()&&(_=n.filter.updateFullNode(_,c,l)))}return c=e.serverCache.isFullyInitialized()||xc(i,Be())!=null,sa(e,_,c,n.filter.filtersNodes())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nS{constructor(e,t){this.query_=e,this.eventRegistrations_=[];const i=this.query_._queryParams,o=new cp(i.getIndex()),l=wC(i);this.processor_=QC(l);const c=t.serverCache,d=t.eventCache,p=o.updateFullNode(ge.EMPTY_NODE,c.getNode(),null),_=l.updateFullNode(ge.EMPTY_NODE,d.getNode(),null),v=new _s(p,c.isFullyInitialized(),o.filtersNodes()),w=new _s(_,d.isFullyInitialized(),l.filtersNodes());this.viewCache_=Kc(w,v),this.eventGenerator_=new PC(this.query_)}get query(){return this.query_}}function rS(n){return n.viewCache_.serverCache.getNode()}function iS(n,e){const t=ys(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!Pe(e)&&!t.getImmediateChild(Ae(e)).isEmpty())?t.getChild(e):null}function hy(n){return n.eventRegistrations_.length===0}function sS(n,e){n.eventRegistrations_.push(e)}function dy(n,e,t){const i=[];if(t){J(e==null,"A cancel should cancel all event registrations.");const o=n.query._path;n.eventRegistrations_.forEach(l=>{const c=l.createCancelEvent(t,o);c&&i.push(c)})}if(e){let o=[];for(let l=0;l<n.eventRegistrations_.length;++l){const c=n.eventRegistrations_[l];if(!c.matches(e))o.push(c);else if(e.hasAnyCallback()){o=o.concat(n.eventRegistrations_.slice(l+1));break}}n.eventRegistrations_=o}else n.eventRegistrations_=[];return i}function fy(n,e,t,i){e.type===Zn.MERGE&&e.source.queryId!==null&&(J(ys(n.viewCache_),"We should always have a full cache before handling merges"),J(Pf(n.viewCache_),"Missing event cache, even though we have a server cache"));const o=n.viewCache_,l=YC(n.processor_,o,e,t,i);return KC(n.processor_,l.viewCache),J(l.viewCache.serverCache.isFullyInitialized()||!o.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=l.viewCache,R0(n,l.changes,l.viewCache.eventCache.getNode(),null)}function oS(n,e){const t=n.viewCache_.eventCache,i=[];return t.getNode().isLeafNode()||t.getNode().forEachChild(lt,(l,c)=>{i.push(Lo(l,c))}),t.isFullyInitialized()&&i.push(m0(t.getNode())),R0(n,i,t.getNode(),e)}function R0(n,e,t,i){const o=i?[i]:n.eventRegistrations_;return kC(n.eventGenerator_,e,t,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Vc;class lS{constructor(){this.views=new Map}}function aS(n){J(!Vc,"__referenceConstructor has already been defined"),Vc=n}function uS(){return J(Vc,"Reference.ts has not been loaded"),Vc}function cS(n){return n.views.size===0}function yp(n,e,t,i){const o=e.source.queryId;if(o!==null){const l=n.views.get(o);return J(l!=null,"SyncTree gave us an op for an invalid query."),fy(l,e,t,i)}else{let l=[];for(const c of n.views.values())l=l.concat(fy(c,e,t,i));return l}}function hS(n,e,t,i,o){const l=e._queryIdentifier,c=n.views.get(l);if(!c){let d=Nc(t,o?i:null),p=!1;d?p=!0:i instanceof ge?(d=mp(t,i),p=!1):(d=ge.EMPTY_NODE,p=!1);const _=Kc(new _s(d,p,!1),new _s(i,o,!1));return new nS(e,_)}return c}function dS(n,e,t,i,o,l){const c=hS(n,e,i,o,l);return n.views.has(e._queryIdentifier)||n.views.set(e._queryIdentifier,c),sS(c,t),oS(c,t)}function fS(n,e,t,i){const o=e._queryIdentifier,l=[];let c=[];const d=Si(n);if(o==="default")for(const[p,_]of n.views.entries())c=c.concat(dy(_,t,i)),hy(_)&&(n.views.delete(p),_.query._queryParams.loadsAllData()||l.push(_.query));else{const p=n.views.get(o);p&&(c=c.concat(dy(p,t,i)),hy(p)&&(n.views.delete(o),p.query._queryParams.loadsAllData()||l.push(p.query)))}return d&&!Si(n)&&l.push(new(uS())(e._repo,e._path)),{removed:l,events:c}}function A0(n){const e=[];for(const t of n.views.values())t.query._queryParams.loadsAllData()||e.push(t);return e}function Po(n,e){let t=null;for(const i of n.views.values())t=t||iS(i,e);return t}function P0(n,e){if(e._queryParams.loadsAllData())return Yc(n);{const i=e._queryIdentifier;return n.views.get(i)}}function k0(n,e){return P0(n,e)!=null}function Si(n){return Yc(n)!=null}function Yc(n){for(const e of n.views.values())if(e.query._queryParams.loadsAllData())return e;return null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Lc;function pS(n){J(!Lc,"__referenceConstructor has already been defined"),Lc=n}function mS(){return J(Lc,"Reference.ts has not been loaded"),Lc}let gS=1;class py{constructor(e){this.listenProvider_=e,this.syncPointTree_=new et(null),this.pendingWriteTree_=WC(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function _S(n,e,t,i,o){return VC(n.pendingWriteTree_,e,t,i,o),o?xa(n,new gs(_0(),e,t)):[]}function Io(n,e,t=!1){const i=LC(n.pendingWriteTree_,e);if(OC(n.pendingWriteTree_,e)){let l=new et(null);return i.snap!=null?l=l.set(Be(),!0):mn(i.children,c=>{l=l.set(new $e(c),!0)}),xa(n,new kc(i.path,l,t))}else return[]}function Xc(n,e,t){return xa(n,new gs(dp(),e,t))}function yS(n,e,t){const i=et.fromObject(t);return xa(n,new va(dp(),e,i))}function vS(n,e){return xa(n,new ya(dp(),e))}function ES(n,e,t){const i=vp(n,t);if(i){const o=Ep(i),l=o.path,c=o.queryId,d=dn(l,e),p=new ya(fp(c),d);return wp(n,l,p)}else return[]}function Vf(n,e,t,i,o=!1){const l=e._path,c=n.syncPointTree_.get(l);let d=[];if(c&&(e._queryIdentifier==="default"||k0(c,e))){const p=fS(c,e,t,i);cS(c)&&(n.syncPointTree_=n.syncPointTree_.remove(l));const _=p.removed;if(d=p.events,!o){const v=_.findIndex(I=>I._queryParams.loadsAllData())!==-1,w=n.syncPointTree_.findOnPath(l,(I,x)=>Si(x));if(v&&!w){const I=n.syncPointTree_.subtree(l);if(!I.isEmpty()){const x=IS(I);for(let U=0;U<x.length;++U){const q=x[U],z=q.query,ae=V0(n,q);n.listenProvider_.startListening(la(z),Oc(n,z),ae.hashFn,ae.onComplete)}}}!w&&_.length>0&&!i&&(v?n.listenProvider_.stopListening(la(e),null):_.forEach(I=>{const x=n.queryToTagMap.get(Jc(I));n.listenProvider_.stopListening(la(I),x)}))}CS(n,_)}return d}function wS(n,e,t,i){const o=vp(n,i);if(o!=null){const l=Ep(o),c=l.path,d=l.queryId,p=dn(c,e),_=new gs(fp(d),p,t);return wp(n,c,_)}else return[]}function TS(n,e,t,i){const o=vp(n,i);if(o){const l=Ep(o),c=l.path,d=l.queryId,p=dn(c,e),_=et.fromObject(t),v=new va(fp(d),p,_);return wp(n,c,v)}else return[]}function my(n,e,t,i=!1){const o=e._path;let l=null,c=!1;n.syncPointTree_.foreachOnPath(o,(I,x)=>{const U=dn(I,o);l=l||Po(x,U),c=c||Si(x)});let d=n.syncPointTree_.get(o);d?(c=c||Si(d),l=l||Po(d,Be())):(d=new lS,n.syncPointTree_=n.syncPointTree_.set(o,d));let p;l!=null?p=!0:(p=!1,l=ge.EMPTY_NODE,n.syncPointTree_.subtree(o).foreachChild((x,U)=>{const q=Po(U,Be());q&&(l=l.updateImmediateChild(x,q))}));const _=k0(d,e);if(!_&&!e._queryParams.loadsAllData()){const I=Jc(e);J(!n.queryToTagMap.has(I),"View does not exist, but we have a tag");const x=SS();n.queryToTagMap.set(I,x),n.tagToQueryMap.set(x,I)}const v=pp(n.pendingWriteTree_,o);let w=dS(d,e,t,v,l,p);if(!_&&!c&&!i){const I=P0(d,e);w=w.concat(RS(n,e,I))}return w}function N0(n,e,t){const o=n.pendingWriteTree_,l=n.syncPointTree_.findOnPath(e,(c,d)=>{const p=dn(c,e),_=Po(d,p);if(_)return _});return w0(o,e,l,t,!0)}function xa(n,e){return x0(e,n.syncPointTree_,null,pp(n.pendingWriteTree_,Be()))}function x0(n,e,t,i){if(Pe(n.path))return D0(n,e,t,i);{const o=e.get(Be());t==null&&o!=null&&(t=Po(o,Be()));let l=[];const c=Ae(n.path),d=n.operationForChild(c),p=e.children.get(c);if(p&&d){const _=t?t.getImmediateChild(c):null,v=T0(i,c);l=l.concat(x0(d,p,_,v))}return o&&(l=l.concat(yp(o,n,i,t))),l}}function D0(n,e,t,i){const o=e.get(Be());t==null&&o!=null&&(t=Po(o,Be()));let l=[];return e.children.inorderTraversal((c,d)=>{const p=t?t.getImmediateChild(c):null,_=T0(i,c),v=n.operationForChild(c);v&&(l=l.concat(D0(v,d,p,_)))}),o&&(l=l.concat(yp(o,n,i,t))),l}function V0(n,e){const t=e.query,i=Oc(n,t);return{hashFn:()=>(rS(e)||ge.EMPTY_NODE).hash(),onComplete:o=>{if(o==="ok")return i?ES(n,t._path,i):vS(n,t._path);{const l=EI(o,t);return Vf(n,t,null,l)}}}}function Oc(n,e){const t=Jc(e);return n.queryToTagMap.get(t)}function Jc(n){return n._path.toString()+"$"+n._queryIdentifier}function vp(n,e){return n.tagToQueryMap.get(e)}function Ep(n){const e=n.indexOf("$");return J(e!==-1&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new $e(n.substr(0,e))}}function wp(n,e,t){const i=n.syncPointTree_.get(e);J(i,"Missing sync point for query tag that we're tracking");const o=pp(n.pendingWriteTree_,e);return yp(i,t,o,null)}function IS(n){return n.fold((e,t,i)=>{if(t&&Si(t))return[Yc(t)];{let o=[];return t&&(o=A0(t)),mn(i,(l,c)=>{o=o.concat(c)}),o}})}function la(n){return n._queryParams.loadsAllData()&&!n._queryParams.isDefault()?new(mS())(n._repo,n._path):n}function CS(n,e){for(let t=0;t<e.length;++t){const i=e[t];if(!i._queryParams.loadsAllData()){const o=Jc(i),l=n.queryToTagMap.get(o);n.queryToTagMap.delete(o),n.tagToQueryMap.delete(l)}}}function SS(){return gS++}function RS(n,e,t){const i=e._path,o=Oc(n,e),l=V0(n,t),c=n.listenProvider_.startListening(la(e),o,l.hashFn,l.onComplete),d=n.syncPointTree_.subtree(i);if(o)J(!Si(d.value),"If we're adding a query, it shouldn't be shadowed");else{const p=d.fold((_,v,w)=>{if(!Pe(_)&&v&&Si(v))return[Yc(v).query];{let I=[];return v&&(I=I.concat(A0(v).map(x=>x.query))),mn(w,(x,U)=>{I=I.concat(U)}),I}});for(let _=0;_<p.length;++_){const v=p[_];n.listenProvider_.stopListening(la(v),Oc(n,v))}}return c}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tp{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new Tp(t)}node(){return this.node_}}class Ip{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=Tt(this.path_,e);return new Ip(this.syncTree_,t)}node(){return N0(this.syncTree_,this.path_)}}const AS=function(n){return n=n||{},n.timestamp=n.timestamp||new Date().getTime(),n},gy=function(n,e,t){if(!n||typeof n!="object")return n;if(J(".sv"in n,"Unexpected leaf node or priority contents"),typeof n[".sv"]=="string")return PS(n[".sv"],e,t);if(typeof n[".sv"]=="object")return kS(n[".sv"],e);J(!1,"Unexpected server value: "+JSON.stringify(n,null,2))},PS=function(n,e,t){switch(n){case"timestamp":return t.timestamp;default:J(!1,"Unexpected server value: "+n)}},kS=function(n,e,t){n.hasOwnProperty("increment")||J(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const i=n.increment;typeof i!="number"&&J(!1,"Unexpected increment value: "+i);const o=e.node();if(J(o!==null&&typeof o<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!o.isLeafNode())return i;const c=o.getValue();return typeof c!="number"?i:c+i},NS=function(n,e,t,i){return Cp(e,new Ip(t,n),i)},xS=function(n,e,t){return Cp(n,new Tp(e),t)};function Cp(n,e,t){const i=n.getPriority().val(),o=gy(i,e.getImmediateChild(".priority"),t);let l;if(n.isLeafNode()){const c=n,d=gy(c.getValue(),e,t);return d!==c.getValue()||o!==c.getPriority().val()?new Nt(d,Yt(o)):n}else{const c=n;return l=c,o!==c.getPriority().val()&&(l=l.updatePriority(new Nt(o))),c.forEachChild(lt,(d,p)=>{const _=Cp(p,e.getImmediateChild(d),t);_!==p&&(l=l.updateImmediateChild(d,_))}),l}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sp{constructor(e="",t=null,i={children:{},childCount:0}){this.name=e,this.parent=t,this.node=i}}function Rp(n,e){let t=e instanceof $e?e:new $e(e),i=n,o=Ae(t);for(;o!==null;){const l=xo(i.node.children,o)||{children:{},childCount:0};i=new Sp(o,i,l),t=Ye(t),o=Ae(t)}return i}function Go(n){return n.node.value}function L0(n,e){n.node.value=e,Lf(n)}function O0(n){return n.node.childCount>0}function DS(n){return Go(n)===void 0&&!O0(n)}function Zc(n,e){mn(n.node.children,(t,i)=>{e(new Sp(t,n,i))})}function M0(n,e,t,i){t&&!i&&e(n),Zc(n,o=>{M0(o,e,!0,i)}),t&&i&&e(n)}function VS(n,e,t){let i=n.parent;for(;i!==null;){if(e(i))return!0;i=i.parent}return!1}function Da(n){return new $e(n.parent===null?n.name:Da(n.parent)+"/"+n.name)}function Lf(n){n.parent!==null&&LS(n.parent,n.name,n)}function LS(n,e,t){const i=DS(t),o=Hr(n.node.children,e);i&&o?(delete n.node.children[e],n.node.childCount--,Lf(n)):!i&&!o&&(n.node.children[e]=t.node,n.node.childCount++,Lf(n))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OS=/[\[\].#$\/\u0000-\u001F\u007F]/,MS=/[\[\].#$\u0000-\u001F\u007F]/,uf=10*1024*1024,F0=function(n){return typeof n=="string"&&n.length!==0&&!OS.test(n)},b0=function(n){return typeof n=="string"&&n.length!==0&&!MS.test(n)},FS=function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),b0(n)},U0=function(n,e,t){const i=t instanceof $e?new ZI(t,n):t;if(e===void 0)throw new Error(n+"contains undefined "+cs(i));if(typeof e=="function")throw new Error(n+"contains a function "+cs(i)+" with contents = "+e.toString());if(Uv(e))throw new Error(n+"contains "+e.toString()+" "+cs(i));if(typeof e=="string"&&e.length>uf/3&&Gc(e)>uf)throw new Error(n+"contains a string greater than "+uf+" utf8 bytes "+cs(i)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let o=!1,l=!1;if(mn(e,(c,d)=>{if(c===".value")o=!0;else if(c!==".priority"&&c!==".sv"&&(l=!0,!F0(c)))throw new Error(n+" contains an invalid key ("+c+") "+cs(i)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);eC(i,c),U0(n,d,i),tC(i)}),o&&l)throw new Error(n+' contains ".value" child '+cs(i)+" in addition to actual children.")}},j0=function(n,e,t,i){if(!b0(t))throw new Error(Av(n,e)+'was an invalid path = "'+t+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},bS=function(n,e,t,i){t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),j0(n,e,t)},US=function(n,e){const t=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!F0(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||t.length!==0&&!FS(t))throw new Error(Av(n,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jS{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function B0(n,e){let t=null;for(let i=0;i<e.length;i++){const o=e[i],l=o.getPath();t!==null&&!lp(l,t.path)&&(n.eventLists_.push(t),t=null),t===null&&(t={events:[],path:l}),t.events.push(o)}t&&n.eventLists_.push(t)}function z0(n,e,t){B0(n,t),q0(n,i=>lp(i,e))}function ws(n,e,t){B0(n,t),q0(n,i=>Jn(i,e)||Jn(e,i))}function q0(n,e){n.recursionDepth_++;let t=!0;for(let i=0;i<n.eventLists_.length;i++){const o=n.eventLists_[i];if(o){const l=o.path;e(l)?(BS(n.eventLists_[i]),n.eventLists_[i]=null):t=!1}}t&&(n.eventLists_=[]),n.recursionDepth_--}function BS(n){for(let e=0;e<n.events.length;e++){const t=n.events[e];if(t!==null){n.events[e]=null;const i=t.getEventRunner();ra&&Kt("event: "+t.toString()),ka(i)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zS="repo_interrupt",qS=25;class WS{constructor(e,t,i,o){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=i,this.appCheckProvider_=o,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new jS,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Pc(),this.transactionQueueTree_=new Sp,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function HS(n,e,t){if(n.stats_=sp(n.repoInfo_),n.forceRestClient_||CI())n.server_=new Ac(n.repoInfo_,(i,o,l,c)=>{_y(n,i,o,l,c)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>yy(n,!0),0);else{if(typeof t<"u"&&t!==null){if(typeof t!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Dt(t)}catch(i){throw new Error("Invalid authOverride provided: "+i)}}n.persistentConnection_=new Ur(n.repoInfo_,e,(i,o,l,c)=>{_y(n,i,o,l,c)},i=>{yy(n,i)},i=>{GS(n,i)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(i=>{n.server_.refreshAuthToken(i)}),n.appCheckProvider_.addTokenChangeListener(i=>{n.server_.refreshAppCheckToken(i.token)}),n.statsReporter_=kI(n.repoInfo_,()=>new AC(n.stats_,n.server_)),n.infoData_=new TC,n.infoSyncTree_=new py({startListening:(i,o,l,c)=>{let d=[];const p=n.infoData_.getNode(i._path);return p.isEmpty()||(d=Xc(n.infoSyncTree_,i._path,p),setTimeout(()=>{c("ok")},0)),d},stopListening:()=>{}}),Ap(n,"connected",!1),n.serverSyncTree_=new py({startListening:(i,o,l,c)=>(n.server_.listen(i,l,o,(d,p)=>{const _=c(d,p);ws(n.eventQueue_,i._path,_)}),[]),stopListening:(i,o)=>{n.server_.unlisten(i,o)}})}function $S(n){const t=n.infoData_.getNode(new $e(".info/serverTimeOffset")).val()||0;return new Date().getTime()+t}function W0(n){return AS({timestamp:$S(n)})}function _y(n,e,t,i,o){n.dataUpdateCount++;const l=new $e(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let c=[];if(o)if(i){const p=Tc(t,_=>Yt(_));c=TS(n.serverSyncTree_,l,p,o)}else{const p=Yt(t);c=wS(n.serverSyncTree_,l,p,o)}else if(i){const p=Tc(t,_=>Yt(_));c=yS(n.serverSyncTree_,l,p)}else{const p=Yt(t);c=Xc(n.serverSyncTree_,l,p)}let d=l;c.length>0&&(d=kp(n,l)),ws(n.eventQueue_,d,c)}function yy(n,e){Ap(n,"connected",e),e===!1&&KS(n)}function GS(n,e){mn(e,(t,i)=>{Ap(n,t,i)})}function Ap(n,e,t){const i=new $e("/.info/"+e),o=Yt(t);n.infoData_.updateSnapshot(i,o);const l=Xc(n.infoSyncTree_,i,o);ws(n.eventQueue_,i,l)}function QS(n){return n.nextWriteId_++}function KS(n){H0(n,"onDisconnectEvents");const e=W0(n),t=Pc();Af(n.onDisconnect_,Be(),(o,l)=>{const c=NS(o,l,n.serverSyncTree_,e);g0(t,o,c)});let i=[];Af(t,Be(),(o,l)=>{i=i.concat(Xc(n.serverSyncTree_,o,l));const c=tR(n,o);kp(n,c)}),n.onDisconnect_=Pc(),ws(n.eventQueue_,Be(),i)}function YS(n,e,t){let i;Ae(e._path)===".info"?i=my(n.infoSyncTree_,e,t):i=my(n.serverSyncTree_,e,t),z0(n.eventQueue_,e._path,i)}function XS(n,e,t){let i;Ae(e._path)===".info"?i=Vf(n.infoSyncTree_,e,t):i=Vf(n.serverSyncTree_,e,t),z0(n.eventQueue_,e._path,i)}function JS(n){n.persistentConnection_&&n.persistentConnection_.interrupt(zS)}function H0(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),Kt(t,...e)}function $0(n,e,t){return N0(n.serverSyncTree_,e,t)||ge.EMPTY_NODE}function Pp(n,e=n.transactionQueueTree_){if(e||eh(n,e),Go(e)){const t=Q0(n,e);J(t.length>0,"Sending zero length transaction queue"),t.every(o=>o.status===0)&&ZS(n,Da(e),t)}else O0(e)&&Zc(e,t=>{Pp(n,t)})}function ZS(n,e,t){const i=t.map(_=>_.currentWriteId),o=$0(n,e,i);let l=o;const c=o.hash();for(let _=0;_<t.length;_++){const v=t[_];J(v.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),v.status=1,v.retryCount++;const w=dn(e,v.path);l=l.updateChild(w,v.currentOutputSnapshotRaw)}const d=l.val(!0),p=e;n.server_.put(p.toString(),d,_=>{H0(n,"transaction put response",{path:p.toString(),status:_});let v=[];if(_==="ok"){const w=[];for(let I=0;I<t.length;I++)t[I].status=2,v=v.concat(Io(n.serverSyncTree_,t[I].currentWriteId)),t[I].onComplete&&w.push(()=>t[I].onComplete(null,!0,t[I].currentOutputSnapshotResolved)),t[I].unwatcher();eh(n,Rp(n.transactionQueueTree_,e)),Pp(n,n.transactionQueueTree_),ws(n.eventQueue_,e,v);for(let I=0;I<w.length;I++)ka(w[I])}else{if(_==="datastale")for(let w=0;w<t.length;w++)t[w].status===3?t[w].status=4:t[w].status=0;else{Sn("transaction at "+p.toString()+" failed: "+_);for(let w=0;w<t.length;w++)t[w].status=4,t[w].abortReason=_}kp(n,e)}},c)}function kp(n,e){const t=G0(n,e),i=Da(t),o=Q0(n,t);return eR(n,o,i),i}function eR(n,e,t){if(e.length===0)return;const i=[];let o=[];const c=e.filter(d=>d.status===0).map(d=>d.currentWriteId);for(let d=0;d<e.length;d++){const p=e[d],_=dn(t,p.path);let v=!1,w;if(J(_!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),p.status===4)v=!0,w=p.abortReason,o=o.concat(Io(n.serverSyncTree_,p.currentWriteId,!0));else if(p.status===0)if(p.retryCount>=qS)v=!0,w="maxretry",o=o.concat(Io(n.serverSyncTree_,p.currentWriteId,!0));else{const I=$0(n,p.path,c);p.currentInputSnapshot=I;const x=e[d].update(I.val());if(x!==void 0){U0("transaction failed: Data returned ",x,p.path);let U=Yt(x);typeof x=="object"&&x!=null&&Hr(x,".priority")||(U=U.updatePriority(I.getPriority()));const z=p.currentWriteId,ae=W0(n),me=xS(U,I,ae);p.currentOutputSnapshotRaw=U,p.currentOutputSnapshotResolved=me,p.currentWriteId=QS(n),c.splice(c.indexOf(z),1),o=o.concat(_S(n.serverSyncTree_,p.path,me,p.currentWriteId,p.applyLocally)),o=o.concat(Io(n.serverSyncTree_,z,!0))}else v=!0,w="nodata",o=o.concat(Io(n.serverSyncTree_,p.currentWriteId,!0))}ws(n.eventQueue_,t,o),o=[],v&&(e[d].status=2,function(I){setTimeout(I,Math.floor(0))}(e[d].unwatcher),e[d].onComplete&&(w==="nodata"?i.push(()=>e[d].onComplete(null,!1,e[d].currentInputSnapshot)):i.push(()=>e[d].onComplete(new Error(w),!1,null))))}eh(n,n.transactionQueueTree_);for(let d=0;d<i.length;d++)ka(i[d]);Pp(n,n.transactionQueueTree_)}function G0(n,e){let t,i=n.transactionQueueTree_;for(t=Ae(e);t!==null&&Go(i)===void 0;)i=Rp(i,t),e=Ye(e),t=Ae(e);return i}function Q0(n,e){const t=[];return K0(n,e,t),t.sort((i,o)=>i.order-o.order),t}function K0(n,e,t){const i=Go(e);if(i)for(let o=0;o<i.length;o++)t.push(i[o]);Zc(e,o=>{K0(n,o,t)})}function eh(n,e){const t=Go(e);if(t){let i=0;for(let o=0;o<t.length;o++)t[o].status!==2&&(t[i]=t[o],i++);t.length=i,L0(e,t.length>0?t:void 0)}Zc(e,i=>{eh(n,i)})}function tR(n,e){const t=Da(G0(n,e)),i=Rp(n.transactionQueueTree_,e);return VS(i,o=>{cf(n,o)}),cf(n,i),M0(i,o=>{cf(n,o)}),t}function cf(n,e){const t=Go(e);if(t){const i=[];let o=[],l=-1;for(let c=0;c<t.length;c++)t[c].status===3||(t[c].status===1?(J(l===c-1,"All SENT items should be at beginning of queue."),l=c,t[c].status=3,t[c].abortReason="set"):(J(t[c].status===0,"Unexpected transaction status in abort"),t[c].unwatcher(),o=o.concat(Io(n.serverSyncTree_,t[c].currentWriteId,!0)),t[c].onComplete&&i.push(t[c].onComplete.bind(null,new Error("set"),!1,null))));l===-1?L0(e,void 0):t.length=l+1,ws(n.eventQueue_,Da(e),o);for(let c=0;c<i.length;c++)ka(i[c])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nR(n){let e="";const t=n.split("/");for(let i=0;i<t.length;i++)if(t[i].length>0){let o=t[i];try{o=decodeURIComponent(o.replace(/\+/g," "))}catch{}e+="/"+o}return e}function rR(n){const e={};n.charAt(0)==="?"&&(n=n.substring(1));for(const t of n.split("&")){if(t.length===0)continue;const i=t.split("=");i.length===2?e[decodeURIComponent(i[0])]=decodeURIComponent(i[1]):Sn(`Invalid query segment '${t}' in query '${n}'`)}return e}const vy=function(n,e){const t=iR(n),i=t.namespace;t.domain==="firebase.com"&&zr(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!i||i==="undefined")&&t.domain!=="localhost"&&zr("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||mI();const o=t.scheme==="ws"||t.scheme==="wss";return{repoInfo:new Xv(t.host,t.secure,i,o,e,"",i!==t.subdomain),path:new $e(t.pathString)}},iR=function(n){let e="",t="",i="",o="",l="",c=!0,d="https",p=443;if(typeof n=="string"){let _=n.indexOf("//");_>=0&&(d=n.substring(0,_-1),n=n.substring(_+2));let v=n.indexOf("/");v===-1&&(v=n.length);let w=n.indexOf("?");w===-1&&(w=n.length),e=n.substring(0,Math.min(v,w)),v<w&&(o=nR(n.substring(v,w)));const I=rR(n.substring(Math.min(n.length,w)));_=e.indexOf(":"),_>=0?(c=d==="https"||d==="wss",p=parseInt(e.substring(_+1),10)):_=e.length;const x=e.slice(0,_);if(x.toLowerCase()==="localhost")t="localhost";else if(x.split(".").length<=2)t=x;else{const U=e.indexOf(".");i=e.substring(0,U).toLowerCase(),t=e.substring(U+1),l=i}"ns"in I&&(l=I.ns)}return{host:e,port:p,domain:t,subdomain:i,secure:c,scheme:d,pathString:o,namespace:l}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sR{constructor(e,t,i,o){this.eventType=e,this.eventRegistration=t,this.snapshot=i,this.prevName=o}getPath(){const e=this.snapshot.ref;return this.eventType==="value"?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+Dt(this.snapshot.exportVal())}}class oR{constructor(e,t,i){this.eventRegistration=e,this.error=t,this.path=i}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lR{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return J(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Np{constructor(e,t,i,o){this._repo=e,this._path=t,this._queryParams=i,this._orderByCalled=o}get key(){return Pe(this._path)?null:o0(this._path)}get ref(){return new Di(this._repo,this._path)}get _queryIdentifier(){const e=ry(this._queryParams),t=rp(e);return t==="{}"?"default":t}get _queryObject(){return ry(this._queryParams)}isEqual(e){if(e=pn(e),!(e instanceof Np))return!1;const t=this._repo===e._repo,i=lp(this._path,e._path),o=this._queryIdentifier===e._queryIdentifier;return t&&i&&o}toJSON(){return this.toString()}toString(){return this._repo.toString()+JI(this._path)}}class Di extends Np{constructor(e,t){super(e,t,new hp,!1)}get parent(){const e=a0(this._path);return e===null?null:new Di(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}class Mc{constructor(e,t,i){this._node=e,this.ref=t,this._index=i}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const t=new $e(e),i=Ey(this.ref,e);return new Mc(this._node.getChild(t),i,lt)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(i,o)=>e(new Mc(o,Ey(this.ref,i),lt)))}hasChild(e){const t=new $e(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function aR(n,e){return n=pn(n),n._checkNotDeleted("ref"),n._root}function Ey(n,e){return n=pn(n),Ae(n._path)===null?bS("child","path",e):j0("child","path",e),new Di(n._repo,Tt(n._path,e))}class xp{constructor(e){this.callbackContext=e}respondsTo(e){return e==="value"}createEvent(e,t){const i=t._queryParams.getIndex();return new sR("value",this,new Mc(e.snapshotNode,new Di(t._repo,t._path),i))}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new oR(this,e,t):null}matches(e){return e instanceof xp?!e.callbackContext||!this.callbackContext?!0:e.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}}function uR(n,e,t,i,o){const l=new lR(t,void 0),c=new xp(l);return YS(n._repo,n,c),()=>XS(n._repo,n,c)}function cR(n,e,t,i){return uR(n,"value",e)}aS(Di);pS(Di);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hR="FIREBASE_DATABASE_EMULATOR_HOST",Of={};let dR=!1;function fR(n,e,t,i){n.repoInfo_=new Xv(`${e}:${t}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams,!0),i&&(n.authTokenProvider_=i)}function pR(n,e,t,i,o){let l=i||n.options.databaseURL;l===void 0&&(n.options.projectId||zr("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Kt("Using default host for project ",n.options.projectId),l=`${n.options.projectId}-default-rtdb.firebaseio.com`);let c=vy(l,o),d=c.repoInfo,p;typeof process<"u"&&U_&&(p=U_[hR]),p?(l=`http://${p}?ns=${d.namespace}`,c=vy(l,o),d=c.repoInfo):c.repoInfo.secure;const _=new RI(n.name,n.options,e);US("Invalid Firebase Database URL",c),Pe(c.path)||zr("Database URL must point to the root of a Firebase Database (not including a child path).");const v=gR(d,n,_,new SI(n.name,t));return new _R(v,n)}function mR(n,e){const t=Of[e];(!t||t[n.key]!==n)&&zr(`Database ${e}(${n.repoInfo_}) has already been deleted.`),JS(n),delete t[n.key]}function gR(n,e,t,i){let o=Of[e.name];o||(o={},Of[e.name]=o);let l=o[n.toURLString()];return l&&zr("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),l=new WS(n,dR,t,i),o[n.toURLString()]=l,l}class _R{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(HS(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Di(this._repo,Be())),this._rootInternal}_delete(){return this._rootInternal!==null&&(mR(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&zr("Cannot call "+e+" on a deleted database.")}}function yR(n=Vv(),e){const t=Nv(n,"database").getImmediate({identifier:e});if(!t._instanceStarted){const i=vv("database");i&&vR(t,...i)}return t}function vR(n,e,t,i={}){n=pn(n),n._checkNotDeleted("useEmulator"),n._instanceStarted&&zr("Cannot call useEmulator() after instance has already been initialized.");const o=n._repoInternal;let l;if(o.repoInfo_.nodeAdmin)i.mockUserToken&&zr('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),l=new fc(fc.OWNER);else if(i.mockUserToken){const c=typeof i.mockUserToken=="string"?i.mockUserToken:wv(i.mockUserToken,n.app.options.projectId);l=new fc(c)}fR(o,e,t,l)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ER(n){uI(xv),da(new Do("database",(e,{instanceIdentifier:t})=>{const i=e.getProvider("app").getImmediate(),o=e.getProvider("auth-internal"),l=e.getProvider("app-check-internal");return pR(i,o,l,t)},"PUBLIC").setMultipleInstances(!0)),wi(j_,B_,n),wi(j_,B_,"esm2017")}Ur.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)};Ur.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)};ER();var wy=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ps,Y0;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(D,S){function A(){}A.prototype=S.prototype,D.D=S.prototype,D.prototype=new A,D.prototype.constructor=D,D.C=function(N,V,O){for(var R=Array(arguments.length-2),ut=2;ut<arguments.length;ut++)R[ut-2]=arguments[ut];return S.prototype[V].apply(N,R)}}function t(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(i,t),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(D,S,A){A||(A=0);var N=Array(16);if(typeof S=="string")for(var V=0;16>V;++V)N[V]=S.charCodeAt(A++)|S.charCodeAt(A++)<<8|S.charCodeAt(A++)<<16|S.charCodeAt(A++)<<24;else for(V=0;16>V;++V)N[V]=S[A++]|S[A++]<<8|S[A++]<<16|S[A++]<<24;S=D.g[0],A=D.g[1],V=D.g[2];var O=D.g[3],R=S+(O^A&(V^O))+N[0]+3614090360&4294967295;S=A+(R<<7&4294967295|R>>>25),R=O+(V^S&(A^V))+N[1]+3905402710&4294967295,O=S+(R<<12&4294967295|R>>>20),R=V+(A^O&(S^A))+N[2]+606105819&4294967295,V=O+(R<<17&4294967295|R>>>15),R=A+(S^V&(O^S))+N[3]+3250441966&4294967295,A=V+(R<<22&4294967295|R>>>10),R=S+(O^A&(V^O))+N[4]+4118548399&4294967295,S=A+(R<<7&4294967295|R>>>25),R=O+(V^S&(A^V))+N[5]+1200080426&4294967295,O=S+(R<<12&4294967295|R>>>20),R=V+(A^O&(S^A))+N[6]+2821735955&4294967295,V=O+(R<<17&4294967295|R>>>15),R=A+(S^V&(O^S))+N[7]+4249261313&4294967295,A=V+(R<<22&4294967295|R>>>10),R=S+(O^A&(V^O))+N[8]+1770035416&4294967295,S=A+(R<<7&4294967295|R>>>25),R=O+(V^S&(A^V))+N[9]+2336552879&4294967295,O=S+(R<<12&4294967295|R>>>20),R=V+(A^O&(S^A))+N[10]+4294925233&4294967295,V=O+(R<<17&4294967295|R>>>15),R=A+(S^V&(O^S))+N[11]+2304563134&4294967295,A=V+(R<<22&4294967295|R>>>10),R=S+(O^A&(V^O))+N[12]+1804603682&4294967295,S=A+(R<<7&4294967295|R>>>25),R=O+(V^S&(A^V))+N[13]+4254626195&4294967295,O=S+(R<<12&4294967295|R>>>20),R=V+(A^O&(S^A))+N[14]+2792965006&4294967295,V=O+(R<<17&4294967295|R>>>15),R=A+(S^V&(O^S))+N[15]+1236535329&4294967295,A=V+(R<<22&4294967295|R>>>10),R=S+(V^O&(A^V))+N[1]+4129170786&4294967295,S=A+(R<<5&4294967295|R>>>27),R=O+(A^V&(S^A))+N[6]+3225465664&4294967295,O=S+(R<<9&4294967295|R>>>23),R=V+(S^A&(O^S))+N[11]+643717713&4294967295,V=O+(R<<14&4294967295|R>>>18),R=A+(O^S&(V^O))+N[0]+3921069994&4294967295,A=V+(R<<20&4294967295|R>>>12),R=S+(V^O&(A^V))+N[5]+3593408605&4294967295,S=A+(R<<5&4294967295|R>>>27),R=O+(A^V&(S^A))+N[10]+38016083&4294967295,O=S+(R<<9&4294967295|R>>>23),R=V+(S^A&(O^S))+N[15]+3634488961&4294967295,V=O+(R<<14&4294967295|R>>>18),R=A+(O^S&(V^O))+N[4]+3889429448&4294967295,A=V+(R<<20&4294967295|R>>>12),R=S+(V^O&(A^V))+N[9]+568446438&4294967295,S=A+(R<<5&4294967295|R>>>27),R=O+(A^V&(S^A))+N[14]+3275163606&4294967295,O=S+(R<<9&4294967295|R>>>23),R=V+(S^A&(O^S))+N[3]+4107603335&4294967295,V=O+(R<<14&4294967295|R>>>18),R=A+(O^S&(V^O))+N[8]+1163531501&4294967295,A=V+(R<<20&4294967295|R>>>12),R=S+(V^O&(A^V))+N[13]+2850285829&4294967295,S=A+(R<<5&4294967295|R>>>27),R=O+(A^V&(S^A))+N[2]+4243563512&4294967295,O=S+(R<<9&4294967295|R>>>23),R=V+(S^A&(O^S))+N[7]+1735328473&4294967295,V=O+(R<<14&4294967295|R>>>18),R=A+(O^S&(V^O))+N[12]+2368359562&4294967295,A=V+(R<<20&4294967295|R>>>12),R=S+(A^V^O)+N[5]+4294588738&4294967295,S=A+(R<<4&4294967295|R>>>28),R=O+(S^A^V)+N[8]+2272392833&4294967295,O=S+(R<<11&4294967295|R>>>21),R=V+(O^S^A)+N[11]+1839030562&4294967295,V=O+(R<<16&4294967295|R>>>16),R=A+(V^O^S)+N[14]+4259657740&4294967295,A=V+(R<<23&4294967295|R>>>9),R=S+(A^V^O)+N[1]+2763975236&4294967295,S=A+(R<<4&4294967295|R>>>28),R=O+(S^A^V)+N[4]+1272893353&4294967295,O=S+(R<<11&4294967295|R>>>21),R=V+(O^S^A)+N[7]+4139469664&4294967295,V=O+(R<<16&4294967295|R>>>16),R=A+(V^O^S)+N[10]+3200236656&4294967295,A=V+(R<<23&4294967295|R>>>9),R=S+(A^V^O)+N[13]+681279174&4294967295,S=A+(R<<4&4294967295|R>>>28),R=O+(S^A^V)+N[0]+3936430074&4294967295,O=S+(R<<11&4294967295|R>>>21),R=V+(O^S^A)+N[3]+3572445317&4294967295,V=O+(R<<16&4294967295|R>>>16),R=A+(V^O^S)+N[6]+76029189&4294967295,A=V+(R<<23&4294967295|R>>>9),R=S+(A^V^O)+N[9]+3654602809&4294967295,S=A+(R<<4&4294967295|R>>>28),R=O+(S^A^V)+N[12]+3873151461&4294967295,O=S+(R<<11&4294967295|R>>>21),R=V+(O^S^A)+N[15]+530742520&4294967295,V=O+(R<<16&4294967295|R>>>16),R=A+(V^O^S)+N[2]+3299628645&4294967295,A=V+(R<<23&4294967295|R>>>9),R=S+(V^(A|~O))+N[0]+4096336452&4294967295,S=A+(R<<6&4294967295|R>>>26),R=O+(A^(S|~V))+N[7]+1126891415&4294967295,O=S+(R<<10&4294967295|R>>>22),R=V+(S^(O|~A))+N[14]+2878612391&4294967295,V=O+(R<<15&4294967295|R>>>17),R=A+(O^(V|~S))+N[5]+4237533241&4294967295,A=V+(R<<21&4294967295|R>>>11),R=S+(V^(A|~O))+N[12]+1700485571&4294967295,S=A+(R<<6&4294967295|R>>>26),R=O+(A^(S|~V))+N[3]+2399980690&4294967295,O=S+(R<<10&4294967295|R>>>22),R=V+(S^(O|~A))+N[10]+4293915773&4294967295,V=O+(R<<15&4294967295|R>>>17),R=A+(O^(V|~S))+N[1]+2240044497&4294967295,A=V+(R<<21&4294967295|R>>>11),R=S+(V^(A|~O))+N[8]+1873313359&4294967295,S=A+(R<<6&4294967295|R>>>26),R=O+(A^(S|~V))+N[15]+4264355552&4294967295,O=S+(R<<10&4294967295|R>>>22),R=V+(S^(O|~A))+N[6]+2734768916&4294967295,V=O+(R<<15&4294967295|R>>>17),R=A+(O^(V|~S))+N[13]+1309151649&4294967295,A=V+(R<<21&4294967295|R>>>11),R=S+(V^(A|~O))+N[4]+4149444226&4294967295,S=A+(R<<6&4294967295|R>>>26),R=O+(A^(S|~V))+N[11]+3174756917&4294967295,O=S+(R<<10&4294967295|R>>>22),R=V+(S^(O|~A))+N[2]+718787259&4294967295,V=O+(R<<15&4294967295|R>>>17),R=A+(O^(V|~S))+N[9]+3951481745&4294967295,D.g[0]=D.g[0]+S&4294967295,D.g[1]=D.g[1]+(V+(R<<21&4294967295|R>>>11))&4294967295,D.g[2]=D.g[2]+V&4294967295,D.g[3]=D.g[3]+O&4294967295}i.prototype.u=function(D,S){S===void 0&&(S=D.length);for(var A=S-this.blockSize,N=this.B,V=this.h,O=0;O<S;){if(V==0)for(;O<=A;)o(this,D,O),O+=this.blockSize;if(typeof D=="string"){for(;O<S;)if(N[V++]=D.charCodeAt(O++),V==this.blockSize){o(this,N),V=0;break}}else for(;O<S;)if(N[V++]=D[O++],V==this.blockSize){o(this,N),V=0;break}}this.h=V,this.o+=S},i.prototype.v=function(){var D=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);D[0]=128;for(var S=1;S<D.length-8;++S)D[S]=0;var A=8*this.o;for(S=D.length-8;S<D.length;++S)D[S]=A&255,A/=256;for(this.u(D),D=Array(16),S=A=0;4>S;++S)for(var N=0;32>N;N+=8)D[A++]=this.g[S]>>>N&255;return D};function l(D,S){var A=d;return Object.prototype.hasOwnProperty.call(A,D)?A[D]:A[D]=S(D)}function c(D,S){this.h=S;for(var A=[],N=!0,V=D.length-1;0<=V;V--){var O=D[V]|0;N&&O==S||(A[V]=O,N=!1)}this.g=A}var d={};function p(D){return-128<=D&&128>D?l(D,function(S){return new c([S|0],0>S?-1:0)}):new c([D|0],0>D?-1:0)}function _(D){if(isNaN(D)||!isFinite(D))return w;if(0>D)return z(_(-D));for(var S=[],A=1,N=0;D>=A;N++)S[N]=D/A|0,A*=4294967296;return new c(S,0)}function v(D,S){if(D.length==0)throw Error("number format error: empty string");if(S=S||10,2>S||36<S)throw Error("radix out of range: "+S);if(D.charAt(0)=="-")return z(v(D.substring(1),S));if(0<=D.indexOf("-"))throw Error('number format error: interior "-" character');for(var A=_(Math.pow(S,8)),N=w,V=0;V<D.length;V+=8){var O=Math.min(8,D.length-V),R=parseInt(D.substring(V,V+O),S);8>O?(O=_(Math.pow(S,O)),N=N.j(O).add(_(R))):(N=N.j(A),N=N.add(_(R)))}return N}var w=p(0),I=p(1),x=p(16777216);n=c.prototype,n.m=function(){if(q(this))return-z(this).m();for(var D=0,S=1,A=0;A<this.g.length;A++){var N=this.i(A);D+=(0<=N?N:4294967296+N)*S,S*=4294967296}return D},n.toString=function(D){if(D=D||10,2>D||36<D)throw Error("radix out of range: "+D);if(U(this))return"0";if(q(this))return"-"+z(this).toString(D);for(var S=_(Math.pow(D,6)),A=this,N="";;){var V=we(A,S).g;A=ae(A,V.j(S));var O=((0<A.g.length?A.g[0]:A.h)>>>0).toString(D);if(A=V,U(A))return O+N;for(;6>O.length;)O="0"+O;N=O+N}},n.i=function(D){return 0>D?0:D<this.g.length?this.g[D]:this.h};function U(D){if(D.h!=0)return!1;for(var S=0;S<D.g.length;S++)if(D.g[S]!=0)return!1;return!0}function q(D){return D.h==-1}n.l=function(D){return D=ae(this,D),q(D)?-1:U(D)?0:1};function z(D){for(var S=D.g.length,A=[],N=0;N<S;N++)A[N]=~D.g[N];return new c(A,~D.h).add(I)}n.abs=function(){return q(this)?z(this):this},n.add=function(D){for(var S=Math.max(this.g.length,D.g.length),A=[],N=0,V=0;V<=S;V++){var O=N+(this.i(V)&65535)+(D.i(V)&65535),R=(O>>>16)+(this.i(V)>>>16)+(D.i(V)>>>16);N=R>>>16,O&=65535,R&=65535,A[V]=R<<16|O}return new c(A,A[A.length-1]&-2147483648?-1:0)};function ae(D,S){return D.add(z(S))}n.j=function(D){if(U(this)||U(D))return w;if(q(this))return q(D)?z(this).j(z(D)):z(z(this).j(D));if(q(D))return z(this.j(z(D)));if(0>this.l(x)&&0>D.l(x))return _(this.m()*D.m());for(var S=this.g.length+D.g.length,A=[],N=0;N<2*S;N++)A[N]=0;for(N=0;N<this.g.length;N++)for(var V=0;V<D.g.length;V++){var O=this.i(N)>>>16,R=this.i(N)&65535,ut=D.i(V)>>>16,jt=D.i(V)&65535;A[2*N+2*V]+=R*jt,me(A,2*N+2*V),A[2*N+2*V+1]+=O*jt,me(A,2*N+2*V+1),A[2*N+2*V+1]+=R*ut,me(A,2*N+2*V+1),A[2*N+2*V+2]+=O*ut,me(A,2*N+2*V+2)}for(N=0;N<S;N++)A[N]=A[2*N+1]<<16|A[2*N];for(N=S;N<2*S;N++)A[N]=0;return new c(A,0)};function me(D,S){for(;(D[S]&65535)!=D[S];)D[S+1]+=D[S]>>>16,D[S]&=65535,S++}function _e(D,S){this.g=D,this.h=S}function we(D,S){if(U(S))throw Error("division by zero");if(U(D))return new _e(w,w);if(q(D))return S=we(z(D),S),new _e(z(S.g),z(S.h));if(q(S))return S=we(D,z(S)),new _e(z(S.g),S.h);if(30<D.g.length){if(q(D)||q(S))throw Error("slowDivide_ only works with positive integers.");for(var A=I,N=S;0>=N.l(D);)A=at(A),N=at(N);var V=Me(A,1),O=Me(N,1);for(N=Me(N,2),A=Me(A,2);!U(N);){var R=O.add(N);0>=R.l(D)&&(V=V.add(A),O=R),N=Me(N,1),A=Me(A,1)}return S=ae(D,V.j(S)),new _e(V,S)}for(V=w;0<=D.l(S);){for(A=Math.max(1,Math.floor(D.m()/S.m())),N=Math.ceil(Math.log(A)/Math.LN2),N=48>=N?1:Math.pow(2,N-48),O=_(A),R=O.j(S);q(R)||0<R.l(D);)A-=N,O=_(A),R=O.j(S);U(O)&&(O=I),V=V.add(O),D=ae(D,R)}return new _e(V,D)}n.A=function(D){return we(this,D).h},n.and=function(D){for(var S=Math.max(this.g.length,D.g.length),A=[],N=0;N<S;N++)A[N]=this.i(N)&D.i(N);return new c(A,this.h&D.h)},n.or=function(D){for(var S=Math.max(this.g.length,D.g.length),A=[],N=0;N<S;N++)A[N]=this.i(N)|D.i(N);return new c(A,this.h|D.h)},n.xor=function(D){for(var S=Math.max(this.g.length,D.g.length),A=[],N=0;N<S;N++)A[N]=this.i(N)^D.i(N);return new c(A,this.h^D.h)};function at(D){for(var S=D.g.length+1,A=[],N=0;N<S;N++)A[N]=D.i(N)<<1|D.i(N-1)>>>31;return new c(A,D.h)}function Me(D,S){var A=S>>5;S%=32;for(var N=D.g.length-A,V=[],O=0;O<N;O++)V[O]=0<S?D.i(O+A)>>>S|D.i(O+A+1)<<32-S:D.i(O+A);return new c(V,D.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,Y0=i,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.A,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=_,c.fromString=v,ps=c}).apply(typeof wy<"u"?wy:typeof self<"u"?self:typeof window<"u"?window:{});var rc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var X0,Jl,J0,mc,Mf,Z0,eE,tE;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,m,y){return u==Array.prototype||u==Object.prototype||(u[m]=y.value),u};function t(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof rc=="object"&&rc];for(var m=0;m<u.length;++m){var y=u[m];if(y&&y.Math==Math)return y}throw Error("Cannot find global object")}var i=t(this);function o(u,m){if(m)e:{var y=i;u=u.split(".");for(var T=0;T<u.length-1;T++){var M=u[T];if(!(M in y))break e;y=y[M]}u=u[u.length-1],T=y[u],m=m(T),m!=T&&m!=null&&e(y,u,{configurable:!0,writable:!0,value:m})}}function l(u,m){u instanceof String&&(u+="");var y=0,T=!1,M={next:function(){if(!T&&y<u.length){var B=y++;return{value:m(B,u[B]),done:!1}}return T=!0,{done:!0,value:void 0}}};return M[Symbol.iterator]=function(){return M},M}o("Array.prototype.values",function(u){return u||function(){return l(this,function(m,y){return y})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var c=c||{},d=this||self;function p(u){var m=typeof u;return m=m!="object"?m:u?Array.isArray(u)?"array":m:"null",m=="array"||m=="object"&&typeof u.length=="number"}function _(u){var m=typeof u;return m=="object"&&u!=null||m=="function"}function v(u,m,y){return u.call.apply(u.bind,arguments)}function w(u,m,y){if(!u)throw Error();if(2<arguments.length){var T=Array.prototype.slice.call(arguments,2);return function(){var M=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(M,T),u.apply(m,M)}}return function(){return u.apply(m,arguments)}}function I(u,m,y){return I=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?v:w,I.apply(null,arguments)}function x(u,m){var y=Array.prototype.slice.call(arguments,1);return function(){var T=y.slice();return T.push.apply(T,arguments),u.apply(this,T)}}function U(u,m){function y(){}y.prototype=m.prototype,u.aa=m.prototype,u.prototype=new y,u.prototype.constructor=u,u.Qb=function(T,M,B){for(var Z=Array(arguments.length-2),qe=2;qe<arguments.length;qe++)Z[qe-2]=arguments[qe];return m.prototype[M].apply(T,Z)}}function q(u){const m=u.length;if(0<m){const y=Array(m);for(let T=0;T<m;T++)y[T]=u[T];return y}return[]}function z(u,m){for(let y=1;y<arguments.length;y++){const T=arguments[y];if(p(T)){const M=u.length||0,B=T.length||0;u.length=M+B;for(let Z=0;Z<B;Z++)u[M+Z]=T[Z]}else u.push(T)}}class ae{constructor(m,y){this.i=m,this.j=y,this.h=0,this.g=null}get(){let m;return 0<this.h?(this.h--,m=this.g,this.g=m.next,m.next=null):m=this.i(),m}}function me(u){return/^[\s\xa0]*$/.test(u)}function _e(){var u=d.navigator;return u&&(u=u.userAgent)?u:""}function we(u){return we[" "](u),u}we[" "]=function(){};var at=_e().indexOf("Gecko")!=-1&&!(_e().toLowerCase().indexOf("webkit")!=-1&&_e().indexOf("Edge")==-1)&&!(_e().indexOf("Trident")!=-1||_e().indexOf("MSIE")!=-1)&&_e().indexOf("Edge")==-1;function Me(u,m,y){for(const T in u)m.call(y,u[T],T,u)}function D(u,m){for(const y in u)m.call(void 0,u[y],y,u)}function S(u){const m={};for(const y in u)m[y]=u[y];return m}const A="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function N(u,m){let y,T;for(let M=1;M<arguments.length;M++){T=arguments[M];for(y in T)u[y]=T[y];for(let B=0;B<A.length;B++)y=A[B],Object.prototype.hasOwnProperty.call(T,y)&&(u[y]=T[y])}}function V(u){var m=1;u=u.split(":");const y=[];for(;0<m&&u.length;)y.push(u.shift()),m--;return u.length&&y.push(u.join(":")),y}function O(u){d.setTimeout(()=>{throw u},0)}function R(){var u=de;let m=null;return u.g&&(m=u.g,u.g=u.g.next,u.g||(u.h=null),m.next=null),m}class ut{constructor(){this.h=this.g=null}add(m,y){const T=jt.get();T.set(m,y),this.h?this.h.next=T:this.g=T,this.h=T}}var jt=new ae(()=>new Bt,u=>u.reset());class Bt{constructor(){this.next=this.g=this.h=null}set(m,y){this.h=m,this.g=y,this.next=null}reset(){this.next=this.g=this.h=null}}let We,ee=!1,de=new ut,re=()=>{const u=d.Promise.resolve(void 0);We=()=>{u.then(L)}};var L=()=>{for(var u;u=R();){try{u.h.call(u.g)}catch(y){O(y)}var m=jt;m.j(u),100>m.h&&(m.h++,u.next=m.g,m.g=u)}ee=!1};function G(){this.s=this.s,this.C=this.C}G.prototype.s=!1,G.prototype.ma=function(){this.s||(this.s=!0,this.N())},G.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ce(u,m){this.type=u,this.g=this.target=m,this.defaultPrevented=!1}ce.prototype.h=function(){this.defaultPrevented=!0};var Ie=function(){if(!d.addEventListener||!Object.defineProperty)return!1;var u=!1,m=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const y=()=>{};d.addEventListener("test",y,m),d.removeEventListener("test",y,m)}catch{}return u}();function Ce(u,m){if(ce.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var y=this.type=u.type,T=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=m,m=u.relatedTarget){if(at){e:{try{we(m.nodeName);var M=!0;break e}catch{}M=!1}M||(m=null)}}else y=="mouseover"?m=u.fromElement:y=="mouseout"&&(m=u.toElement);this.relatedTarget=m,T?(this.clientX=T.clientX!==void 0?T.clientX:T.pageX,this.clientY=T.clientY!==void 0?T.clientY:T.pageY,this.screenX=T.screenX||0,this.screenY=T.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:Ve[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&Ce.aa.h.call(this)}}U(Ce,ce);var Ve={2:"touch",3:"pen",4:"mouse"};Ce.prototype.h=function(){Ce.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var Ue="closure_listenable_"+(1e6*Math.random()|0),je=0;function Ge(u,m,y,T,M){this.listener=u,this.proxy=null,this.src=m,this.type=y,this.capture=!!T,this.ha=M,this.key=++je,this.da=this.fa=!1}function St(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function Er(u){this.src=u,this.g={},this.h=0}Er.prototype.add=function(u,m,y,T,M){var B=u.toString();u=this.g[B],u||(u=this.g[B]=[],this.h++);var Z=$r(u,m,T,M);return-1<Z?(m=u[Z],y||(m.fa=!1)):(m=new Ge(m,this.src,B,!!T,M),m.fa=y,u.push(m)),m};function Ss(u,m){var y=m.type;if(y in u.g){var T=u.g[y],M=Array.prototype.indexOf.call(T,m,void 0),B;(B=0<=M)&&Array.prototype.splice.call(T,M,1),B&&(St(m),u.g[y].length==0&&(delete u.g[y],u.h--))}}function $r(u,m,y,T){for(var M=0;M<u.length;++M){var B=u[M];if(!B.da&&B.listener==m&&B.capture==!!y&&B.ha==T)return M}return-1}var Oi="closure_lm_"+(1e6*Math.random()|0),Rs={};function Jo(u,m,y,T,M){if(Array.isArray(m)){for(var B=0;B<m.length;B++)Jo(u,m[B],y,T,M);return null}return y=tl(y),u&&u[Ue]?u.K(m,y,_(T)?!!T.capture:!!T,M):Zo(u,m,y,!1,T,M)}function Zo(u,m,y,T,M,B){if(!m)throw Error("Invalid event type");var Z=_(M)?!!M.capture:!!M,qe=Ps(u);if(qe||(u[Oi]=qe=new Er(u)),y=qe.add(m,y,T,Z,B),y.proxy)return y;if(T=Ua(),y.proxy=T,T.src=u,T.listener=y,u.addEventListener)Ie||(M=Z),M===void 0&&(M=!1),u.addEventListener(m.toString(),T,M);else if(u.attachEvent)u.attachEvent(Tr(m.toString()),T);else if(u.addListener&&u.removeListener)u.addListener(T);else throw Error("addEventListener and attachEvent are unavailable.");return y}function Ua(){function u(y){return m.call(u.src,u.listener,y)}const m=el;return u}function As(u,m,y,T,M){if(Array.isArray(m))for(var B=0;B<m.length;B++)As(u,m[B],y,T,M);else T=_(T)?!!T.capture:!!T,y=tl(y),u&&u[Ue]?(u=u.i,m=String(m).toString(),m in u.g&&(B=u.g[m],y=$r(B,y,T,M),-1<y&&(St(B[y]),Array.prototype.splice.call(B,y,1),B.length==0&&(delete u.g[m],u.h--)))):u&&(u=Ps(u))&&(m=u.g[m.toString()],u=-1,m&&(u=$r(m,y,T,M)),(y=-1<u?m[u]:null)&&wr(y))}function wr(u){if(typeof u!="number"&&u&&!u.da){var m=u.src;if(m&&m[Ue])Ss(m.i,u);else{var y=u.type,T=u.proxy;m.removeEventListener?m.removeEventListener(y,T,u.capture):m.detachEvent?m.detachEvent(Tr(y),T):m.addListener&&m.removeListener&&m.removeListener(T),(y=Ps(m))?(Ss(y,u),y.h==0&&(y.src=null,m[Oi]=null)):St(u)}}}function Tr(u){return u in Rs?Rs[u]:Rs[u]="on"+u}function el(u,m){if(u.da)u=!0;else{m=new Ce(m,this);var y=u.listener,T=u.ha||u.src;u.fa&&wr(u),u=y.call(T,m)}return u}function Ps(u){return u=u[Oi],u instanceof Er?u:null}var ks="__closure_events_fn_"+(1e9*Math.random()>>>0);function tl(u){return typeof u=="function"?u:(u[ks]||(u[ks]=function(m){return u.handleEvent(m)}),u[ks])}function _t(){G.call(this),this.i=new Er(this),this.M=this,this.F=null}U(_t,G),_t.prototype[Ue]=!0,_t.prototype.removeEventListener=function(u,m,y,T){As(this,u,m,y,T)};function yt(u,m){var y,T=u.F;if(T)for(y=[];T;T=T.F)y.push(T);if(u=u.M,T=m.type||m,typeof m=="string")m=new ce(m,u);else if(m instanceof ce)m.target=m.target||u;else{var M=m;m=new ce(T,u),N(m,M)}if(M=!0,y)for(var B=y.length-1;0<=B;B--){var Z=m.g=y[B];M=Ir(Z,T,!0,m)&&M}if(Z=m.g=u,M=Ir(Z,T,!0,m)&&M,M=Ir(Z,T,!1,m)&&M,y)for(B=0;B<y.length;B++)Z=m.g=y[B],M=Ir(Z,T,!1,m)&&M}_t.prototype.N=function(){if(_t.aa.N.call(this),this.i){var u=this.i,m;for(m in u.g){for(var y=u.g[m],T=0;T<y.length;T++)St(y[T]);delete u.g[m],u.h--}}this.F=null},_t.prototype.K=function(u,m,y,T){return this.i.add(String(u),m,!1,y,T)},_t.prototype.L=function(u,m,y,T){return this.i.add(String(u),m,!0,y,T)};function Ir(u,m,y,T){if(m=u.i.g[String(m)],!m)return!0;m=m.concat();for(var M=!0,B=0;B<m.length;++B){var Z=m[B];if(Z&&!Z.da&&Z.capture==y){var qe=Z.listener,vt=Z.ha||Z.src;Z.fa&&Ss(u.i,Z),M=qe.call(vt,T)!==!1&&M}}return M&&!T.defaultPrevented}function nl(u,m,y){if(typeof u=="function")y&&(u=I(u,y));else if(u&&typeof u.handleEvent=="function")u=I(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(m)?-1:d.setTimeout(u,m||0)}function Gr(u){u.g=nl(()=>{u.g=null,u.i&&(u.i=!1,Gr(u))},u.l);const m=u.h;u.h=null,u.m.apply(null,m)}class Mi extends G{constructor(m,y){super(),this.m=m,this.l=y,this.h=null,this.i=!1,this.g=null}j(m){this.h=arguments,this.g?this.i=!0:Gr(this)}N(){super.N(),this.g&&(d.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Fi(u){G.call(this),this.h=u,this.g={}}U(Fi,G);var rl=[];function il(u){Me(u.g,function(m,y){this.g.hasOwnProperty(y)&&wr(m)},u),u.g={}}Fi.prototype.N=function(){Fi.aa.N.call(this),il(this)},Fi.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var sl=d.JSON.stringify,ol=d.JSON.parse,ll=class{stringify(u){return d.JSON.stringify(u,void 0)}parse(u){return d.JSON.parse(u,void 0)}};function bi(){}bi.prototype.h=null;function Ns(u){return u.h||(u.h=u.i())}function xs(){}var Rn={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function rr(){ce.call(this,"d")}U(rr,ce);function Ds(){ce.call(this,"c")}U(Ds,ce);var ir={},al=null;function Ui(){return al=al||new _t}ir.La="serverreachability";function ul(u){ce.call(this,ir.La,u)}U(ul,ce);function Cr(u){const m=Ui();yt(m,new ul(m))}ir.STAT_EVENT="statevent";function cl(u,m){ce.call(this,ir.STAT_EVENT,u),this.stat=m}U(cl,ce);function ct(u){const m=Ui();yt(m,new cl(m,u))}ir.Ma="timingevent";function Vs(u,m){ce.call(this,ir.Ma,u),this.size=m}U(Vs,ce);function Mn(u,m){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return d.setTimeout(function(){u()},m)}function ji(){this.g=!0}ji.prototype.xa=function(){this.g=!1};function Bi(u,m,y,T,M,B){u.info(function(){if(u.g)if(B)for(var Z="",qe=B.split("&"),vt=0;vt<qe.length;vt++){var Le=qe[vt].split("=");if(1<Le.length){var Rt=Le[0];Le=Le[1];var ft=Rt.split("_");Z=2<=ft.length&&ft[1]=="type"?Z+(Rt+"="+Le+"&"):Z+(Rt+"=redacted&")}}else Z=null;else Z=B;return"XMLHTTP REQ ("+T+") [attempt "+M+"]: "+m+`
`+y+`
`+Z})}function Ls(u,m,y,T,M,B,Z){u.info(function(){return"XMLHTTP RESP ("+T+") [ attempt "+M+"]: "+m+`
`+y+`
`+B+" "+Z})}function Fn(u,m,y,T){u.info(function(){return"XMLHTTP TEXT ("+m+"): "+Th(u,y)+(T?" "+T:"")})}function hl(u,m){u.info(function(){return"TIMEOUT: "+m})}ji.prototype.info=function(){};function Th(u,m){if(!u.g)return m;if(!m)return null;try{var y=JSON.parse(m);if(y){for(u=0;u<y.length;u++)if(Array.isArray(y[u])){var T=y[u];if(!(2>T.length)){var M=T[1];if(Array.isArray(M)&&!(1>M.length)){var B=M[0];if(B!="noop"&&B!="stop"&&B!="close")for(var Z=1;Z<M.length;Z++)M[Z]=""}}}}return sl(y)}catch{return m}}var Os={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},ja={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},bn;function zi(){}U(zi,bi),zi.prototype.g=function(){return new XMLHttpRequest},zi.prototype.i=function(){return{}},bn=new zi;function Un(u,m,y,T){this.j=u,this.i=m,this.l=y,this.R=T||1,this.U=new Fi(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Ba}function Ba(){this.i=null,this.g="",this.h=!1}var dl={},Ms={};function Fs(u,m,y){u.L=1,u.v=Jr(_n(m)),u.m=y,u.P=!0,fl(u,null)}function fl(u,m){u.F=Date.now(),Qe(u),u.A=_n(u.v);var y=u.A,T=u.R;Array.isArray(T)||(T=[String(T)]),ei(y.i,"t",T),u.C=0,y=u.j.J,u.h=new Ba,u.g=su(u.j,y?m:null,!u.m),0<u.O&&(u.M=new Mi(I(u.Y,u,u.g),u.O)),m=u.U,y=u.g,T=u.ca;var M="readystatechange";Array.isArray(M)||(M&&(rl[0]=M.toString()),M=rl);for(var B=0;B<M.length;B++){var Z=Jo(y,M[B],T||m.handleEvent,!1,m.h||m);if(!Z)break;m.g[Z.key]=Z}m=u.H?S(u.H):{},u.m?(u.u||(u.u="POST"),m["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,m)):(u.u="GET",u.g.ea(u.A,u.u,null,m)),Cr(),Bi(u.i,u.u,u.A,u.l,u.R,u.m)}Un.prototype.ca=function(u){u=u.target;const m=this.M;m&&rn(u)==3?m.j():this.Y(u)},Un.prototype.Y=function(u){try{if(u==this.g)e:{const ft=rn(this.g);var m=this.g.Ba();const kn=this.g.Z();if(!(3>ft)&&(ft!=3||this.g&&(this.h.h||this.g.oa()||vl(this.g)))){this.J||ft!=4||m==7||(m==8||0>=kn?Cr(3):Cr(2)),qi(this);var y=this.g.Z();this.X=y;t:if(za(this)){var T=vl(this.g);u="";var M=T.length,B=rn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){An(this),Qr(this);var Z="";break t}this.h.i=new d.TextDecoder}for(m=0;m<M;m++)this.h.h=!0,u+=this.h.i.decode(T[m],{stream:!(B&&m==M-1)});T.length=0,this.h.g+=u,this.C=0,Z=this.h.g}else Z=this.g.oa();if(this.o=y==200,Ls(this.i,this.u,this.A,this.l,this.R,ft,y),this.o){if(this.T&&!this.K){t:{if(this.g){var qe,vt=this.g;if((qe=vt.g?vt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!me(qe)){var Le=qe;break t}}Le=null}if(y=Le)Fn(this.i,this.l,y,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,pl(this,y);else{this.o=!1,this.s=3,ct(12),An(this),Qr(this);break e}}if(this.P){y=!0;let vn;for(;!this.J&&this.C<Z.length;)if(vn=Ih(this,Z),vn==Ms){ft==4&&(this.s=4,ct(14),y=!1),Fn(this.i,this.l,null,"[Incomplete Response]");break}else if(vn==dl){this.s=4,ct(15),Fn(this.i,this.l,Z,"[Invalid Chunk]"),y=!1;break}else Fn(this.i,this.l,vn,null),pl(this,vn);if(za(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ft!=4||Z.length!=0||this.h.h||(this.s=1,ct(16),y=!1),this.o=this.o&&y,!y)Fn(this.i,this.l,Z,"[Invalid Chunked Response]"),An(this),Qr(this);else if(0<Z.length&&!this.W){this.W=!0;var Rt=this.j;Rt.g==this&&Rt.ba&&!Rt.M&&(Rt.j.info("Great, no buffering proxy detected. Bytes received: "+Z.length),wl(Rt),Rt.M=!0,ct(11))}}else Fn(this.i,this.l,Z,null),pl(this,Z);ft==4&&An(this),this.o&&!this.J&&(ft==4?Qs(this.j,this):(this.o=!1,Qe(this)))}else qs(this.g),y==400&&0<Z.indexOf("Unknown SID")?(this.s=3,ct(12)):(this.s=0,ct(13)),An(this),Qr(this)}}}catch{}finally{}};function za(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function Ih(u,m){var y=u.C,T=m.indexOf(`
`,y);return T==-1?Ms:(y=Number(m.substring(y,T)),isNaN(y)?dl:(T+=1,T+y>m.length?Ms:(m=m.slice(T,T+y),u.C=T+y,m)))}Un.prototype.cancel=function(){this.J=!0,An(this)};function Qe(u){u.S=Date.now()+u.I,qa(u,u.I)}function qa(u,m){if(u.B!=null)throw Error("WatchDog timer not null");u.B=Mn(I(u.ba,u),m)}function qi(u){u.B&&(d.clearTimeout(u.B),u.B=null)}Un.prototype.ba=function(){this.B=null;const u=Date.now();0<=u-this.S?(hl(this.i,this.A),this.L!=2&&(Cr(),ct(17)),An(this),this.s=2,Qr(this)):qa(this,this.S-u)};function Qr(u){u.j.G==0||u.J||Qs(u.j,u)}function An(u){qi(u);var m=u.M;m&&typeof m.ma=="function"&&m.ma(),u.M=null,il(u.U),u.g&&(m=u.g,u.g=null,m.abort(),m.ma())}function pl(u,m){try{var y=u.j;if(y.G!=0&&(y.g==u||Jt(y.h,u))){if(!u.K&&Jt(y.h,u)&&y.G==3){try{var T=y.Da.g.parse(m)}catch{T=null}if(Array.isArray(T)&&T.length==3){var M=T;if(M[0]==0){e:if(!y.u){if(y.g)if(y.g.F+3e3<u.F)Gs(y),Wn(y);else break e;$s(y),ct(18)}}else y.za=M[1],0<y.za-y.T&&37500>M[2]&&y.F&&y.v==0&&!y.C&&(y.C=Mn(I(y.Za,y),6e3));if(1>=Ha(y.h)&&y.ca){try{y.ca()}catch{}y.ca=void 0}}else kr(y,11)}else if((u.K||y.g==u)&&Gs(y),!me(m))for(M=y.Da.g.parse(m),m=0;m<M.length;m++){let Le=M[m];if(y.T=Le[0],Le=Le[1],y.G==2)if(Le[0]=="c"){y.K=Le[1],y.ia=Le[2];const Rt=Le[3];Rt!=null&&(y.la=Rt,y.j.info("VER="+y.la));const ft=Le[4];ft!=null&&(y.Aa=ft,y.j.info("SVER="+y.Aa));const kn=Le[5];kn!=null&&typeof kn=="number"&&0<kn&&(T=1.5*kn,y.L=T,y.j.info("backChannelRequestTimeoutMs_="+T)),T=y;const vn=u.g;if(vn){const Yi=vn.g?vn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Yi){var B=T.h;B.g||Yi.indexOf("spdy")==-1&&Yi.indexOf("quic")==-1&&Yi.indexOf("h2")==-1||(B.j=B.l,B.g=new Set,B.h&&(ml(B,B.h),B.h=null))}if(T.D){const Ys=vn.g?vn.g.getResponseHeader("X-HTTP-Session-Id"):null;Ys&&(T.ya=Ys,He(T.I,T.D,Ys))}}y.G=3,y.l&&y.l.ua(),y.ba&&(y.R=Date.now()-u.F,y.j.info("Handshake RTT: "+y.R+"ms")),T=y;var Z=u;if(T.qa=iu(T,T.J?T.ia:null,T.W),Z.K){$a(T.h,Z);var qe=Z,vt=T.L;vt&&(qe.I=vt),qe.B&&(qi(qe),Qe(qe)),T.g=Z}else Ki(T);0<y.i.length&&ar(y)}else Le[0]!="stop"&&Le[0]!="close"||kr(y,7);else y.G==3&&(Le[0]=="stop"||Le[0]=="close"?Le[0]=="stop"?kr(y,7):Lt(y):Le[0]!="noop"&&y.l&&y.l.ta(Le),y.v=0)}}Cr(4)}catch{}}var Wa=class{constructor(u,m){this.g=u,this.map=m}};function Wi(u){this.l=u||10,d.PerformanceNavigationTiming?(u=d.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(d.chrome&&d.chrome.loadTimes&&d.chrome.loadTimes()&&d.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function gn(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function Ha(u){return u.h?1:u.g?u.g.size:0}function Jt(u,m){return u.h?u.h==m:u.g?u.g.has(m):!1}function ml(u,m){u.g?u.g.add(m):u.h=m}function $a(u,m){u.h&&u.h==m?u.h=null:u.g&&u.g.has(m)&&u.g.delete(m)}Wi.prototype.cancel=function(){if(this.i=Ga(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function Ga(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let m=u.i;for(const y of u.g.values())m=m.concat(y.D);return m}return q(u.i)}function bs(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(p(u)){for(var m=[],y=u.length,T=0;T<y;T++)m.push(u[T]);return m}m=[],y=0;for(T in u)m[y++]=u[T];return m}function Us(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(p(u)||typeof u=="string"){var m=[];u=u.length;for(var y=0;y<u;y++)m.push(y);return m}m=[],y=0;for(const T in u)m[y++]=T;return m}}}function Kr(u,m){if(u.forEach&&typeof u.forEach=="function")u.forEach(m,void 0);else if(p(u)||typeof u=="string")Array.prototype.forEach.call(u,m,void 0);else for(var y=Us(u),T=bs(u),M=T.length,B=0;B<M;B++)m.call(void 0,T[B],y&&y[B],u)}var Hi=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ch(u,m){if(u){u=u.split("&");for(var y=0;y<u.length;y++){var T=u[y].indexOf("="),M=null;if(0<=T){var B=u[y].substring(0,T);M=u[y].substring(T+1)}else B=u[y];m(B,M?decodeURIComponent(M.replace(/\+/g," ")):"")}}}function Sr(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof Sr){this.h=u.h,$i(this,u.j),this.o=u.o,this.g=u.g,Yr(this,u.s),this.l=u.l;var m=u.i,y=new sr;y.i=m.i,m.g&&(y.g=new Map(m.g),y.h=m.h),Xr(this,y),this.m=u.m}else u&&(m=String(u).match(Hi))?(this.h=!1,$i(this,m[1]||"",!0),this.o=Ne(m[2]||""),this.g=Ne(m[3]||"",!0),Yr(this,m[4]),this.l=Ne(m[5]||"",!0),Xr(this,m[6]||"",!0),this.m=Ne(m[7]||"")):(this.h=!1,this.i=new sr(null,this.h))}Sr.prototype.toString=function(){var u=[],m=this.j;m&&u.push(Zr(m,js,!0),":");var y=this.g;return(y||m=="file")&&(u.push("//"),(m=this.o)&&u.push(Zr(m,js,!0),"@"),u.push(encodeURIComponent(String(y)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),y=this.s,y!=null&&u.push(":",String(y))),(y=this.l)&&(this.g&&y.charAt(0)!="/"&&u.push("/"),u.push(Zr(y,y.charAt(0)=="/"?Ya:Ka,!0))),(y=this.i.toString())&&u.push("?",y),(y=this.m)&&u.push("#",Zr(y,gl)),u.join("")};function _n(u){return new Sr(u)}function $i(u,m,y){u.j=y?Ne(m,!0):m,u.j&&(u.j=u.j.replace(/:$/,""))}function Yr(u,m){if(m){if(m=Number(m),isNaN(m)||0>m)throw Error("Bad port number "+m);u.s=m}else u.s=null}function Xr(u,m,y){m instanceof sr?(u.i=m,or(u.i,u.h)):(y||(m=Zr(m,Xa)),u.i=new sr(m,u.h))}function He(u,m,y){u.i.set(m,y)}function Jr(u){return He(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function Ne(u,m){return u?m?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function Zr(u,m,y){return typeof u=="string"?(u=encodeURI(u).replace(m,Qa),y&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function Qa(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var js=/[#\/\?@]/g,Ka=/[#\?:]/g,Ya=/[#\?]/g,Xa=/[#\?@]/g,gl=/#/g;function sr(u,m){this.h=this.g=null,this.i=u||null,this.j=!!m}function Vt(u){u.g||(u.g=new Map,u.h=0,u.i&&Ch(u.i,function(m,y){u.add(decodeURIComponent(m.replace(/\+/g," ")),y)}))}n=sr.prototype,n.add=function(u,m){Vt(this),this.i=null,u=Pn(this,u);var y=this.g.get(u);return y||this.g.set(u,y=[]),y.push(m),this.h+=1,this};function jn(u,m){Vt(u),m=Pn(u,m),u.g.has(m)&&(u.i=null,u.h-=u.g.get(m).length,u.g.delete(m))}function Bn(u,m){return Vt(u),m=Pn(u,m),u.g.has(m)}n.forEach=function(u,m){Vt(this),this.g.forEach(function(y,T){y.forEach(function(M){u.call(m,M,T,this)},this)},this)},n.na=function(){Vt(this);const u=Array.from(this.g.values()),m=Array.from(this.g.keys()),y=[];for(let T=0;T<m.length;T++){const M=u[T];for(let B=0;B<M.length;B++)y.push(m[T])}return y},n.V=function(u){Vt(this);let m=[];if(typeof u=="string")Bn(this,u)&&(m=m.concat(this.g.get(Pn(this,u))));else{u=Array.from(this.g.values());for(let y=0;y<u.length;y++)m=m.concat(u[y])}return m},n.set=function(u,m){return Vt(this),this.i=null,u=Pn(this,u),Bn(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[m]),this.h+=1,this},n.get=function(u,m){return u?(u=this.V(u),0<u.length?String(u[0]):m):m};function ei(u,m,y){jn(u,m),0<y.length&&(u.i=null,u.g.set(Pn(u,m),q(y)),u.h+=y.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],m=Array.from(this.g.keys());for(var y=0;y<m.length;y++){var T=m[y];const B=encodeURIComponent(String(T)),Z=this.V(T);for(T=0;T<Z.length;T++){var M=B;Z[T]!==""&&(M+="="+encodeURIComponent(String(Z[T]))),u.push(M)}}return this.i=u.join("&")};function Pn(u,m){return m=String(m),u.j&&(m=m.toLowerCase()),m}function or(u,m){m&&!u.j&&(Vt(u),u.i=null,u.g.forEach(function(y,T){var M=T.toLowerCase();T!=M&&(jn(this,T),ei(this,M,y))},u)),u.j=m}function Sh(u,m){const y=new ji;if(d.Image){const T=new Image;T.onload=x(nn,y,"TestLoadImage: loaded",!0,m,T),T.onerror=x(nn,y,"TestLoadImage: error",!1,m,T),T.onabort=x(nn,y,"TestLoadImage: abort",!1,m,T),T.ontimeout=x(nn,y,"TestLoadImage: timeout",!1,m,T),d.setTimeout(function(){T.ontimeout&&T.ontimeout()},1e4),T.src=u}else m(!1)}function Ja(u,m){const y=new ji,T=new AbortController,M=setTimeout(()=>{T.abort(),nn(y,"TestPingServer: timeout",!1,m)},1e4);fetch(u,{signal:T.signal}).then(B=>{clearTimeout(M),B.ok?nn(y,"TestPingServer: ok",!0,m):nn(y,"TestPingServer: server error",!1,m)}).catch(()=>{clearTimeout(M),nn(y,"TestPingServer: error",!1,m)})}function nn(u,m,y,T,M){try{M&&(M.onload=null,M.onerror=null,M.onabort=null,M.ontimeout=null),T(y)}catch{}}function Rh(){this.g=new ll}function Za(u,m,y){const T=y||"";try{Kr(u,function(M,B){let Z=M;_(M)&&(Z=sl(M)),m.push(T+B+"="+encodeURIComponent(Z))})}catch(M){throw m.push(T+"type="+encodeURIComponent("_badmap")),M}}function Rr(u){this.l=u.Ub||null,this.j=u.eb||!1}U(Rr,bi),Rr.prototype.g=function(){return new Gi(this.l,this.j)},Rr.prototype.i=function(u){return function(){return u}}({});function Gi(u,m){_t.call(this),this.D=u,this.o=m,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}U(Gi,_t),n=Gi.prototype,n.open=function(u,m){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=m,this.readyState=1,qn(this)},n.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const m={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(m.body=u),(this.D||d).fetch(new Request(this.A,m)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,zn(this)),this.readyState=0},n.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,qn(this)),this.g&&(this.readyState=3,qn(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof d.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;eu(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function eu(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}n.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var m=u.value?u.value:new Uint8Array(0);(m=this.v.decode(m,{stream:!u.done}))&&(this.response=this.responseText+=m)}u.done?zn(this):qn(this),this.readyState==3&&eu(this)}},n.Ra=function(u){this.g&&(this.response=this.responseText=u,zn(this))},n.Qa=function(u){this.g&&(this.response=u,zn(this))},n.ga=function(){this.g&&zn(this)};function zn(u){u.readyState=4,u.l=null,u.j=null,u.v=null,qn(u)}n.setRequestHeader=function(u,m){this.u.append(u,m)},n.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],m=this.h.entries();for(var y=m.next();!y.done;)y=y.value,u.push(y[0]+": "+y[1]),y=m.next();return u.join(`\r
`)};function qn(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(Gi.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function Ar(u){let m="";return Me(u,function(y,T){m+=T,m+=":",m+=y,m+=`\r
`}),m}function ti(u,m,y){e:{for(T in y){var T=!1;break e}T=!0}T||(y=Ar(y),typeof u=="string"?y!=null&&encodeURIComponent(String(y)):He(u,m,y))}function tt(u){_t.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}U(tt,_t);var Ah=/^https?$/i,_l=["POST","PUT"];n=tt.prototype,n.Ha=function(u){this.J=u},n.ea=function(u,m,y,T){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);m=m?m.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():bn.g(),this.v=this.o?Ns(this.o):Ns(bn),this.g.onreadystatechange=I(this.Ea,this);try{this.B=!0,this.g.open(m,String(u),!0),this.B=!1}catch(B){Qi(this,B);return}if(u=y||"",y=new Map(this.headers),T)if(Object.getPrototypeOf(T)===Object.prototype)for(var M in T)y.set(M,T[M]);else if(typeof T.keys=="function"&&typeof T.get=="function")for(const B of T.keys())y.set(B,T.get(B));else throw Error("Unknown input type for opt_headers: "+String(T));T=Array.from(y.keys()).find(B=>B.toLowerCase()=="content-type"),M=d.FormData&&u instanceof d.FormData,!(0<=Array.prototype.indexOf.call(_l,m,void 0))||T||M||y.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[B,Z]of y)this.g.setRequestHeader(B,Z);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{zs(this),this.u=!0,this.g.send(u),this.u=!1}catch(B){Qi(this,B)}};function Qi(u,m){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=m,u.m=5,Bs(u),yn(u)}function Bs(u){u.A||(u.A=!0,yt(u,"complete"),yt(u,"error"))}n.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,yt(this,"complete"),yt(this,"abort"),yn(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),yn(this,!0)),tt.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?yl(this):this.bb())},n.bb=function(){yl(this)};function yl(u){if(u.h&&typeof c<"u"&&(!u.v[1]||rn(u)!=4||u.Z()!=2)){if(u.u&&rn(u)==4)nl(u.Ea,0,u);else if(yt(u,"readystatechange"),rn(u)==4){u.h=!1;try{const Z=u.Z();e:switch(Z){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var m=!0;break e;default:m=!1}var y;if(!(y=m)){var T;if(T=Z===0){var M=String(u.D).match(Hi)[1]||null;!M&&d.self&&d.self.location&&(M=d.self.location.protocol.slice(0,-1)),T=!Ah.test(M?M.toLowerCase():"")}y=T}if(y)yt(u,"complete"),yt(u,"success");else{u.m=6;try{var B=2<rn(u)?u.g.statusText:""}catch{B=""}u.l=B+" ["+u.Z()+"]",Bs(u)}}finally{yn(u)}}}}function yn(u,m){if(u.g){zs(u);const y=u.g,T=u.v[0]?()=>{}:null;u.g=null,u.v=null,m||yt(u,"ready");try{y.onreadystatechange=T}catch{}}}function zs(u){u.I&&(d.clearTimeout(u.I),u.I=null)}n.isActive=function(){return!!this.g};function rn(u){return u.g?u.g.readyState:0}n.Z=function(){try{return 2<rn(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(u){if(this.g){var m=this.g.responseText;return u&&m.indexOf(u)==0&&(m=m.substring(u.length)),ol(m)}};function vl(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function qs(u){const m={};u=(u.g&&2<=rn(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let T=0;T<u.length;T++){if(me(u[T]))continue;var y=V(u[T]);const M=y[0];if(y=y[1],typeof y!="string")continue;y=y.trim();const B=m[M]||[];m[M]=B,B.push(y)}D(m,function(T){return T.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function lr(u,m,y){return y&&y.internalChannelParams&&y.internalChannelParams[u]||m}function El(u){this.Aa=0,this.i=[],this.j=new ji,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=lr("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=lr("baseRetryDelayMs",5e3,u),this.cb=lr("retryDelaySeedMs",1e4,u),this.Wa=lr("forwardChannelMaxRetries",2,u),this.wa=lr("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new Wi(u&&u.concurrentRequestLimit),this.Da=new Rh,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=El.prototype,n.la=8,n.G=1,n.connect=function(u,m,y,T){ct(0),this.W=u,this.H=m||{},y&&T!==void 0&&(this.H.OSID=y,this.H.OAID=T),this.F=this.X,this.I=iu(this,null,this.W),ar(this)};function Lt(u){if(Ws(u),u.G==3){var m=u.U++,y=_n(u.I);if(He(y,"SID",u.K),He(y,"RID",m),He(y,"TYPE","terminate"),Pr(u,y),m=new Un(u,u.j,m),m.L=2,m.v=Jr(_n(y)),y=!1,d.navigator&&d.navigator.sendBeacon)try{y=d.navigator.sendBeacon(m.v.toString(),"")}catch{}!y&&d.Image&&(new Image().src=m.v,y=!0),y||(m.g=su(m.j,null),m.g.ea(m.v)),m.F=Date.now(),Qe(m)}ru(u)}function Wn(u){u.g&&(wl(u),u.g.cancel(),u.g=null)}function Ws(u){Wn(u),u.u&&(d.clearTimeout(u.u),u.u=null),Gs(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&d.clearTimeout(u.s),u.s=null)}function ar(u){if(!gn(u.h)&&!u.s){u.s=!0;var m=u.Ga;We||re(),ee||(We(),ee=!0),de.add(m,u),u.B=0}}function Ph(u,m){return Ha(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=m.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=Mn(I(u.Ga,u,m),nu(u,u.B)),u.B++,!0)}n.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;const M=new Un(this,this.j,u);let B=this.o;if(this.S&&(B?(B=S(B),N(B,this.S)):B=this.S),this.m!==null||this.O||(M.H=B,B=null),this.P)e:{for(var m=0,y=0;y<this.i.length;y++){t:{var T=this.i[y];if("__data__"in T.map&&(T=T.map.__data__,typeof T=="string")){T=T.length;break t}T=void 0}if(T===void 0)break;if(m+=T,4096<m){m=y;break e}if(m===4096||y===this.i.length-1){m=y+1;break e}}m=1e3}else m=1e3;m=ni(this,M,m),y=_n(this.I),He(y,"RID",u),He(y,"CVER",22),this.D&&He(y,"X-HTTP-Session-Id",this.D),Pr(this,y),B&&(this.O?m="headers="+encodeURIComponent(String(Ar(B)))+"&"+m:this.m&&ti(y,this.m,B)),ml(this.h,M),this.Ua&&He(y,"TYPE","init"),this.P?(He(y,"$req",m),He(y,"SID","null"),M.T=!0,Fs(M,y,null)):Fs(M,y,m),this.G=2}}else this.G==3&&(u?Hs(this,u):this.i.length==0||gn(this.h)||Hs(this))};function Hs(u,m){var y;m?y=m.l:y=u.U++;const T=_n(u.I);He(T,"SID",u.K),He(T,"RID",y),He(T,"AID",u.T),Pr(u,T),u.m&&u.o&&ti(T,u.m,u.o),y=new Un(u,u.j,y,u.B+1),u.m===null&&(y.H=u.o),m&&(u.i=m.D.concat(u.i)),m=ni(u,y,1e3),y.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),ml(u.h,y),Fs(y,T,m)}function Pr(u,m){u.H&&Me(u.H,function(y,T){He(m,T,y)}),u.l&&Kr({},function(y,T){He(m,T,y)})}function ni(u,m,y){y=Math.min(u.i.length,y);var T=u.l?I(u.l.Na,u.l,u):null;e:{var M=u.i;let B=-1;for(;;){const Z=["count="+y];B==-1?0<y?(B=M[0].g,Z.push("ofs="+B)):B=0:Z.push("ofs="+B);let qe=!0;for(let vt=0;vt<y;vt++){let Le=M[vt].g;const Rt=M[vt].map;if(Le-=B,0>Le)B=Math.max(0,M[vt].g-100),qe=!1;else try{Za(Rt,Z,"req"+Le+"_")}catch{T&&T(Rt)}}if(qe){T=Z.join("&");break e}}}return u=u.i.splice(0,y),m.D=u,T}function Ki(u){if(!u.g&&!u.u){u.Y=1;var m=u.Fa;We||re(),ee||(We(),ee=!0),de.add(m,u),u.v=0}}function $s(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=Mn(I(u.Fa,u),nu(u,u.v)),u.v++,!0)}n.Fa=function(){if(this.u=null,tu(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=Mn(I(this.ab,this),u)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,ct(10),Wn(this),tu(this))};function wl(u){u.A!=null&&(d.clearTimeout(u.A),u.A=null)}function tu(u){u.g=new Un(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var m=_n(u.qa);He(m,"RID","rpc"),He(m,"SID",u.K),He(m,"AID",u.T),He(m,"CI",u.F?"0":"1"),!u.F&&u.ja&&He(m,"TO",u.ja),He(m,"TYPE","xmlhttp"),Pr(u,m),u.m&&u.o&&ti(m,u.m,u.o),u.L&&(u.g.I=u.L);var y=u.g;u=u.ia,y.L=1,y.v=Jr(_n(m)),y.m=null,y.P=!0,fl(y,u)}n.Za=function(){this.C!=null&&(this.C=null,Wn(this),$s(this),ct(19))};function Gs(u){u.C!=null&&(d.clearTimeout(u.C),u.C=null)}function Qs(u,m){var y=null;if(u.g==m){Gs(u),wl(u),u.g=null;var T=2}else if(Jt(u.h,m))y=m.D,$a(u.h,m),T=1;else return;if(u.G!=0){if(m.o)if(T==1){y=m.m?m.m.length:0,m=Date.now()-m.F;var M=u.B;T=Ui(),yt(T,new Vs(T,y)),ar(u)}else Ki(u);else if(M=m.s,M==3||M==0&&0<m.X||!(T==1&&Ph(u,m)||T==2&&$s(u)))switch(y&&0<y.length&&(m=u.h,m.i=m.i.concat(y)),M){case 1:kr(u,5);break;case 4:kr(u,10);break;case 3:kr(u,6);break;default:kr(u,2)}}}function nu(u,m){let y=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(y*=2),y*m}function kr(u,m){if(u.j.info("Error code "+m),m==2){var y=I(u.fb,u),T=u.Xa;const M=!T;T=new Sr(T||"//www.google.com/images/cleardot.gif"),d.location&&d.location.protocol=="http"||$i(T,"https"),Jr(T),M?Sh(T.toString(),y):Ja(T.toString(),y)}else ct(2);u.G=0,u.l&&u.l.sa(m),ru(u),Ws(u)}n.fb=function(u){u?(this.j.info("Successfully pinged google.com"),ct(2)):(this.j.info("Failed to ping google.com"),ct(1))};function ru(u){if(u.G=0,u.ka=[],u.l){const m=Ga(u.h);(m.length!=0||u.i.length!=0)&&(z(u.ka,m),z(u.ka,u.i),u.h.i.length=0,q(u.i),u.i.length=0),u.l.ra()}}function iu(u,m,y){var T=y instanceof Sr?_n(y):new Sr(y);if(T.g!="")m&&(T.g=m+"."+T.g),Yr(T,T.s);else{var M=d.location;T=M.protocol,m=m?m+"."+M.hostname:M.hostname,M=+M.port;var B=new Sr(null);T&&$i(B,T),m&&(B.g=m),M&&Yr(B,M),y&&(B.l=y),T=B}return y=u.D,m=u.ya,y&&m&&He(T,y,m),He(T,"VER",u.la),Pr(u,T),T}function su(u,m,y){if(m&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return m=u.Ca&&!u.pa?new tt(new Rr({eb:y})):new tt(u.pa),m.Ha(u.J),m}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Tl(){}n=Tl.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function Ks(){}Ks.prototype.g=function(u,m){return new Zt(u,m)};function Zt(u,m){_t.call(this),this.g=new El(m),this.l=u,this.h=m&&m.messageUrlParams||null,u=m&&m.messageHeaders||null,m&&m.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=m&&m.initMessageHeaders||null,m&&m.messageContentType&&(u?u["X-WebChannel-Content-Type"]=m.messageContentType:u={"X-WebChannel-Content-Type":m.messageContentType}),m&&m.va&&(u?u["X-WebChannel-Client-Profile"]=m.va:u={"X-WebChannel-Client-Profile":m.va}),this.g.S=u,(u=m&&m.Sb)&&!me(u)&&(this.g.m=u),this.v=m&&m.supportsCrossDomainXhr||!1,this.u=m&&m.sendRawJson||!1,(m=m&&m.httpSessionIdParam)&&!me(m)&&(this.g.D=m,u=this.h,u!==null&&m in u&&(u=this.h,m in u&&delete u[m])),this.j=new ur(this)}U(Zt,_t),Zt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Zt.prototype.close=function(){Lt(this.g)},Zt.prototype.o=function(u){var m=this.g;if(typeof u=="string"){var y={};y.__data__=u,u=y}else this.u&&(y={},y.__data__=sl(u),u=y);m.i.push(new Wa(m.Ya++,u)),m.G==3&&ar(m)},Zt.prototype.N=function(){this.g.l=null,delete this.j,Lt(this.g),delete this.g,Zt.aa.N.call(this)};function ou(u){rr.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var m=u.__sm__;if(m){e:{for(const y in m){u=y;break e}u=void 0}(this.i=u)&&(u=this.i,m=m!==null&&u in m?m[u]:void 0),this.data=m}else this.data=u}U(ou,rr);function lu(){Ds.call(this),this.status=1}U(lu,Ds);function ur(u){this.g=u}U(ur,Tl),ur.prototype.ua=function(){yt(this.g,"a")},ur.prototype.ta=function(u){yt(this.g,new ou(u))},ur.prototype.sa=function(u){yt(this.g,new lu)},ur.prototype.ra=function(){yt(this.g,"b")},Ks.prototype.createWebChannel=Ks.prototype.g,Zt.prototype.send=Zt.prototype.o,Zt.prototype.open=Zt.prototype.m,Zt.prototype.close=Zt.prototype.close,tE=function(){return new Ks},eE=function(){return Ui()},Z0=ir,Mf={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Os.NO_ERROR=0,Os.TIMEOUT=8,Os.HTTP_ERROR=6,mc=Os,ja.COMPLETE="complete",J0=ja,xs.EventType=Rn,Rn.OPEN="a",Rn.CLOSE="b",Rn.ERROR="c",Rn.MESSAGE="d",_t.prototype.listen=_t.prototype.K,Jl=xs,tt.prototype.listenOnce=tt.prototype.L,tt.prototype.getLastError=tt.prototype.Ka,tt.prototype.getLastErrorCode=tt.prototype.Ba,tt.prototype.getStatus=tt.prototype.Z,tt.prototype.getResponseJson=tt.prototype.Oa,tt.prototype.getResponseText=tt.prototype.oa,tt.prototype.send=tt.prototype.ea,tt.prototype.setWithCredentials=tt.prototype.Ha,X0=tt}).apply(typeof rc<"u"?rc:typeof self<"u"?self:typeof window<"u"?window:{});const Ty="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Gt.UNAUTHENTICATED=new Gt(null),Gt.GOOGLE_CREDENTIALS=new Gt("google-credentials-uid"),Gt.FIRST_PARTY=new Gt("first-party-uid"),Gt.MOCK_USER=new Gt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Qo="11.0.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vs=new tp("@firebase/firestore");function vo(){return vs.logLevel}function ie(n,...e){if(vs.logLevel<=xe.DEBUG){const t=e.map(Dp);vs.debug(`Firestore (${Qo}): ${n}`,...t)}}function qr(n,...e){if(vs.logLevel<=xe.ERROR){const t=e.map(Dp);vs.error(`Firestore (${Qo}): ${n}`,...t)}}function Mo(n,...e){if(vs.logLevel<=xe.WARN){const t=e.map(Dp);vs.warn(`Firestore (${Qo}): ${n}`,...t)}}function Dp(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ve(n="Unexpected state"){const e=`FIRESTORE (${Qo}) INTERNAL ASSERTION FAILED: `+n;throw qr(e),new Error(e)}function ze(n,e){n||ve()}function Ee(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class te extends Ho{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mr{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nE{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class wR{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Gt.UNAUTHENTICATED))}shutdown(){}}class TR{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class IR{constructor(e){this.t=e,this.currentUser=Gt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){ze(this.o===void 0);let i=this.i;const o=p=>this.i!==i?(i=this.i,t(p)):Promise.resolve();let l=new mr;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new mr,e.enqueueRetryable(()=>o(this.currentUser))};const c=()=>{const p=l;e.enqueueRetryable(async()=>{await p.promise,await o(this.currentUser)})},d=p=>{ie("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=p,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit(p=>d(p)),setTimeout(()=>{if(!this.auth){const p=this.t.getImmediate({optional:!0});p?d(p):(ie("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new mr)}},0),c()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(i=>this.i!==e?(ie("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(ze(typeof i.accessToken=="string"),new nE(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ze(e===null||typeof e=="string"),new Gt(e)}}class CR{constructor(e,t,i){this.l=e,this.h=t,this.P=i,this.type="FirstParty",this.user=Gt.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.T.set("Authorization",e),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}}class SR{constructor(e,t,i){this.l=e,this.h=t,this.P=i}getToken(){return Promise.resolve(new CR(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(Gt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class RR{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class AR{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){ze(this.o===void 0);const i=l=>{l.error!=null&&ie("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const c=l.token!==this.R;return this.R=l.token,ie("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable(()=>i(l))};const o=l=>{ie("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(l=>o(l)),setTimeout(()=>{if(!this.appCheck){const l=this.A.getImmediate({optional:!0});l?o(l):ie("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(ze(typeof t.token=="string"),this.R=t.token,new RR(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PR(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let i=0;i<n;i++)t[i]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rE{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let i="";for(;i.length<20;){const o=PR(40);for(let l=0;l<o.length;++l)i.length<20&&o[l]<t&&(i+=e.charAt(o[l]%e.length))}return i}}function De(n,e){return n<e?-1:n>e?1:0}function Fo(n,e,t){return n.length===e.length&&n.every((i,o)=>t(i,e[o]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class It{static now(){return It.fromMillis(Date.now())}static fromDate(e){return It.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),i=Math.floor(1e6*(e-1e3*t));return new It(t,i)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new te(H.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new te(H.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new te(H.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new te(H.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?De(this.nanoseconds,e.nanoseconds):De(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Te{static fromTimestamp(e){return new Te(e)}static min(){return new Te(new It(0,0))}static max(){return new Te(new It(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ea{constructor(e,t,i){t===void 0?t=0:t>e.length&&ve(),i===void 0?i=e.length-t:i>e.length-t&&ve(),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return Ea.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Ea?e.forEach(i=>{t.push(i)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const i=Math.min(e.length,t.length);for(let o=0;o<i;o++){const l=e.get(o),c=t.get(o);if(l<c)return-1;if(l>c)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Xe extends Ea{construct(e,t,i){return new Xe(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const i of e){if(i.indexOf("//")>=0)throw new te(H.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter(o=>o.length>0))}return new Xe(t)}static emptyPath(){return new Xe([])}}const kR=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class bt extends Ea{construct(e,t,i){return new bt(e,t,i)}static isValidIdentifier(e){return kR.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),bt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new bt(["__name__"])}static fromServerFormat(e){const t=[];let i="",o=0;const l=()=>{if(i.length===0)throw new te(H.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""};let c=!1;for(;o<e.length;){const d=e[o];if(d==="\\"){if(o+1===e.length)throw new te(H.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const p=e[o+1];if(p!=="\\"&&p!=="."&&p!=="`")throw new te(H.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=p,o+=2}else d==="`"?(c=!c,o++):d!=="."||c?(i+=d,o++):(l(),o++)}if(l(),c)throw new te(H.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new bt(t)}static emptyPath(){return new bt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class he{constructor(e){this.path=e}static fromPath(e){return new he(Xe.fromString(e))}static fromName(e){return new he(Xe.fromString(e).popFirst(5))}static empty(){return new he(Xe.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Xe.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Xe.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new he(new Xe(e.slice()))}}function NR(n,e){const t=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,o=Te.fromTimestamp(i===1e9?new It(t+1,0):new It(t,i));return new Ri(o,he.empty(),e)}function xR(n){return new Ri(n.readTime,n.key,-1)}class Ri{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new Ri(Te.min(),he.empty(),-1)}static max(){return new Ri(Te.max(),he.empty(),-1)}}function DR(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=he.comparator(n.documentKey,e.documentKey),t!==0?t:De(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VR="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class LR{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ko(n){if(n.code!==H.FAILED_PRECONDITION||n.message!==VR)throw n;ie("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ${constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&ve(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new $((i,o)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(i,o)},this.catchCallback=l=>{this.wrapFailure(t,l).next(i,o)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof $?t:$.resolve(t)}catch(t){return $.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):$.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):$.reject(t)}static resolve(e){return new $((t,i)=>{t(e)})}static reject(e){return new $((t,i)=>{i(e)})}static waitFor(e){return new $((t,i)=>{let o=0,l=0,c=!1;e.forEach(d=>{++o,d.next(()=>{++l,c&&l===o&&t()},p=>i(p))}),c=!0,l===o&&t()})}static or(e){let t=$.resolve(!1);for(const i of e)t=t.next(o=>o?$.resolve(o):i());return t}static forEach(e,t){const i=[];return e.forEach((o,l)=>{i.push(t.call(this,o,l))}),this.waitFor(i)}static mapArray(e,t){return new $((i,o)=>{const l=e.length,c=new Array(l);let d=0;for(let p=0;p<l;p++){const _=p;t(e[_]).next(v=>{c[_]=v,++d,d===l&&i(c)},v=>o(v))}})}static doWhile(e,t){return new $((i,o)=>{const l=()=>{e()===!0?t().next(()=>{l()},o):i()};l()})}}function OR(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Yo(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class th{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=i=>this.ie(i),this.se=i=>t.writeSequenceNumber(i))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}th.oe=-1;function nh(n){return n==null}function Fc(n){return n===0&&1/n==-1/0}function MR(n){return typeof n=="number"&&Number.isInteger(n)&&!Fc(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FR(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=Iy(e)),e=bR(n.get(t),e);return Iy(e)}function bR(n,e){let t=e;const i=n.length;for(let o=0;o<i;o++){const l=n.charAt(o);switch(l){case"\0":t+="";break;case"":t+="";break;default:t+=l}}return t}function Iy(n){return n+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cy(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Vi(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function UR(n,e){const t=[];for(const i in n)Object.prototype.hasOwnProperty.call(n,i)&&t.push(e(n[i],i,n));return t}function iE(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class st{constructor(e,t){this.comparator=e,this.root=t||Ft.EMPTY}insert(e,t){return new st(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Ft.BLACK,null,null))}remove(e){return new st(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ft.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const i=this.comparator(e,t.key);if(i===0)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){const o=this.comparator(e,i.key);if(o===0)return t+i.left.size;o<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,i)=>(e(t,i),!1))}toString(){const e=[];return this.inorderTraversal((t,i)=>(e.push(`${t}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ic(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ic(this.root,e,this.comparator,!1)}getReverseIterator(){return new ic(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ic(this.root,e,this.comparator,!0)}}class ic{constructor(e,t,i,o){this.isReverse=o,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?i(e.key,t):1,t&&o&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ft{constructor(e,t,i,o,l){this.key=e,this.value=t,this.color=i??Ft.RED,this.left=o??Ft.EMPTY,this.right=l??Ft.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,o,l){return new Ft(e??this.key,t??this.value,i??this.color,o??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let o=this;const l=i(e,o.key);return o=l<0?o.copy(null,null,null,o.left.insert(e,t,i),null):l===0?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,i)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Ft.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),t(e,o.key)===0){if(o.right.isEmpty())return Ft.EMPTY;i=o.right.min(),o=o.copy(i.key,i.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ft.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ft.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ve();const e=this.left.check();if(e!==this.right.check())throw ve();return e+(this.isRed()?0:1)}}Ft.EMPTY=null,Ft.RED=!0,Ft.BLACK=!1;Ft.EMPTY=new class{constructor(){this.size=0}get key(){throw ve()}get value(){throw ve()}get color(){throw ve()}get left(){throw ve()}get right(){throw ve()}copy(e,t,i,o,l){return this}insert(e,t,i){return new Ft(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ct{constructor(e){this.comparator=e,this.data=new st(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,i)=>(e(t),!1))}forEachInRange(e,t){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const o=i.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let i;for(i=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Sy(this.data.getIterator())}getIteratorFrom(e){return new Sy(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(i=>{t=t.add(i)}),t}isEqual(e){if(!(e instanceof Ct)||this.size!==e.size)return!1;const t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=i.getNext().key;if(this.comparator(o,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Ct(this.comparator);return t.data=e,t}}class Sy{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class er{constructor(e){this.fields=e,e.sort(bt.comparator)}static empty(){return new er([])}unionWith(e){let t=new Ct(bt.comparator);for(const i of this.fields)t=t.add(i);for(const i of e)t=t.add(i);return new er(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Fo(this.fields,e.fields,(t,i)=>t.isEqual(i))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sE extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ut{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(o){try{return atob(o)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new sE("Invalid base64 string: "+l):l}}(e);return new Ut(t)}static fromUint8Array(e){const t=function(o){let l="";for(let c=0;c<o.length;++c)l+=String.fromCharCode(o[c]);return l}(e);return new Ut(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const i=new Uint8Array(t.length);for(let o=0;o<t.length;o++)i[o]=t.charCodeAt(o);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return De(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Ut.EMPTY_BYTE_STRING=new Ut("");const jR=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ai(n){if(ze(!!n),typeof n=="string"){let e=0;const t=jR.exec(n);if(ze(!!t),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:dt(n.seconds),nanos:dt(n.nanos)}}function dt(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Pi(n){return typeof n=="string"?Ut.fromBase64String(n):Ut.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rh(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="server_timestamp"}function ih(n){const e=n.mapValue.fields.__previous_value__;return rh(e)?ih(e):e}function wa(n){const e=Ai(n.mapValue.fields.__local_write_time__.timestampValue);return new It(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BR{constructor(e,t,i,o,l,c,d,p,_){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=o,this.ssl=l,this.forceLongPolling=c,this.autoDetectLongPolling=d,this.longPollingOptions=p,this.useFetchStreams=_}}class Ta{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Ta("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Ta&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sc={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function ki(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?rh(n)?4:qR(n)?9007199254740991:zR(n)?10:11:ve()}function yr(n,e){if(n===e)return!0;const t=ki(n);if(t!==ki(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return wa(n).isEqual(wa(e));case 3:return function(o,l){if(typeof o.timestampValue=="string"&&typeof l.timestampValue=="string"&&o.timestampValue.length===l.timestampValue.length)return o.timestampValue===l.timestampValue;const c=Ai(o.timestampValue),d=Ai(l.timestampValue);return c.seconds===d.seconds&&c.nanos===d.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(o,l){return Pi(o.bytesValue).isEqual(Pi(l.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(o,l){return dt(o.geoPointValue.latitude)===dt(l.geoPointValue.latitude)&&dt(o.geoPointValue.longitude)===dt(l.geoPointValue.longitude)}(n,e);case 2:return function(o,l){if("integerValue"in o&&"integerValue"in l)return dt(o.integerValue)===dt(l.integerValue);if("doubleValue"in o&&"doubleValue"in l){const c=dt(o.doubleValue),d=dt(l.doubleValue);return c===d?Fc(c)===Fc(d):isNaN(c)&&isNaN(d)}return!1}(n,e);case 9:return Fo(n.arrayValue.values||[],e.arrayValue.values||[],yr);case 10:case 11:return function(o,l){const c=o.mapValue.fields||{},d=l.mapValue.fields||{};if(Cy(c)!==Cy(d))return!1;for(const p in c)if(c.hasOwnProperty(p)&&(d[p]===void 0||!yr(c[p],d[p])))return!1;return!0}(n,e);default:return ve()}}function Ia(n,e){return(n.values||[]).find(t=>yr(t,e))!==void 0}function bo(n,e){if(n===e)return 0;const t=ki(n),i=ki(e);if(t!==i)return De(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return De(n.booleanValue,e.booleanValue);case 2:return function(l,c){const d=dt(l.integerValue||l.doubleValue),p=dt(c.integerValue||c.doubleValue);return d<p?-1:d>p?1:d===p?0:isNaN(d)?isNaN(p)?0:-1:1}(n,e);case 3:return Ry(n.timestampValue,e.timestampValue);case 4:return Ry(wa(n),wa(e));case 5:return De(n.stringValue,e.stringValue);case 6:return function(l,c){const d=Pi(l),p=Pi(c);return d.compareTo(p)}(n.bytesValue,e.bytesValue);case 7:return function(l,c){const d=l.split("/"),p=c.split("/");for(let _=0;_<d.length&&_<p.length;_++){const v=De(d[_],p[_]);if(v!==0)return v}return De(d.length,p.length)}(n.referenceValue,e.referenceValue);case 8:return function(l,c){const d=De(dt(l.latitude),dt(c.latitude));return d!==0?d:De(dt(l.longitude),dt(c.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return Ay(n.arrayValue,e.arrayValue);case 10:return function(l,c){var d,p,_,v;const w=l.fields||{},I=c.fields||{},x=(d=w.value)===null||d===void 0?void 0:d.arrayValue,U=(p=I.value)===null||p===void 0?void 0:p.arrayValue,q=De(((_=x==null?void 0:x.values)===null||_===void 0?void 0:_.length)||0,((v=U==null?void 0:U.values)===null||v===void 0?void 0:v.length)||0);return q!==0?q:Ay(x,U)}(n.mapValue,e.mapValue);case 11:return function(l,c){if(l===sc.mapValue&&c===sc.mapValue)return 0;if(l===sc.mapValue)return 1;if(c===sc.mapValue)return-1;const d=l.fields||{},p=Object.keys(d),_=c.fields||{},v=Object.keys(_);p.sort(),v.sort();for(let w=0;w<p.length&&w<v.length;++w){const I=De(p[w],v[w]);if(I!==0)return I;const x=bo(d[p[w]],_[v[w]]);if(x!==0)return x}return De(p.length,v.length)}(n.mapValue,e.mapValue);default:throw ve()}}function Ry(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return De(n,e);const t=Ai(n),i=Ai(e),o=De(t.seconds,i.seconds);return o!==0?o:De(t.nanos,i.nanos)}function Ay(n,e){const t=n.values||[],i=e.values||[];for(let o=0;o<t.length&&o<i.length;++o){const l=bo(t[o],i[o]);if(l)return l}return De(t.length,i.length)}function Uo(n){return Ff(n)}function Ff(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){const i=Ai(t);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return Pi(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return he.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let i="[",o=!0;for(const l of t.values||[])o?o=!1:i+=",",i+=Ff(l);return i+"]"}(n.arrayValue):"mapValue"in n?function(t){const i=Object.keys(t.fields||{}).sort();let o="{",l=!0;for(const c of i)l?l=!1:o+=",",o+=`${c}:${Ff(t.fields[c])}`;return o+"}"}(n.mapValue):ve()}function gc(n){switch(ki(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=ih(n);return e?16+gc(e):16;case 5:return 2*n.stringValue.length;case 6:return Pi(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return function(i){return(i.values||[]).reduce((o,l)=>o+gc(l),0)}(n.arrayValue);case 10:case 11:return function(i){let o=0;return Vi(i.fields,(l,c)=>{o+=l.length+gc(c)}),o}(n.mapValue);default:throw ve()}}function bc(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function bf(n){return!!n&&"integerValue"in n}function Vp(n){return!!n&&"arrayValue"in n}function Py(n){return!!n&&"nullValue"in n}function ky(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function _c(n){return!!n&&"mapValue"in n}function zR(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="__vector__"}function aa(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Vi(n.mapValue.fields,(t,i)=>e.mapValue.fields[t]=aa(i)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=aa(n.arrayValue.values[t]);return e}return Object.assign({},n)}function qR(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cn{constructor(e){this.value=e}static empty(){return new Cn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!_c(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=aa(t)}setAll(e){let t=bt.emptyPath(),i={},o=[];e.forEach((c,d)=>{if(!t.isImmediateParentOf(d)){const p=this.getFieldsMap(t);this.applyChanges(p,i,o),i={},o=[],t=d.popLast()}c?i[d.lastSegment()]=aa(c):o.push(d.lastSegment())});const l=this.getFieldsMap(t);this.applyChanges(l,i,o)}delete(e){const t=this.field(e.popLast());_c(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return yr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let o=t.mapValue.fields[e.get(i)];_c(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,i){Vi(t,(o,l)=>e[o]=l);for(const o of i)delete e[o]}clone(){return new Cn(aa(this.value))}}function oE(n){const e=[];return Vi(n.fields,(t,i)=>{const o=new bt([t]);if(_c(i)){const l=oE(i.mapValue).fields;if(l.length===0)e.push(o);else for(const c of l)e.push(o.child(c))}else e.push(o)}),new er(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xt{constructor(e,t,i,o,l,c,d){this.key=e,this.documentType=t,this.version=i,this.readTime=o,this.createTime=l,this.data=c,this.documentState=d}static newInvalidDocument(e){return new Xt(e,0,Te.min(),Te.min(),Te.min(),Cn.empty(),0)}static newFoundDocument(e,t,i,o){return new Xt(e,1,t,Te.min(),i,o,0)}static newNoDocument(e,t){return new Xt(e,2,t,Te.min(),Te.min(),Cn.empty(),0)}static newUnknownDocument(e,t){return new Xt(e,3,t,Te.min(),Te.min(),Cn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Te.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Cn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Cn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Te.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Xt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Xt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jo{constructor(e,t){this.position=e,this.inclusive=t}}function Ny(n,e,t){let i=0;for(let o=0;o<n.position.length;o++){const l=e[o],c=n.position[o];if(l.field.isKeyField()?i=he.comparator(he.fromName(c.referenceValue),t.key):i=bo(c,t.data.field(l.field)),l.dir==="desc"&&(i*=-1),i!==0)break}return i}function xy(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!yr(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ca{constructor(e,t="asc"){this.field=e,this.dir=t}}function WR(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lE{}class gt extends lE{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,i):new $R(e,t,i):t==="array-contains"?new KR(e,i):t==="in"?new YR(e,i):t==="not-in"?new XR(e,i):t==="array-contains-any"?new JR(e,i):new gt(e,t,i)}static createKeyFieldInFilter(e,t,i){return t==="in"?new GR(e,i):new QR(e,i)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(bo(t,this.value)):t!==null&&ki(this.value)===ki(t)&&this.matchesComparison(bo(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ve()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class nr extends lE{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new nr(e,t)}matches(e){return aE(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function aE(n){return n.op==="and"}function uE(n){return HR(n)&&aE(n)}function HR(n){for(const e of n.filters)if(e instanceof nr)return!1;return!0}function Uf(n){if(n instanceof gt)return n.field.canonicalString()+n.op.toString()+Uo(n.value);if(uE(n))return n.filters.map(e=>Uf(e)).join(",");{const e=n.filters.map(t=>Uf(t)).join(",");return`${n.op}(${e})`}}function cE(n,e){return n instanceof gt?function(i,o){return o instanceof gt&&i.op===o.op&&i.field.isEqual(o.field)&&yr(i.value,o.value)}(n,e):n instanceof nr?function(i,o){return o instanceof nr&&i.op===o.op&&i.filters.length===o.filters.length?i.filters.reduce((l,c,d)=>l&&cE(c,o.filters[d]),!0):!1}(n,e):void ve()}function hE(n){return n instanceof gt?function(t){return`${t.field.canonicalString()} ${t.op} ${Uo(t.value)}`}(n):n instanceof nr?function(t){return t.op.toString()+" {"+t.getFilters().map(hE).join(" ,")+"}"}(n):"Filter"}class $R extends gt{constructor(e,t,i){super(e,t,i),this.key=he.fromName(i.referenceValue)}matches(e){const t=he.comparator(e.key,this.key);return this.matchesComparison(t)}}class GR extends gt{constructor(e,t){super(e,"in",t),this.keys=dE("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class QR extends gt{constructor(e,t){super(e,"not-in",t),this.keys=dE("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function dE(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(i=>he.fromName(i.referenceValue))}class KR extends gt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Vp(t)&&Ia(t.arrayValue,this.value)}}class YR extends gt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Ia(this.value.arrayValue,t)}}class XR extends gt{constructor(e,t){super(e,"not-in",t)}matches(e){if(Ia(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&!Ia(this.value.arrayValue,t)}}class JR extends gt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Vp(t)||!t.arrayValue.values)&&t.arrayValue.values.some(i=>Ia(this.value.arrayValue,i))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZR{constructor(e,t=null,i=[],o=[],l=null,c=null,d=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=o,this.limit=l,this.startAt=c,this.endAt=d,this.ue=null}}function Dy(n,e=null,t=[],i=[],o=null,l=null,c=null){return new ZR(n,e,t,i,o,l,c)}function Lp(n){const e=Ee(n);if(e.ue===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(i=>Uf(i)).join(","),t+="|ob:",t+=e.orderBy.map(i=>function(l){return l.field.canonicalString()+l.dir}(i)).join(","),nh(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(i=>Uo(i)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(i=>Uo(i)).join(",")),e.ue=t}return e.ue}function Op(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!WR(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!cE(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!xy(n.startAt,e.startAt)&&xy(n.endAt,e.endAt)}function jf(n){return he.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Li{constructor(e,t=null,i=[],o=[],l=null,c="F",d=null,p=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=o,this.limit=l,this.limitType=c,this.startAt=d,this.endAt=p,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function eA(n,e,t,i,o,l,c,d){return new Li(n,e,t,i,o,l,c,d)}function Mp(n){return new Li(n)}function Vy(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function Fp(n){return n.collectionGroup!==null}function ko(n){const e=Ee(n);if(e.ce===null){e.ce=[];const t=new Set;for(const l of e.explicitOrderBy)e.ce.push(l),t.add(l.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(c){let d=new Ct(bt.comparator);return c.filters.forEach(p=>{p.getFlattenedFilters().forEach(_=>{_.isInequality()&&(d=d.add(_.field))})}),d})(e).forEach(l=>{t.has(l.canonicalString())||l.isKeyField()||e.ce.push(new Ca(l,i))}),t.has(bt.keyField().canonicalString())||e.ce.push(new Ca(bt.keyField(),i))}return e.ce}function gr(n){const e=Ee(n);return e.le||(e.le=fE(e,ko(n))),e.le}function tA(n){const e=Ee(n);return e.he||(e.he=fE(e,n.explicitOrderBy)),e.he}function fE(n,e){if(n.limitType==="F")return Dy(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(o=>{const l=o.dir==="desc"?"asc":"desc";return new Ca(o.field,l)});const t=n.endAt?new jo(n.endAt.position,n.endAt.inclusive):null,i=n.startAt?new jo(n.startAt.position,n.startAt.inclusive):null;return Dy(n.path,n.collectionGroup,e,n.filters,n.limit,t,i)}}function Bf(n,e){const t=n.filters.concat([e]);return new Li(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Uc(n,e,t){return new Li(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function sh(n,e){return Op(gr(n),gr(e))&&n.limitType===e.limitType}function pE(n){return`${Lp(gr(n))}|lt:${n.limitType}`}function Eo(n){return`Query(target=${function(t){let i=t.path.canonicalString();return t.collectionGroup!==null&&(i+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(i+=`, filters: [${t.filters.map(o=>hE(o)).join(", ")}]`),nh(t.limit)||(i+=", limit: "+t.limit),t.orderBy.length>0&&(i+=`, orderBy: [${t.orderBy.map(o=>function(c){return`${c.field.canonicalString()} (${c.dir})`}(o)).join(", ")}]`),t.startAt&&(i+=", startAt: ",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map(o=>Uo(o)).join(",")),t.endAt&&(i+=", endAt: ",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map(o=>Uo(o)).join(",")),`Target(${i})`}(gr(n))}; limitType=${n.limitType})`}function oh(n,e){return e.isFoundDocument()&&function(i,o){const l=o.key.path;return i.collectionGroup!==null?o.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(l):he.isDocumentKey(i.path)?i.path.isEqual(l):i.path.isImmediateParentOf(l)}(n,e)&&function(i,o){for(const l of ko(i))if(!l.field.isKeyField()&&o.data.field(l.field)===null)return!1;return!0}(n,e)&&function(i,o){for(const l of i.filters)if(!l.matches(o))return!1;return!0}(n,e)&&function(i,o){return!(i.startAt&&!function(c,d,p){const _=Ny(c,d,p);return c.inclusive?_<=0:_<0}(i.startAt,ko(i),o)||i.endAt&&!function(c,d,p){const _=Ny(c,d,p);return c.inclusive?_>=0:_>0}(i.endAt,ko(i),o))}(n,e)}function nA(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function mE(n){return(e,t)=>{let i=!1;for(const o of ko(n)){const l=rA(o,e,t);if(l!==0)return l;i=i||o.field.isKeyField()}return 0}}function rA(n,e,t){const i=n.field.isKeyField()?he.comparator(e.key,t.key):function(l,c,d){const p=c.data.field(l),_=d.data.field(l);return p!==null&&_!==null?bo(p,_):ve()}(n.field,e,t);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return ve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ts{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i!==void 0){for(const[o,l]of i)if(this.equalsFn(o,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const i=this.mapKeyFn(e),o=this.inner[i];if(o===void 0)return this.inner[i]=[[e,t]],void this.innerSize++;for(let l=0;l<o.length;l++)if(this.equalsFn(o[l][0],e))return void(o[l]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i===void 0)return!1;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return i.length===1?delete this.inner[t]:i.splice(o,1),this.innerSize--,!0;return!1}forEach(e){Vi(this.inner,(t,i)=>{for(const[o,l]of i)e(o,l)})}isEmpty(){return iE(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iA=new st(he.comparator);function Wr(){return iA}const gE=new st(he.comparator);function Zl(...n){let e=gE;for(const t of n)e=e.insert(t.key,t);return e}function _E(n){let e=gE;return n.forEach((t,i)=>e=e.insert(t,i.overlayedDocument)),e}function ds(){return ua()}function yE(){return ua()}function ua(){return new Ts(n=>n.toString(),(n,e)=>n.isEqual(e))}const sA=new st(he.comparator),oA=new Ct(he.comparator);function ke(...n){let e=oA;for(const t of n)e=e.add(t);return e}const lA=new Ct(De);function aA(){return lA}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bp(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Fc(e)?"-0":e}}function vE(n){return{integerValue:""+n}}function uA(n,e){return MR(e)?vE(e):bp(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lh{constructor(){this._=void 0}}function cA(n,e,t){return n instanceof jc?function(o,l){const c={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return l&&rh(l)&&(l=ih(l)),l&&(c.fields.__previous_value__=l),{mapValue:c}}(t,e):n instanceof Sa?wE(n,e):n instanceof Ra?TE(n,e):function(o,l){const c=EE(o,l),d=Ly(c)+Ly(o.Pe);return bf(c)&&bf(o.Pe)?vE(d):bp(o.serializer,d)}(n,e)}function hA(n,e,t){return n instanceof Sa?wE(n,e):n instanceof Ra?TE(n,e):t}function EE(n,e){return n instanceof Bc?function(i){return bf(i)||function(l){return!!l&&"doubleValue"in l}(i)}(e)?e:{integerValue:0}:null}class jc extends lh{}class Sa extends lh{constructor(e){super(),this.elements=e}}function wE(n,e){const t=IE(e);for(const i of n.elements)t.some(o=>yr(o,i))||t.push(i);return{arrayValue:{values:t}}}class Ra extends lh{constructor(e){super(),this.elements=e}}function TE(n,e){let t=IE(e);for(const i of n.elements)t=t.filter(o=>!yr(o,i));return{arrayValue:{values:t}}}class Bc extends lh{constructor(e,t){super(),this.serializer=e,this.Pe=t}}function Ly(n){return dt(n.integerValue||n.doubleValue)}function IE(n){return Vp(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function dA(n,e){return n.field.isEqual(e.field)&&function(i,o){return i instanceof Sa&&o instanceof Sa||i instanceof Ra&&o instanceof Ra?Fo(i.elements,o.elements,yr):i instanceof Bc&&o instanceof Bc?yr(i.Pe,o.Pe):i instanceof jc&&o instanceof jc}(n.transform,e.transform)}class fA{constructor(e,t){this.version=e,this.transformResults=t}}class jr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new jr}static exists(e){return new jr(void 0,e)}static updateTime(e){return new jr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function yc(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class ah{}function CE(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new RE(n.key,jr.none()):new uh(n.key,n.data,jr.none());{const t=n.data,i=Cn.empty();let o=new Ct(bt.comparator);for(let l of e.fields)if(!o.has(l)){let c=t.field(l);c===null&&l.length>1&&(l=l.popLast(),c=t.field(l)),c===null?i.delete(l):i.set(l,c),o=o.add(l)}return new Is(n.key,i,new er(o.toArray()),jr.none())}}function pA(n,e,t){n instanceof uh?function(o,l,c){const d=o.value.clone(),p=My(o.fieldTransforms,l,c.transformResults);d.setAll(p),l.convertToFoundDocument(c.version,d).setHasCommittedMutations()}(n,e,t):n instanceof Is?function(o,l,c){if(!yc(o.precondition,l))return void l.convertToUnknownDocument(c.version);const d=My(o.fieldTransforms,l,c.transformResults),p=l.data;p.setAll(SE(o)),p.setAll(d),l.convertToFoundDocument(c.version,p).setHasCommittedMutations()}(n,e,t):function(o,l,c){l.convertToNoDocument(c.version).setHasCommittedMutations()}(0,e,t)}function ca(n,e,t,i){return n instanceof uh?function(l,c,d,p){if(!yc(l.precondition,c))return d;const _=l.value.clone(),v=Fy(l.fieldTransforms,p,c);return _.setAll(v),c.convertToFoundDocument(c.version,_).setHasLocalMutations(),null}(n,e,t,i):n instanceof Is?function(l,c,d,p){if(!yc(l.precondition,c))return d;const _=Fy(l.fieldTransforms,p,c),v=c.data;return v.setAll(SE(l)),v.setAll(_),c.convertToFoundDocument(c.version,v).setHasLocalMutations(),d===null?null:d.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map(w=>w.field))}(n,e,t,i):function(l,c,d){return yc(l.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):d}(n,e,t)}function mA(n,e){let t=null;for(const i of n.fieldTransforms){const o=e.data.field(i.field),l=EE(i.transform,o||null);l!=null&&(t===null&&(t=Cn.empty()),t.set(i.field,l))}return t||null}function Oy(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(i,o){return i===void 0&&o===void 0||!(!i||!o)&&Fo(i,o,(l,c)=>dA(l,c))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class uh extends ah{constructor(e,t,i,o=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class Is extends ah{constructor(e,t,i,o,l=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=o,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function SE(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const i=n.data.field(t);e.set(t,i)}}),e}function My(n,e,t){const i=new Map;ze(n.length===t.length);for(let o=0;o<t.length;o++){const l=n[o],c=l.transform,d=e.data.field(l.field);i.set(l.field,hA(c,d,t[o]))}return i}function Fy(n,e,t){const i=new Map;for(const o of n){const l=o.transform,c=t.data.field(o.field);i.set(o.field,cA(l,c,e))}return i}class RE extends ah{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class gA extends ah{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _A{constructor(e,t,i,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=o}applyToRemoteDocument(e,t){const i=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const l=this.mutations[o];l.key.isEqual(e.key)&&pA(l,e,i[o])}}applyToLocalView(e,t){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(t=ca(i,e,t,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(t=ca(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const i=yE();return this.mutations.forEach(o=>{const l=e.get(o.key),c=l.overlayedDocument;let d=this.applyToLocalView(c,l.mutatedFields);d=t.has(o.key)?null:d;const p=CE(c,d);p!==null&&i.set(o.key,p),c.isValidDocument()||c.convertToNoDocument(Te.min())}),i}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),ke())}isEqual(e){return this.batchId===e.batchId&&Fo(this.mutations,e.mutations,(t,i)=>Oy(t,i))&&Fo(this.baseMutations,e.baseMutations,(t,i)=>Oy(t,i))}}class Up{constructor(e,t,i,o){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=o}static from(e,t,i){ze(e.mutations.length===i.length);let o=function(){return sA}();const l=e.mutations;for(let c=0;c<l.length;c++)o=o.insert(l[c].key,i[c].version);return new Up(e,t,i,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yA{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vA{constructor(e,t,i){this.alias=e,this.aggregateType=t,this.fieldPath=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EA{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var mt,Oe;function wA(n){switch(n){default:return ve();case H.CANCELLED:case H.UNKNOWN:case H.DEADLINE_EXCEEDED:case H.RESOURCE_EXHAUSTED:case H.INTERNAL:case H.UNAVAILABLE:case H.UNAUTHENTICATED:return!1;case H.INVALID_ARGUMENT:case H.NOT_FOUND:case H.ALREADY_EXISTS:case H.PERMISSION_DENIED:case H.FAILED_PRECONDITION:case H.ABORTED:case H.OUT_OF_RANGE:case H.UNIMPLEMENTED:case H.DATA_LOSS:return!0}}function AE(n){if(n===void 0)return qr("GRPC error has no .code"),H.UNKNOWN;switch(n){case mt.OK:return H.OK;case mt.CANCELLED:return H.CANCELLED;case mt.UNKNOWN:return H.UNKNOWN;case mt.DEADLINE_EXCEEDED:return H.DEADLINE_EXCEEDED;case mt.RESOURCE_EXHAUSTED:return H.RESOURCE_EXHAUSTED;case mt.INTERNAL:return H.INTERNAL;case mt.UNAVAILABLE:return H.UNAVAILABLE;case mt.UNAUTHENTICATED:return H.UNAUTHENTICATED;case mt.INVALID_ARGUMENT:return H.INVALID_ARGUMENT;case mt.NOT_FOUND:return H.NOT_FOUND;case mt.ALREADY_EXISTS:return H.ALREADY_EXISTS;case mt.PERMISSION_DENIED:return H.PERMISSION_DENIED;case mt.FAILED_PRECONDITION:return H.FAILED_PRECONDITION;case mt.ABORTED:return H.ABORTED;case mt.OUT_OF_RANGE:return H.OUT_OF_RANGE;case mt.UNIMPLEMENTED:return H.UNIMPLEMENTED;case mt.DATA_LOSS:return H.DATA_LOSS;default:return ve()}}(Oe=mt||(mt={}))[Oe.OK=0]="OK",Oe[Oe.CANCELLED=1]="CANCELLED",Oe[Oe.UNKNOWN=2]="UNKNOWN",Oe[Oe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Oe[Oe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Oe[Oe.NOT_FOUND=5]="NOT_FOUND",Oe[Oe.ALREADY_EXISTS=6]="ALREADY_EXISTS",Oe[Oe.PERMISSION_DENIED=7]="PERMISSION_DENIED",Oe[Oe.UNAUTHENTICATED=16]="UNAUTHENTICATED",Oe[Oe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Oe[Oe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Oe[Oe.ABORTED=10]="ABORTED",Oe[Oe.OUT_OF_RANGE=11]="OUT_OF_RANGE",Oe[Oe.UNIMPLEMENTED=12]="UNIMPLEMENTED",Oe[Oe.INTERNAL=13]="INTERNAL",Oe[Oe.UNAVAILABLE=14]="UNAVAILABLE",Oe[Oe.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TA(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IA=new ps([4294967295,4294967295],0);function by(n){const e=TA().encode(n),t=new Y0;return t.update(e),new Uint8Array(t.digest())}function Uy(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),i=e.getUint32(4,!0),o=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new ps([t,i],0),new ps([o,l],0)]}class jp{constructor(e,t,i){if(this.bitmap=e,this.padding=t,this.hashCount=i,t<0||t>=8)throw new ea(`Invalid padding: ${t}`);if(i<0)throw new ea(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new ea(`Invalid hash count: ${i}`);if(e.length===0&&t!==0)throw new ea(`Invalid padding when bitmap length is 0: ${t}`);this.Te=8*e.length-t,this.Ie=ps.fromNumber(this.Te)}Ee(e,t,i){let o=e.add(t.multiply(ps.fromNumber(i)));return o.compare(IA)===1&&(o=new ps([o.getBits(0),o.getBits(1)],0)),o.modulo(this.Ie).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Te===0)return!1;const t=by(e),[i,o]=Uy(t);for(let l=0;l<this.hashCount;l++){const c=this.Ee(i,o,l);if(!this.de(c))return!1}return!0}static create(e,t,i){const o=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),c=new jp(l,o,t);return i.forEach(d=>c.insert(d)),c}insert(e){if(this.Te===0)return;const t=by(e),[i,o]=Uy(t);for(let l=0;l<this.hashCount;l++){const c=this.Ee(i,o,l);this.Ae(c)}}Ae(e){const t=Math.floor(e/8),i=e%8;this.bitmap[t]|=1<<i}}class ea extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ch{constructor(e,t,i,o,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=o,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,i){const o=new Map;return o.set(e,Va.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new ch(Te.min(),o,new st(De),Wr(),ke())}}class Va{constructor(e,t,i,o,l){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=o,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new Va(i,t,ke(),ke(),ke())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vc{constructor(e,t,i,o){this.Re=e,this.removedTargetIds=t,this.key=i,this.Ve=o}}class PE{constructor(e,t){this.targetId=e,this.me=t}}class kE{constructor(e,t,i=Ut.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=o}}class jy{constructor(){this.fe=0,this.ge=By(),this.pe=Ut.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=ke(),t=ke(),i=ke();return this.ge.forEach((o,l)=>{switch(l){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:i=i.add(o);break;default:ve()}}),new Va(this.pe,this.ye,e,t,i)}Ce(){this.we=!1,this.ge=By()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,ze(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class CA{constructor(e){this.Le=e,this.Be=new Map,this.ke=Wr(),this.qe=oc(),this.Qe=oc(),this.Ke=new st(De)}$e(e){for(const t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.Ue(t,e.Ve):this.We(t,e.key,e.Ve);for(const t of e.removedTargetIds)this.We(t,e.key,e.Ve)}Ge(e){this.forEachTarget(e,t=>{const i=this.ze(t);switch(e.state){case 0:this.je(t)&&i.De(e.resumeToken);break;case 1:i.Oe(),i.Se||i.Ce(),i.De(e.resumeToken);break;case 2:i.Oe(),i.Se||this.removeTarget(t);break;case 3:this.je(t)&&(i.Ne(),i.De(e.resumeToken));break;case 4:this.je(t)&&(this.He(t),i.De(e.resumeToken));break;default:ve()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach((i,o)=>{this.je(o)&&t(o)})}Je(e){const t=e.targetId,i=e.me.count,o=this.Ye(t);if(o){const l=o.target;if(jf(l))if(i===0){const c=new he(l.path);this.We(t,c,Xt.newNoDocument(c,Te.min()))}else ze(i===1);else{const c=this.Ze(t);if(c!==i){const d=this.Xe(e),p=d?this.et(d,e,c):1;if(p!==0){this.He(t);const _=p===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(t,_)}}}}}Xe(e){const t=e.me.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:i="",padding:o=0},hashCount:l=0}=t;let c,d;try{c=Pi(i).toUint8Array()}catch(p){if(p instanceof sE)return Mo("Decoding the base64 bloom filter in existence filter failed ("+p.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw p}try{d=new jp(c,o,l)}catch(p){return Mo(p instanceof ea?"BloomFilter error: ":"Applying bloom filter failed: ",p),null}return d.Te===0?null:d}et(e,t,i){return t.me.count===i-this.rt(e,t.targetId)?0:2}rt(e,t){const i=this.Le.getRemoteKeysForTarget(t);let o=0;return i.forEach(l=>{const c=this.Le.nt(),d=`projects/${c.projectId}/databases/${c.database}/documents/${l.path.canonicalString()}`;e.mightContain(d)||(this.We(t,l,null),o++)}),o}it(e){const t=new Map;this.Be.forEach((l,c)=>{const d=this.Ye(c);if(d){if(l.current&&jf(d.target)){const p=new he(d.target.path);this.st(p).has(c)||this.ot(c,p)||this.We(c,p,Xt.newNoDocument(p,e))}l.be&&(t.set(c,l.ve()),l.Ce())}});let i=ke();this.Qe.forEach((l,c)=>{let d=!0;c.forEachWhile(p=>{const _=this.Ye(p);return!_||_.purpose==="TargetPurposeLimboResolution"||(d=!1,!1)}),d&&(i=i.add(l))}),this.ke.forEach((l,c)=>c.setReadTime(e));const o=new ch(e,t,this.Ke,this.ke,i);return this.ke=Wr(),this.qe=oc(),this.Qe=oc(),this.Ke=new st(De),o}Ue(e,t){if(!this.je(e))return;const i=this.ot(e,t.key)?2:0;this.ze(e).Fe(t.key,i),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e)),this.Qe=this.Qe.insert(t.key,this._t(t.key).add(e))}We(e,t,i){if(!this.je(e))return;const o=this.ze(e);this.ot(e,t)?o.Fe(t,1):o.Me(t),this.Qe=this.Qe.insert(t,this._t(t).delete(e)),this.Qe=this.Qe.insert(t,this._t(t).add(e)),i&&(this.ke=this.ke.insert(t,i))}removeTarget(e){this.Be.delete(e)}Ze(e){const t=this.ze(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.ze(e).xe()}ze(e){let t=this.Be.get(e);return t||(t=new jy,this.Be.set(e,t)),t}_t(e){let t=this.Qe.get(e);return t||(t=new Ct(De),this.Qe=this.Qe.insert(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new Ct(De),this.qe=this.qe.insert(e,t)),t}je(e){const t=this.Ye(e)!==null;return t||ie("WatchChangeAggregator","Detected inactive target",e),t}Ye(e){const t=this.Be.get(e);return t&&t.Se?null:this.Le.ut(e)}He(e){this.Be.set(e,new jy),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.We(e,t,null)})}ot(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}}function oc(){return new st(he.comparator)}function By(){return new st(he.comparator)}const SA={asc:"ASCENDING",desc:"DESCENDING"},RA={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},AA={and:"AND",or:"OR"};class PA{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function zf(n,e){return n.useProto3Json||nh(e)?e:{value:e}}function zc(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function NE(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function kA(n,e){return zc(n,e.toTimestamp())}function _r(n){return ze(!!n),Te.fromTimestamp(function(t){const i=Ai(t);return new It(i.seconds,i.nanos)}(n))}function Bp(n,e){return qf(n,e).canonicalString()}function qf(n,e){const t=function(o){return new Xe(["projects",o.projectId,"databases",o.database])}(n).child("documents");return e===void 0?t:t.child(e)}function xE(n){const e=Xe.fromString(n);return ze(FE(e)),e}function Wf(n,e){return Bp(n.databaseId,e.path)}function hf(n,e){const t=xE(e);if(t.get(1)!==n.databaseId.projectId)throw new te(H.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new te(H.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new he(VE(t))}function DE(n,e){return Bp(n.databaseId,e)}function NA(n){const e=xE(n);return e.length===4?Xe.emptyPath():VE(e)}function Hf(n){return new Xe(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function VE(n){return ze(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function zy(n,e,t){return{name:Wf(n,e),fields:t.value.mapValue.fields}}function xA(n,e){let t;if("targetChange"in e){e.targetChange;const i=function(_){return _==="NO_CHANGE"?0:_==="ADD"?1:_==="REMOVE"?2:_==="CURRENT"?3:_==="RESET"?4:ve()}(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],l=function(_,v){return _.useProto3Json?(ze(v===void 0||typeof v=="string"),Ut.fromBase64String(v||"")):(ze(v===void 0||v instanceof Buffer||v instanceof Uint8Array),Ut.fromUint8Array(v||new Uint8Array))}(n,e.targetChange.resumeToken),c=e.targetChange.cause,d=c&&function(_){const v=_.code===void 0?H.UNKNOWN:AE(_.code);return new te(v,_.message||"")}(c);t=new kE(i,o,l,d||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const o=hf(n,i.document.name),l=_r(i.document.updateTime),c=i.document.createTime?_r(i.document.createTime):Te.min(),d=new Cn({mapValue:{fields:i.document.fields}}),p=Xt.newFoundDocument(o,l,c,d),_=i.targetIds||[],v=i.removedTargetIds||[];t=new vc(_,v,p.key,p)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const o=hf(n,i.document),l=i.readTime?_r(i.readTime):Te.min(),c=Xt.newNoDocument(o,l),d=i.removedTargetIds||[];t=new vc([],d,c.key,c)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const o=hf(n,i.document),l=i.removedTargetIds||[];t=new vc([],l,o,null)}else{if(!("filter"in e))return ve();{e.filter;const i=e.filter;i.targetId;const{count:o=0,unchangedNames:l}=i,c=new EA(o,l),d=i.targetId;t=new PE(d,c)}}return t}function DA(n,e){let t;if(e instanceof uh)t={update:zy(n,e.key,e.value)};else if(e instanceof RE)t={delete:Wf(n,e.key)};else if(e instanceof Is)t={update:zy(n,e.key,e.data),updateMask:BA(e.fieldMask)};else{if(!(e instanceof gA))return ve();t={verify:Wf(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(i=>function(l,c){const d=c.transform;if(d instanceof jc)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof Sa)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof Ra)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof Bc)return{fieldPath:c.field.canonicalString(),increment:d.Pe};throw ve()}(0,i))),e.precondition.isNone||(t.currentDocument=function(o,l){return l.updateTime!==void 0?{updateTime:kA(o,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:ve()}(n,e.precondition)),t}function VA(n,e){return n&&n.length>0?(ze(e!==void 0),n.map(t=>function(o,l){let c=o.updateTime?_r(o.updateTime):_r(l);return c.isEqual(Te.min())&&(c=_r(l)),new fA(c,o.transformResults||[])}(t,e))):[]}function LA(n,e){return{documents:[DE(n,e.path)]}}function LE(n,e){const t={structuredQuery:{}},i=e.path;let o;e.collectionGroup!==null?(o=i,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=i.popLast(),t.structuredQuery.from=[{collectionId:i.lastSegment()}]),t.parent=DE(n,o);const l=function(_){if(_.length!==0)return ME(nr.create(_,"and"))}(e.filters);l&&(t.structuredQuery.where=l);const c=function(_){if(_.length!==0)return _.map(v=>function(I){return{field:_i(I.field),direction:bA(I.dir)}}(v))}(e.orderBy);c&&(t.structuredQuery.orderBy=c);const d=zf(n,e.limit);return d!==null&&(t.structuredQuery.limit=d),e.startAt&&(t.structuredQuery.startAt=function(_){return{before:_.inclusive,values:_.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(_){return{before:!_.inclusive,values:_.position}}(e.endAt)),{ct:t,parent:o}}function OA(n,e,t,i){const{ct:o,parent:l}=LE(n,e),c={},d=[];let p=0;return t.forEach(_=>{const v="aggregate_"+p++;c[v]=_.alias,_.aggregateType==="count"?d.push({alias:v,count:{}}):_.aggregateType==="avg"?d.push({alias:v,avg:{field:_i(_.fieldPath)}}):_.aggregateType==="sum"&&d.push({alias:v,sum:{field:_i(_.fieldPath)}})}),{request:{structuredAggregationQuery:{aggregations:d,structuredQuery:o.structuredQuery},parent:o.parent},lt:c,parent:l}}function MA(n){let e=NA(n.parent);const t=n.structuredQuery,i=t.from?t.from.length:0;let o=null;if(i>0){ze(i===1);const v=t.from[0];v.allDescendants?o=v.collectionId:e=e.child(v.collectionId)}let l=[];t.where&&(l=function(w){const I=OE(w);return I instanceof nr&&uE(I)?I.getFilters():[I]}(t.where));let c=[];t.orderBy&&(c=function(w){return w.map(I=>function(U){return new Ca(wo(U.field),function(z){switch(z){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(U.direction))}(I))}(t.orderBy));let d=null;t.limit&&(d=function(w){let I;return I=typeof w=="object"?w.value:w,nh(I)?null:I}(t.limit));let p=null;t.startAt&&(p=function(w){const I=!!w.before,x=w.values||[];return new jo(x,I)}(t.startAt));let _=null;return t.endAt&&(_=function(w){const I=!w.before,x=w.values||[];return new jo(x,I)}(t.endAt)),eA(e,o,c,l,d,"F",p,_)}function FA(n,e){const t=function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ve()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function OE(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const i=wo(t.unaryFilter.field);return gt.create(i,"==",{doubleValue:NaN});case"IS_NULL":const o=wo(t.unaryFilter.field);return gt.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=wo(t.unaryFilter.field);return gt.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=wo(t.unaryFilter.field);return gt.create(c,"!=",{nullValue:"NULL_VALUE"});default:return ve()}}(n):n.fieldFilter!==void 0?function(t){return gt.create(wo(t.fieldFilter.field),function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ve()}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return nr.create(t.compositeFilter.filters.map(i=>OE(i)),function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return ve()}}(t.compositeFilter.op))}(n):ve()}function bA(n){return SA[n]}function UA(n){return RA[n]}function jA(n){return AA[n]}function _i(n){return{fieldPath:n.canonicalString()}}function wo(n){return bt.fromServerFormat(n.fieldPath)}function ME(n){return n instanceof gt?function(t){if(t.op==="=="){if(ky(t.value))return{unaryFilter:{field:_i(t.field),op:"IS_NAN"}};if(Py(t.value))return{unaryFilter:{field:_i(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(ky(t.value))return{unaryFilter:{field:_i(t.field),op:"IS_NOT_NAN"}};if(Py(t.value))return{unaryFilter:{field:_i(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:_i(t.field),op:UA(t.op),value:t.value}}}(n):n instanceof nr?function(t){const i=t.getFilters().map(o=>ME(o));return i.length===1?i[0]:{compositeFilter:{op:jA(t.op),filters:i}}}(n):ve()}function BA(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function FE(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yi{constructor(e,t,i,o,l=Te.min(),c=Te.min(),d=Ut.EMPTY_BYTE_STRING,p=null){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=o,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=d,this.expectedCount=p}withSequenceNumber(e){return new yi(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new yi(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new yi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new yi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zA{constructor(e){this.ht=e}}function qA(n){const e=MA({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Uc(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WA{constructor(){this.ln=new HA}addToCollectionParentIndex(e,t){return this.ln.add(t),$.resolve()}getCollectionParents(e,t){return $.resolve(this.ln.getEntries(t))}addFieldIndex(e,t){return $.resolve()}deleteFieldIndex(e,t){return $.resolve()}deleteAllFieldIndexes(e){return $.resolve()}createTargetIndexes(e,t){return $.resolve()}getDocumentsMatchingTarget(e,t){return $.resolve(null)}getIndexType(e,t){return $.resolve(0)}getFieldIndexes(e,t){return $.resolve([])}getNextCollectionGroupToUpdate(e){return $.resolve(null)}getMinOffset(e,t){return $.resolve(Ri.min())}getMinOffsetFromCollectionGroup(e,t){return $.resolve(Ri.min())}updateCollectionGroup(e,t,i){return $.resolve()}updateIndexEntries(e,t){return $.resolve()}}class HA{constructor(){this.index={}}add(e){const t=e.lastSegment(),i=e.popLast(),o=this.index[t]||new Ct(Xe.comparator),l=!o.has(i);return this.index[t]=o.add(i),l}has(e){const t=e.lastSegment(),i=e.popLast(),o=this.index[t];return o&&o.has(i)}getEntries(e){return(this.index[e]||new Ct(Xe.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qy={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class hn{static withCacheSize(e){return new hn(e,hn.DEFAULT_COLLECTION_PERCENTILE,hn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */hn.DEFAULT_COLLECTION_PERCENTILE=10,hn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,hn.DEFAULT=new hn(41943040,hn.DEFAULT_COLLECTION_PERCENTILE,hn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),hn.DISABLED=new hn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bo{constructor(e){this.kn=e}next(){return this.kn+=2,this.kn}static qn(){return new Bo(0)}static Qn(){return new Bo(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wy([n,e],[t,i]){const o=De(n,t);return o===0?De(e,i):o}class $A{constructor(e){this.Gn=e,this.buffer=new Ct(Wy),this.zn=0}jn(){return++this.zn}Hn(e){const t=[e,this.jn()];if(this.buffer.size<this.Gn)this.buffer=this.buffer.add(t);else{const i=this.buffer.last();Wy(t,i)<0&&(this.buffer=this.buffer.delete(i).add(t))}}get maxValue(){return this.buffer.last()[0]}}class GA{constructor(e,t,i){this.garbageCollector=e,this.asyncQueue=t,this.localStore=i,this.Jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Yn(6e4)}stop(){this.Jn&&(this.Jn.cancel(),this.Jn=null)}get started(){return this.Jn!==null}Yn(e){ie("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Jn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Yo(t)?ie("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",t):await Ko(t)}await this.Yn(3e5)})}}class QA{constructor(e,t){this.Zn=e,this.params=t}calculateTargetCount(e,t){return this.Zn.Xn(e).next(i=>Math.floor(t/100*i))}nthSequenceNumber(e,t){if(t===0)return $.resolve(th.oe);const i=new $A(t);return this.Zn.forEachTarget(e,o=>i.Hn(o.sequenceNumber)).next(()=>this.Zn.er(e,o=>i.Hn(o))).next(()=>i.maxValue)}removeTargets(e,t,i){return this.Zn.removeTargets(e,t,i)}removeOrphanedDocuments(e,t){return this.Zn.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(ie("LruGarbageCollector","Garbage collection skipped; disabled"),$.resolve(qy)):this.getCacheSize(e).next(i=>i<this.params.cacheSizeCollectionThreshold?(ie("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),qy):this.tr(e,t))}getCacheSize(e){return this.Zn.getCacheSize(e)}tr(e,t){let i,o,l,c,d,p,_;const v=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(w=>(w>this.params.maximumSequenceNumbersToCollect?(ie("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${w}`),o=this.params.maximumSequenceNumbersToCollect):o=w,c=Date.now(),this.nthSequenceNumber(e,o))).next(w=>(i=w,d=Date.now(),this.removeTargets(e,i,t))).next(w=>(l=w,p=Date.now(),this.removeOrphanedDocuments(e,i))).next(w=>(_=Date.now(),vo()<=xe.DEBUG&&ie("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-v}ms
	Determined least recently used ${o} in `+(d-c)+`ms
	Removed ${l} targets in `+(p-d)+`ms
	Removed ${w} documents in `+(_-p)+`ms
Total Duration: ${_-v}ms`),$.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:l,documentsRemoved:w})))}}function KA(n,e){return new QA(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YA{constructor(){this.changes=new Ts(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Xt.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const i=this.changes.get(t);return i!==void 0?$.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XA{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JA{constructor(e,t,i,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=o}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next(o=>(i=o,this.remoteDocumentCache.getEntry(e,t))).next(o=>(i!==null&&ca(i.mutation,o,er.empty(),It.now()),o))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(i=>this.getLocalViewOfDocuments(e,i,ke()).next(()=>i))}getLocalViewOfDocuments(e,t,i=ke()){const o=ds();return this.populateOverlays(e,o,t).next(()=>this.computeViews(e,t,o,i).next(l=>{let c=Zl();return l.forEach((d,p)=>{c=c.insert(d,p.overlayedDocument)}),c}))}getOverlayedDocuments(e,t){const i=ds();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,ke()))}populateOverlays(e,t,i){const o=[];return i.forEach(l=>{t.has(l)||o.push(l)}),this.documentOverlayCache.getOverlays(e,o).next(l=>{l.forEach((c,d)=>{t.set(c,d)})})}computeViews(e,t,i,o){let l=Wr();const c=ua(),d=function(){return ua()}();return t.forEach((p,_)=>{const v=i.get(_.key);o.has(_.key)&&(v===void 0||v.mutation instanceof Is)?l=l.insert(_.key,_):v!==void 0?(c.set(_.key,v.mutation.getFieldMask()),ca(v.mutation,_,v.mutation.getFieldMask(),It.now())):c.set(_.key,er.empty())}),this.recalculateAndSaveOverlays(e,l).next(p=>(p.forEach((_,v)=>c.set(_,v)),t.forEach((_,v)=>{var w;return d.set(_,new XA(v,(w=c.get(_))!==null&&w!==void 0?w:null))}),d))}recalculateAndSaveOverlays(e,t){const i=ua();let o=new st((c,d)=>c-d),l=ke();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(c=>{for(const d of c)d.keys().forEach(p=>{const _=t.get(p);if(_===null)return;let v=i.get(p)||er.empty();v=d.applyToLocalView(_,v),i.set(p,v);const w=(o.get(d.batchId)||ke()).add(p);o=o.insert(d.batchId,w)})}).next(()=>{const c=[],d=o.getReverseIterator();for(;d.hasNext();){const p=d.getNext(),_=p.key,v=p.value,w=yE();v.forEach(I=>{if(!l.has(I)){const x=CE(t.get(I),i.get(I));x!==null&&w.set(I,x),l=l.add(I)}}),c.push(this.documentOverlayCache.saveOverlays(e,_,w))}return $.waitFor(c)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,t,i,o){return function(c){return he.isDocumentKey(c.path)&&c.collectionGroup===null&&c.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Fp(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i,o):this.getDocumentsMatchingCollectionQuery(e,t,i,o)}getNextDocuments(e,t,i,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,o).next(l=>{const c=o-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,o-l.size):$.resolve(ds());let d=-1,p=l;return c.next(_=>$.forEach(_,(v,w)=>(d<w.largestBatchId&&(d=w.largestBatchId),l.get(v)?$.resolve():this.remoteDocumentCache.getEntry(e,v).next(I=>{p=p.insert(v,I)}))).next(()=>this.populateOverlays(e,_,l)).next(()=>this.computeViews(e,p,_,ke())).next(v=>({batchId:d,changes:_E(v)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new he(t)).next(i=>{let o=Zl();return i.isFoundDocument()&&(o=o.insert(i.key,i)),o})}getDocumentsMatchingCollectionGroupQuery(e,t,i,o){const l=t.collectionGroup;let c=Zl();return this.indexManager.getCollectionParents(e,l).next(d=>$.forEach(d,p=>{const _=function(w,I){return new Li(I,null,w.explicitOrderBy.slice(),w.filters.slice(),w.limit,w.limitType,w.startAt,w.endAt)}(t,p.child(l));return this.getDocumentsMatchingCollectionQuery(e,_,i,o).next(v=>{v.forEach((w,I)=>{c=c.insert(w,I)})})}).next(()=>c))}getDocumentsMatchingCollectionQuery(e,t,i,o){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next(c=>(l=c,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,l,o))).next(c=>{l.forEach((p,_)=>{const v=_.getKey();c.get(v)===null&&(c=c.insert(v,Xt.newInvalidDocument(v)))});let d=Zl();return c.forEach((p,_)=>{const v=l.get(p);v!==void 0&&ca(v.mutation,_,er.empty(),It.now()),oh(t,_)&&(d=d.insert(p,_))}),d})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZA{constructor(e){this.serializer=e,this.Tr=new Map,this.Ir=new Map}getBundleMetadata(e,t){return $.resolve(this.Tr.get(t))}saveBundleMetadata(e,t){return this.Tr.set(t.id,function(o){return{id:o.id,version:o.version,createTime:_r(o.createTime)}}(t)),$.resolve()}getNamedQuery(e,t){return $.resolve(this.Ir.get(t))}saveNamedQuery(e,t){return this.Ir.set(t.name,function(o){return{name:o.name,query:qA(o.bundledQuery),readTime:_r(o.readTime)}}(t)),$.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eP{constructor(){this.overlays=new st(he.comparator),this.Er=new Map}getOverlay(e,t){return $.resolve(this.overlays.get(t))}getOverlays(e,t){const i=ds();return $.forEach(t,o=>this.getOverlay(e,o).next(l=>{l!==null&&i.set(o,l)})).next(()=>i)}saveOverlays(e,t,i){return i.forEach((o,l)=>{this.Tt(e,t,l)}),$.resolve()}removeOverlaysForBatchId(e,t,i){const o=this.Er.get(i);return o!==void 0&&(o.forEach(l=>this.overlays=this.overlays.remove(l)),this.Er.delete(i)),$.resolve()}getOverlaysForCollection(e,t,i){const o=ds(),l=t.length+1,c=new he(t.child("")),d=this.overlays.getIteratorFrom(c);for(;d.hasNext();){const p=d.getNext().value,_=p.getKey();if(!t.isPrefixOf(_.path))break;_.path.length===l&&p.largestBatchId>i&&o.set(p.getKey(),p)}return $.resolve(o)}getOverlaysForCollectionGroup(e,t,i,o){let l=new st((_,v)=>_-v);const c=this.overlays.getIterator();for(;c.hasNext();){const _=c.getNext().value;if(_.getKey().getCollectionGroup()===t&&_.largestBatchId>i){let v=l.get(_.largestBatchId);v===null&&(v=ds(),l=l.insert(_.largestBatchId,v)),v.set(_.getKey(),_)}}const d=ds(),p=l.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach((_,v)=>d.set(_,v)),!(d.size()>=o)););return $.resolve(d)}Tt(e,t,i){const o=this.overlays.get(i.key);if(o!==null){const c=this.Er.get(o.largestBatchId).delete(i.key);this.Er.set(o.largestBatchId,c)}this.overlays=this.overlays.insert(i.key,new yA(t,i));let l=this.Er.get(t);l===void 0&&(l=ke(),this.Er.set(t,l)),this.Er.set(t,l.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tP{constructor(){this.sessionToken=Ut.EMPTY_BYTE_STRING}getSessionToken(e){return $.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,$.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zp{constructor(){this.dr=new Ct(xt.Ar),this.Rr=new Ct(xt.Vr)}isEmpty(){return this.dr.isEmpty()}addReference(e,t){const i=new xt(e,t);this.dr=this.dr.add(i),this.Rr=this.Rr.add(i)}mr(e,t){e.forEach(i=>this.addReference(i,t))}removeReference(e,t){this.gr(new xt(e,t))}pr(e,t){e.forEach(i=>this.removeReference(i,t))}yr(e){const t=new he(new Xe([])),i=new xt(t,e),o=new xt(t,e+1),l=[];return this.Rr.forEachInRange([i,o],c=>{this.gr(c),l.push(c.key)}),l}wr(){this.dr.forEach(e=>this.gr(e))}gr(e){this.dr=this.dr.delete(e),this.Rr=this.Rr.delete(e)}Sr(e){const t=new he(new Xe([])),i=new xt(t,e),o=new xt(t,e+1);let l=ke();return this.Rr.forEachInRange([i,o],c=>{l=l.add(c.key)}),l}containsKey(e){const t=new xt(e,0),i=this.dr.firstAfterOrEqual(t);return i!==null&&e.isEqual(i.key)}}class xt{constructor(e,t){this.key=e,this.br=t}static Ar(e,t){return he.comparator(e.key,t.key)||De(e.br,t.br)}static Vr(e,t){return De(e.br,t.br)||he.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nP{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Dr=1,this.vr=new Ct(xt.Ar)}checkEmpty(e){return $.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,i,o){const l=this.Dr;this.Dr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new _A(l,t,i,o);this.mutationQueue.push(c);for(const d of o)this.vr=this.vr.add(new xt(d.key,l)),this.indexManager.addToCollectionParentIndex(e,d.key.path.popLast());return $.resolve(c)}lookupMutationBatch(e,t){return $.resolve(this.Cr(t))}getNextMutationBatchAfterBatchId(e,t){const i=t+1,o=this.Fr(i),l=o<0?0:o;return $.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return $.resolve(this.mutationQueue.length===0?-1:this.Dr-1)}getAllMutationBatches(e){return $.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const i=new xt(t,0),o=new xt(t,Number.POSITIVE_INFINITY),l=[];return this.vr.forEachInRange([i,o],c=>{const d=this.Cr(c.br);l.push(d)}),$.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new Ct(De);return t.forEach(o=>{const l=new xt(o,0),c=new xt(o,Number.POSITIVE_INFINITY);this.vr.forEachInRange([l,c],d=>{i=i.add(d.br)})}),$.resolve(this.Mr(i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,o=i.length+1;let l=i;he.isDocumentKey(l)||(l=l.child(""));const c=new xt(new he(l),0);let d=new Ct(De);return this.vr.forEachWhile(p=>{const _=p.key.path;return!!i.isPrefixOf(_)&&(_.length===o&&(d=d.add(p.br)),!0)},c),$.resolve(this.Mr(d))}Mr(e){const t=[];return e.forEach(i=>{const o=this.Cr(i);o!==null&&t.push(o)}),t}removeMutationBatch(e,t){ze(this.Or(t.batchId,"removed")===0),this.mutationQueue.shift();let i=this.vr;return $.forEach(t.mutations,o=>{const l=new xt(o.key,t.batchId);return i=i.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)}).next(()=>{this.vr=i})}Ln(e){}containsKey(e,t){const i=new xt(t,0),o=this.vr.firstAfterOrEqual(i);return $.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,$.resolve()}Or(e,t){return this.Fr(e)}Fr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Cr(e){const t=this.Fr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rP{constructor(e){this.Nr=e,this.docs=function(){return new st(he.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const i=t.key,o=this.docs.get(i),l=o?o.size:0,c=this.Nr(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:c}),this.size+=c-l,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const i=this.docs.get(t);return $.resolve(i?i.document.mutableCopy():Xt.newInvalidDocument(t))}getEntries(e,t){let i=Wr();return t.forEach(o=>{const l=this.docs.get(o);i=i.insert(o,l?l.document.mutableCopy():Xt.newInvalidDocument(o))}),$.resolve(i)}getDocumentsMatchingQuery(e,t,i,o){let l=Wr();const c=t.path,d=new he(c.child("")),p=this.docs.getIteratorFrom(d);for(;p.hasNext();){const{key:_,value:{document:v}}=p.getNext();if(!c.isPrefixOf(_.path))break;_.path.length>c.length+1||DR(xR(v),i)<=0||(o.has(v.key)||oh(t,v))&&(l=l.insert(v.key,v.mutableCopy()))}return $.resolve(l)}getAllFromCollectionGroup(e,t,i,o){ve()}Lr(e,t){return $.forEach(this.docs,i=>t(i))}newChangeBuffer(e){return new iP(this)}getSize(e){return $.resolve(this.size)}}class iP extends YA{constructor(e){super(),this.hr=e}applyChanges(e){const t=[];return this.changes.forEach((i,o)=>{o.isValidDocument()?t.push(this.hr.addEntry(e,o)):this.hr.removeEntry(i)}),$.waitFor(t)}getFromCache(e,t){return this.hr.getEntry(e,t)}getAllFromCache(e,t){return this.hr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sP{constructor(e){this.persistence=e,this.Br=new Ts(t=>Lp(t),Op),this.lastRemoteSnapshotVersion=Te.min(),this.highestTargetId=0,this.kr=0,this.qr=new zp,this.targetCount=0,this.Qr=Bo.qn()}forEachTarget(e,t){return this.Br.forEach((i,o)=>t(o)),$.resolve()}getLastRemoteSnapshotVersion(e){return $.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return $.resolve(this.kr)}allocateTargetId(e){return this.highestTargetId=this.Qr.next(),$.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.kr&&(this.kr=t),$.resolve()}Un(e){this.Br.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Qr=new Bo(t),this.highestTargetId=t),e.sequenceNumber>this.kr&&(this.kr=e.sequenceNumber)}addTargetData(e,t){return this.Un(t),this.targetCount+=1,$.resolve()}updateTargetData(e,t){return this.Un(t),$.resolve()}removeTargetData(e,t){return this.Br.delete(t.target),this.qr.yr(t.targetId),this.targetCount-=1,$.resolve()}removeTargets(e,t,i){let o=0;const l=[];return this.Br.forEach((c,d)=>{d.sequenceNumber<=t&&i.get(d.targetId)===null&&(this.Br.delete(c),l.push(this.removeMatchingKeysForTargetId(e,d.targetId)),o++)}),$.waitFor(l).next(()=>o)}getTargetCount(e){return $.resolve(this.targetCount)}getTargetData(e,t){const i=this.Br.get(t)||null;return $.resolve(i)}addMatchingKeys(e,t,i){return this.qr.mr(t,i),$.resolve()}removeMatchingKeys(e,t,i){this.qr.pr(t,i);const o=this.persistence.referenceDelegate,l=[];return o&&t.forEach(c=>{l.push(o.markPotentiallyOrphaned(e,c))}),$.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this.qr.yr(t),$.resolve()}getMatchingKeysForTargetId(e,t){const i=this.qr.Sr(t);return $.resolve(i)}containsKey(e,t){return $.resolve(this.qr.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bE{constructor(e,t){this.Kr={},this.overlays={},this.$r=new th(0),this.Ur=!1,this.Ur=!0,this.Wr=new tP,this.referenceDelegate=e(this),this.Gr=new sP(this),this.indexManager=new WA,this.remoteDocumentCache=function(o){return new rP(o)}(i=>this.referenceDelegate.zr(i)),this.serializer=new zA(t),this.jr=new ZA(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Ur=!1,Promise.resolve()}get started(){return this.Ur}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new eP,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this.Kr[e.toKey()];return i||(i=new nP(t,this.referenceDelegate),this.Kr[e.toKey()]=i),i}getGlobalsCache(){return this.Wr}getTargetCache(){return this.Gr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.jr}runTransaction(e,t,i){ie("MemoryPersistence","Starting transaction:",e);const o=new oP(this.$r.next());return this.referenceDelegate.Hr(),i(o).next(l=>this.referenceDelegate.Jr(o).next(()=>l)).toPromise().then(l=>(o.raiseOnCommittedEvent(),l))}Yr(e,t){return $.or(Object.values(this.Kr).map(i=>()=>i.containsKey(e,t)))}}class oP extends LR{constructor(e){super(),this.currentSequenceNumber=e}}class qp{constructor(e){this.persistence=e,this.Zr=new zp,this.Xr=null}static ei(e){return new qp(e)}get ti(){if(this.Xr)return this.Xr;throw ve()}addReference(e,t,i){return this.Zr.addReference(i,t),this.ti.delete(i.toString()),$.resolve()}removeReference(e,t,i){return this.Zr.removeReference(i,t),this.ti.add(i.toString()),$.resolve()}markPotentiallyOrphaned(e,t){return this.ti.add(t.toString()),$.resolve()}removeTarget(e,t){this.Zr.yr(t.targetId).forEach(o=>this.ti.add(o.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next(o=>{o.forEach(l=>this.ti.add(l.toString()))}).next(()=>i.removeTargetData(e,t))}Hr(){this.Xr=new Set}Jr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return $.forEach(this.ti,i=>{const o=he.fromPath(i);return this.ni(e,o).next(l=>{l||t.removeEntry(o,Te.min())})}).next(()=>(this.Xr=null,t.apply(e)))}updateLimboDocument(e,t){return this.ni(e,t).next(i=>{i?this.ti.delete(t.toString()):this.ti.add(t.toString())})}zr(e){return 0}ni(e,t){return $.or([()=>$.resolve(this.Zr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Yr(e,t)])}}class qc{constructor(e,t){this.persistence=e,this.ri=new Ts(i=>FR(i.path),(i,o)=>i.isEqual(o)),this.garbageCollector=KA(this,t)}static ei(e,t){return new qc(e,t)}Hr(){}Jr(e){return $.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}Xn(e){const t=this.nr(e);return this.persistence.getTargetCache().getTargetCount(e).next(i=>t.next(o=>i+o))}nr(e){let t=0;return this.er(e,i=>{t++}).next(()=>t)}er(e,t){return $.forEach(this.ri,(i,o)=>this.ir(e,i,o).next(l=>l?$.resolve():t(o)))}removeTargets(e,t,i){return this.persistence.getTargetCache().removeTargets(e,t,i)}removeOrphanedDocuments(e,t){let i=0;const o=this.persistence.getRemoteDocumentCache(),l=o.newChangeBuffer();return o.Lr(e,c=>this.ir(e,c,t).next(d=>{d||(i++,l.removeEntry(c,Te.min()))})).next(()=>l.apply(e)).next(()=>i)}markPotentiallyOrphaned(e,t){return this.ri.set(t,e.currentSequenceNumber),$.resolve()}removeTarget(e,t){const i=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,t,i){return this.ri.set(i,e.currentSequenceNumber),$.resolve()}removeReference(e,t,i){return this.ri.set(i,e.currentSequenceNumber),$.resolve()}updateLimboDocument(e,t){return this.ri.set(t,e.currentSequenceNumber),$.resolve()}zr(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=gc(e.data.value)),t}ir(e,t,i){return $.or([()=>this.persistence.Yr(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const o=this.ri.get(t);return $.resolve(o!==void 0&&o>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wp{constructor(e,t,i,o){this.targetId=e,this.fromCache=t,this.Wi=i,this.Gi=o}static zi(e,t){let i=ke(),o=ke();for(const l of t.docChanges)switch(l.type){case 0:i=i.add(l.doc.key);break;case 1:o=o.add(l.doc.key)}return new Wp(e,t.fromCache,i,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lP{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aP{constructor(){this.ji=!1,this.Hi=!1,this.Ji=100,this.Yi=function(){return qT()?8:OR(Tv())>0?6:4}()}initialize(e,t){this.Zi=e,this.indexManager=t,this.ji=!0}getDocumentsMatchingQuery(e,t,i,o){const l={result:null};return this.Xi(e,t).next(c=>{l.result=c}).next(()=>{if(!l.result)return this.es(e,t,o,i).next(c=>{l.result=c})}).next(()=>{if(l.result)return;const c=new lP;return this.ts(e,t,c).next(d=>{if(l.result=d,this.Hi)return this.ns(e,t,c,d.size)})}).next(()=>l.result)}ns(e,t,i,o){return i.documentReadCount<this.Ji?(vo()<=xe.DEBUG&&ie("QueryEngine","SDK will not create cache indexes for query:",Eo(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Ji,"documents"),$.resolve()):(vo()<=xe.DEBUG&&ie("QueryEngine","Query:",Eo(t),"scans",i.documentReadCount,"local documents and returns",o,"documents as results."),i.documentReadCount>this.Yi*o?(vo()<=xe.DEBUG&&ie("QueryEngine","The SDK decides to create cache indexes for query:",Eo(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,gr(t))):$.resolve())}Xi(e,t){if(Vy(t))return $.resolve(null);let i=gr(t);return this.indexManager.getIndexType(e,i).next(o=>o===0?null:(t.limit!==null&&o===1&&(t=Uc(t,null,"F"),i=gr(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next(l=>{const c=ke(...l);return this.Zi.getDocuments(e,c).next(d=>this.indexManager.getMinOffset(e,i).next(p=>{const _=this.rs(t,d);return this.ss(t,_,c,p.readTime)?this.Xi(e,Uc(t,null,"F")):this.os(e,_,t,p)}))})))}es(e,t,i,o){return Vy(t)||o.isEqual(Te.min())?$.resolve(null):this.Zi.getDocuments(e,i).next(l=>{const c=this.rs(t,l);return this.ss(t,c,i,o)?$.resolve(null):(vo()<=xe.DEBUG&&ie("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),Eo(t)),this.os(e,c,t,NR(o,-1)).next(d=>d))})}rs(e,t){let i=new Ct(mE(e));return t.forEach((o,l)=>{oh(e,l)&&(i=i.add(l))}),i}ss(e,t,i,o){if(e.limit===null)return!1;if(i.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(o)>0)}ts(e,t,i){return vo()<=xe.DEBUG&&ie("QueryEngine","Using full collection scan to execute query:",Eo(t)),this.Zi.getDocumentsMatchingQuery(e,t,Ri.min(),i)}os(e,t,i,o){return this.Zi.getDocumentsMatchingQuery(e,i,o).next(l=>(t.forEach(c=>{l=l.insert(c.key,c)}),l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uP{constructor(e,t,i,o){this.persistence=e,this._s=t,this.serializer=o,this.us=new st(De),this.cs=new Ts(l=>Lp(l),Op),this.ls=new Map,this.hs=e.getRemoteDocumentCache(),this.Gr=e.getTargetCache(),this.jr=e.getBundleCache(),this.Ps(i)}Ps(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new JA(this.hs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.hs.setIndexManager(this.indexManager),this._s.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.us))}}function cP(n,e,t,i){return new uP(n,e,t,i)}async function UE(n,e){const t=Ee(n);return await t.persistence.runTransaction("Handle user change","readonly",i=>{let o;return t.mutationQueue.getAllMutationBatches(i).next(l=>(o=l,t.Ps(e),t.mutationQueue.getAllMutationBatches(i))).next(l=>{const c=[],d=[];let p=ke();for(const _ of o){c.push(_.batchId);for(const v of _.mutations)p=p.add(v.key)}for(const _ of l){d.push(_.batchId);for(const v of _.mutations)p=p.add(v.key)}return t.localDocuments.getDocuments(i,p).next(_=>({Ts:_,removedBatchIds:c,addedBatchIds:d}))})})}function hP(n,e){const t=Ee(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const o=e.batch.keys(),l=t.hs.newChangeBuffer({trackRemovals:!0});return function(d,p,_,v){const w=_.batch,I=w.keys();let x=$.resolve();return I.forEach(U=>{x=x.next(()=>v.getEntry(p,U)).next(q=>{const z=_.docVersions.get(U);ze(z!==null),q.version.compareTo(z)<0&&(w.applyToRemoteDocument(q,_),q.isValidDocument()&&(q.setReadTime(_.commitVersion),v.addEntry(q)))})}),x.next(()=>d.mutationQueue.removeMutationBatch(p,w))}(t,i,e,l).next(()=>l.apply(i)).next(()=>t.mutationQueue.performConsistencyCheck(i)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(i,o,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(d){let p=ke();for(let _=0;_<d.mutationResults.length;++_)d.mutationResults[_].transformResults.length>0&&(p=p.add(d.batch.mutations[_].key));return p}(e))).next(()=>t.localDocuments.getDocuments(i,o))})}function jE(n){const e=Ee(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Gr.getLastRemoteSnapshotVersion(t))}function dP(n,e){const t=Ee(n),i=e.snapshotVersion;let o=t.us;return t.persistence.runTransaction("Apply remote event","readwrite-primary",l=>{const c=t.hs.newChangeBuffer({trackRemovals:!0});o=t.us;const d=[];e.targetChanges.forEach((v,w)=>{const I=o.get(w);if(!I)return;d.push(t.Gr.removeMatchingKeys(l,v.removedDocuments,w).next(()=>t.Gr.addMatchingKeys(l,v.addedDocuments,w)));let x=I.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(w)!==null?x=x.withResumeToken(Ut.EMPTY_BYTE_STRING,Te.min()).withLastLimboFreeSnapshotVersion(Te.min()):v.resumeToken.approximateByteSize()>0&&(x=x.withResumeToken(v.resumeToken,i)),o=o.insert(w,x),function(q,z,ae){return q.resumeToken.approximateByteSize()===0||z.snapshotVersion.toMicroseconds()-q.snapshotVersion.toMicroseconds()>=3e8?!0:ae.addedDocuments.size+ae.modifiedDocuments.size+ae.removedDocuments.size>0}(I,x,v)&&d.push(t.Gr.updateTargetData(l,x))});let p=Wr(),_=ke();if(e.documentUpdates.forEach(v=>{e.resolvedLimboDocuments.has(v)&&d.push(t.persistence.referenceDelegate.updateLimboDocument(l,v))}),d.push(fP(l,c,e.documentUpdates).next(v=>{p=v.Is,_=v.Es})),!i.isEqual(Te.min())){const v=t.Gr.getLastRemoteSnapshotVersion(l).next(w=>t.Gr.setTargetsMetadata(l,l.currentSequenceNumber,i));d.push(v)}return $.waitFor(d).next(()=>c.apply(l)).next(()=>t.localDocuments.getLocalViewOfDocuments(l,p,_)).next(()=>p)}).then(l=>(t.us=o,l))}function fP(n,e,t){let i=ke(),o=ke();return t.forEach(l=>i=i.add(l)),e.getEntries(n,i).next(l=>{let c=Wr();return t.forEach((d,p)=>{const _=l.get(d);p.isFoundDocument()!==_.isFoundDocument()&&(o=o.add(d)),p.isNoDocument()&&p.version.isEqual(Te.min())?(e.removeEntry(d,p.readTime),c=c.insert(d,p)):!_.isValidDocument()||p.version.compareTo(_.version)>0||p.version.compareTo(_.version)===0&&_.hasPendingWrites?(e.addEntry(p),c=c.insert(d,p)):ie("LocalStore","Ignoring outdated watch update for ",d,". Current version:",_.version," Watch version:",p.version)}),{Is:c,Es:o}})}function pP(n,e){const t=Ee(n);return t.persistence.runTransaction("Get next mutation batch","readonly",i=>(e===void 0&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function mP(n,e){const t=Ee(n);return t.persistence.runTransaction("Allocate target","readwrite",i=>{let o;return t.Gr.getTargetData(i,e).next(l=>l?(o=l,$.resolve(o)):t.Gr.allocateTargetId(i).next(c=>(o=new yi(e,c,"TargetPurposeListen",i.currentSequenceNumber),t.Gr.addTargetData(i,o).next(()=>o))))}).then(i=>{const o=t.us.get(i.targetId);return(o===null||i.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.us=t.us.insert(i.targetId,i),t.cs.set(e,i.targetId)),i})}async function $f(n,e,t){const i=Ee(n),o=i.us.get(e),l=t?"readwrite":"readwrite-primary";try{t||await i.persistence.runTransaction("Release target",l,c=>i.persistence.referenceDelegate.removeTarget(c,o))}catch(c){if(!Yo(c))throw c;ie("LocalStore",`Failed to update sequence numbers for target ${e}: ${c}`)}i.us=i.us.remove(e),i.cs.delete(o.target)}function Hy(n,e,t){const i=Ee(n);let o=Te.min(),l=ke();return i.persistence.runTransaction("Execute query","readwrite",c=>function(p,_,v){const w=Ee(p),I=w.cs.get(v);return I!==void 0?$.resolve(w.us.get(I)):w.Gr.getTargetData(_,v)}(i,c,gr(e)).next(d=>{if(d)return o=d.lastLimboFreeSnapshotVersion,i.Gr.getMatchingKeysForTargetId(c,d.targetId).next(p=>{l=p})}).next(()=>i._s.getDocumentsMatchingQuery(c,e,t?o:Te.min(),t?l:ke())).next(d=>(gP(i,nA(e),d),{documents:d,ds:l})))}function gP(n,e,t){let i=n.ls.get(e)||Te.min();t.forEach((o,l)=>{l.readTime.compareTo(i)>0&&(i=l.readTime)}),n.ls.set(e,i)}class $y{constructor(){this.activeTargetIds=aA()}ps(e){this.activeTargetIds=this.activeTargetIds.add(e)}ys(e){this.activeTargetIds=this.activeTargetIds.delete(e)}gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class _P{constructor(){this._o=new $y,this.ao={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e,t=!0){return t&&this._o.ps(e),this.ao[e]||"not-current"}updateQueryState(e,t,i){this.ao[e]=t}removeLocalQueryTarget(e){this._o.ys(e)}isLocalQueryTarget(e){return this._o.activeTargetIds.has(e)}clearQueryState(e){delete this.ao[e]}getAllActiveQueryTargets(){return this._o.activeTargetIds}isActiveQueryTarget(e){return this._o.activeTargetIds.has(e)}start(){return this._o=new $y,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yP{uo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gy{constructor(){this.co=()=>this.lo(),this.ho=()=>this.Po(),this.To=[],this.Io()}uo(e){this.To.push(e)}shutdown(){window.removeEventListener("online",this.co),window.removeEventListener("offline",this.ho)}Io(){window.addEventListener("online",this.co),window.addEventListener("offline",this.ho)}lo(){ie("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.To)e(0)}Po(){ie("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.To)e(1)}static p(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let lc=null;function df(){return lc===null?lc=function(){return 268435456+Math.round(2147483648*Math.random())}():lc++,"0x"+lc.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vP={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EP{constructor(e){this.Eo=e.Eo,this.Ao=e.Ao}Ro(e){this.Vo=e}mo(e){this.fo=e}po(e){this.yo=e}onMessage(e){this.wo=e}close(){this.Ao()}send(e){this.Eo(e)}So(){this.Vo()}bo(){this.fo()}Do(e){this.yo(e)}vo(e){this.wo(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $t="WebChannelConnection";class wP extends class{get Co(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const i=t.ssl?"https":"http",o=encodeURIComponent(this.databaseId.projectId),l=encodeURIComponent(this.databaseId.database);this.Fo=i+"://"+t.host,this.Mo=`projects/${o}/databases/${l}`,this.xo=this.databaseId.database==="(default)"?`project_id=${o}`:`project_id=${o}&database_id=${l}`}Oo(t,i,o,l,c){const d=df(),p=this.No(t,i.toUriEncodedString());ie("RestConnection",`Sending RPC '${t}' ${d}:`,p,o);const _={"google-cloud-resource-prefix":this.Mo,"x-goog-request-params":this.xo};return this.Lo(_,l,c),this.Bo(t,p,_,o).then(v=>(ie("RestConnection",`Received RPC '${t}' ${d}: `,v),v),v=>{throw Mo("RestConnection",`RPC '${t}' ${d} failed with error: `,v,"url: ",p,"request:",o),v})}ko(t,i,o,l,c,d){return this.Oo(t,i,o,l,c)}Lo(t,i,o){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Qo}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),i&&i.headers.forEach((l,c)=>t[c]=l),o&&o.headers.forEach((l,c)=>t[c]=l)}No(t,i){const o=vP[t];return`${this.Fo}/v1/${i}:${o}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Bo(e,t,i,o){const l=df();return new Promise((c,d)=>{const p=new X0;p.setWithCredentials(!0),p.listenOnce(J0.COMPLETE,()=>{try{switch(p.getLastErrorCode()){case mc.NO_ERROR:const v=p.getResponseJson();ie($t,`XHR for RPC '${e}' ${l} received:`,JSON.stringify(v)),c(v);break;case mc.TIMEOUT:ie($t,`RPC '${e}' ${l} timed out`),d(new te(H.DEADLINE_EXCEEDED,"Request time out"));break;case mc.HTTP_ERROR:const w=p.getStatus();if(ie($t,`RPC '${e}' ${l} failed with status:`,w,"response text:",p.getResponseText()),w>0){let I=p.getResponseJson();Array.isArray(I)&&(I=I[0]);const x=I==null?void 0:I.error;if(x&&x.status&&x.message){const U=function(z){const ae=z.toLowerCase().replace(/_/g,"-");return Object.values(H).indexOf(ae)>=0?ae:H.UNKNOWN}(x.status);d(new te(U,x.message))}else d(new te(H.UNKNOWN,"Server responded with status "+p.getStatus()))}else d(new te(H.UNAVAILABLE,"Connection failed."));break;default:ve()}}finally{ie($t,`RPC '${e}' ${l} completed.`)}});const _=JSON.stringify(o);ie($t,`RPC '${e}' ${l} sending request:`,o),p.send(t,"POST",_,i,15)})}qo(e,t,i){const o=df(),l=[this.Fo,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=tE(),d=eE(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},_=this.longPollingOptions.timeoutSeconds;_!==void 0&&(p.longPollingTimeout=Math.round(1e3*_)),this.useFetchStreams&&(p.useFetchStreams=!0),this.Lo(p.initMessageHeaders,t,i),p.encodeInitMessageHeaders=!0;const v=l.join("");ie($t,`Creating RPC '${e}' stream ${o}: ${v}`,p);const w=c.createWebChannel(v,p);let I=!1,x=!1;const U=new EP({Eo:z=>{x?ie($t,`Not sending because RPC '${e}' stream ${o} is closed:`,z):(I||(ie($t,`Opening RPC '${e}' stream ${o} transport.`),w.open(),I=!0),ie($t,`RPC '${e}' stream ${o} sending:`,z),w.send(z))},Ao:()=>w.close()}),q=(z,ae,me)=>{z.listen(ae,_e=>{try{me(_e)}catch(we){setTimeout(()=>{throw we},0)}})};return q(w,Jl.EventType.OPEN,()=>{x||(ie($t,`RPC '${e}' stream ${o} transport opened.`),U.So())}),q(w,Jl.EventType.CLOSE,()=>{x||(x=!0,ie($t,`RPC '${e}' stream ${o} transport closed`),U.Do())}),q(w,Jl.EventType.ERROR,z=>{x||(x=!0,Mo($t,`RPC '${e}' stream ${o} transport errored:`,z),U.Do(new te(H.UNAVAILABLE,"The operation could not be completed")))}),q(w,Jl.EventType.MESSAGE,z=>{var ae;if(!x){const me=z.data[0];ze(!!me);const _e=me,we=(_e==null?void 0:_e.error)||((ae=_e[0])===null||ae===void 0?void 0:ae.error);if(we){ie($t,`RPC '${e}' stream ${o} received error:`,we);const at=we.status;let Me=function(A){const N=mt[A];if(N!==void 0)return AE(N)}(at),D=we.message;Me===void 0&&(Me=H.INTERNAL,D="Unknown error status: "+at+" with message "+we.message),x=!0,U.Do(new te(Me,D)),w.close()}else ie($t,`RPC '${e}' stream ${o} received:`,me),U.vo(me)}}),q(d,Z0.STAT_EVENT,z=>{z.stat===Mf.PROXY?ie($t,`RPC '${e}' stream ${o} detected buffering proxy`):z.stat===Mf.NOPROXY&&ie($t,`RPC '${e}' stream ${o} detected no buffering proxy`)}),setTimeout(()=>{U.bo()},0),U}}function ff(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hh(n){return new PA(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BE{constructor(e,t,i=1e3,o=1.5,l=6e4){this.li=e,this.timerId=t,this.Qo=i,this.Ko=o,this.$o=l,this.Uo=0,this.Wo=null,this.Go=Date.now(),this.reset()}reset(){this.Uo=0}zo(){this.Uo=this.$o}jo(e){this.cancel();const t=Math.floor(this.Uo+this.Ho()),i=Math.max(0,Date.now()-this.Go),o=Math.max(0,t-i);o>0&&ie("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.Uo} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.Wo=this.li.enqueueAfterDelay(this.timerId,o,()=>(this.Go=Date.now(),e())),this.Uo*=this.Ko,this.Uo<this.Qo&&(this.Uo=this.Qo),this.Uo>this.$o&&(this.Uo=this.$o)}Jo(){this.Wo!==null&&(this.Wo.skipDelay(),this.Wo=null)}cancel(){this.Wo!==null&&(this.Wo.cancel(),this.Wo=null)}Ho(){return(Math.random()-.5)*this.Uo}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zE{constructor(e,t,i,o,l,c,d,p){this.li=e,this.Yo=i,this.Zo=o,this.connection=l,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=d,this.listener=p,this.state=0,this.Xo=0,this.e_=null,this.t_=null,this.stream=null,this.n_=0,this.r_=new BE(e,t)}i_(){return this.state===1||this.state===5||this.s_()}s_(){return this.state===2||this.state===3}start(){this.n_=0,this.state!==4?this.auth():this.o_()}async stop(){this.i_()&&await this.close(0)}__(){this.state=0,this.r_.reset()}a_(){this.s_()&&this.e_===null&&(this.e_=this.li.enqueueAfterDelay(this.Yo,6e4,()=>this.u_()))}c_(e){this.l_(),this.stream.send(e)}async u_(){if(this.s_())return this.close(0)}l_(){this.e_&&(this.e_.cancel(),this.e_=null)}h_(){this.t_&&(this.t_.cancel(),this.t_=null)}async close(e,t){this.l_(),this.h_(),this.r_.cancel(),this.Xo++,e!==4?this.r_.reset():t&&t.code===H.RESOURCE_EXHAUSTED?(qr(t.toString()),qr("Using maximum backoff delay to prevent overloading the backend."),this.r_.zo()):t&&t.code===H.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.P_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.po(t)}P_(){}auth(){this.state=1;const e=this.T_(this.Xo),t=this.Xo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,o])=>{this.Xo===t&&this.I_(i,o)},i=>{e(()=>{const o=new te(H.UNKNOWN,"Fetching auth token failed: "+i.message);return this.E_(o)})})}I_(e,t){const i=this.T_(this.Xo);this.stream=this.d_(e,t),this.stream.Ro(()=>{i(()=>this.listener.Ro())}),this.stream.mo(()=>{i(()=>(this.state=2,this.t_=this.li.enqueueAfterDelay(this.Zo,1e4,()=>(this.s_()&&(this.state=3),Promise.resolve())),this.listener.mo()))}),this.stream.po(o=>{i(()=>this.E_(o))}),this.stream.onMessage(o=>{i(()=>++this.n_==1?this.A_(o):this.onNext(o))})}o_(){this.state=5,this.r_.jo(async()=>{this.state=0,this.start()})}E_(e){return ie("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}T_(e){return t=>{this.li.enqueueAndForget(()=>this.Xo===e?t():(ie("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class TP extends zE{constructor(e,t,i,o,l,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,o,c),this.serializer=l}d_(e,t){return this.connection.qo("Listen",e,t)}A_(e){return this.onNext(e)}onNext(e){this.r_.reset();const t=xA(this.serializer,e),i=function(l){if(!("targetChange"in l))return Te.min();const c=l.targetChange;return c.targetIds&&c.targetIds.length?Te.min():c.readTime?_r(c.readTime):Te.min()}(e);return this.listener.R_(t,i)}V_(e){const t={};t.database=Hf(this.serializer),t.addTarget=function(l,c){let d;const p=c.target;if(d=jf(p)?{documents:LA(l,p)}:{query:LE(l,p).ct},d.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){d.resumeToken=NE(l,c.resumeToken);const _=zf(l,c.expectedCount);_!==null&&(d.expectedCount=_)}else if(c.snapshotVersion.compareTo(Te.min())>0){d.readTime=zc(l,c.snapshotVersion.toTimestamp());const _=zf(l,c.expectedCount);_!==null&&(d.expectedCount=_)}return d}(this.serializer,e);const i=FA(this.serializer,e);i&&(t.labels=i),this.c_(t)}m_(e){const t={};t.database=Hf(this.serializer),t.removeTarget=e,this.c_(t)}}class IP extends zE{constructor(e,t,i,o,l,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,o,c),this.serializer=l}get f_(){return this.n_>0}start(){this.lastStreamToken=void 0,super.start()}P_(){this.f_&&this.g_([])}d_(e,t){return this.connection.qo("Write",e,t)}A_(e){return ze(!!e.streamToken),this.lastStreamToken=e.streamToken,ze(!e.writeResults||e.writeResults.length===0),this.listener.p_()}onNext(e){ze(!!e.streamToken),this.lastStreamToken=e.streamToken,this.r_.reset();const t=VA(e.writeResults,e.commitTime),i=_r(e.commitTime);return this.listener.y_(i,t)}w_(){const e={};e.database=Hf(this.serializer),this.c_(e)}g_(e){const t={streamToken:this.lastStreamToken,writes:e.map(i=>DA(this.serializer,i))};this.c_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CP extends class{}{constructor(e,t,i,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.serializer=o,this.S_=!1}b_(){if(this.S_)throw new te(H.FAILED_PRECONDITION,"The client has already been terminated.")}Oo(e,t,i,o){return this.b_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([l,c])=>this.connection.Oo(e,qf(t,i),o,l,c)).catch(l=>{throw l.name==="FirebaseError"?(l.code===H.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new te(H.UNKNOWN,l.toString())})}ko(e,t,i,o,l){return this.b_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([c,d])=>this.connection.ko(e,qf(t,i),o,c,d,l)).catch(c=>{throw c.name==="FirebaseError"?(c.code===H.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new te(H.UNKNOWN,c.toString())})}terminate(){this.S_=!0,this.connection.terminate()}}class SP{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.D_=0,this.v_=null,this.C_=!0}F_(){this.D_===0&&(this.M_("Unknown"),this.v_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.v_=null,this.x_("Backend didn't respond within 10 seconds."),this.M_("Offline"),Promise.resolve())))}O_(e){this.state==="Online"?this.M_("Unknown"):(this.D_++,this.D_>=1&&(this.N_(),this.x_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.M_("Offline")))}set(e){this.N_(),this.D_=0,e==="Online"&&(this.C_=!1),this.M_(e)}M_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}x_(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.C_?(qr(t),this.C_=!1):ie("OnlineStateTracker",t)}N_(){this.v_!==null&&(this.v_.cancel(),this.v_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RP{constructor(e,t,i,o,l){this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.L_=[],this.B_=new Map,this.k_=new Set,this.q_=[],this.Q_=l,this.Q_.uo(c=>{i.enqueueAndForget(async()=>{Cs(this)&&(ie("RemoteStore","Restarting streams for network reachability change."),await async function(p){const _=Ee(p);_.k_.add(4),await La(_),_.K_.set("Unknown"),_.k_.delete(4),await dh(_)}(this))})}),this.K_=new SP(i,o)}}async function dh(n){if(Cs(n))for(const e of n.q_)await e(!0)}async function La(n){for(const e of n.q_)await e(!1)}function qE(n,e){const t=Ee(n);t.B_.has(e.targetId)||(t.B_.set(e.targetId,e),Qp(t)?Gp(t):Xo(t).s_()&&$p(t,e))}function Hp(n,e){const t=Ee(n),i=Xo(t);t.B_.delete(e),i.s_()&&WE(t,e),t.B_.size===0&&(i.s_()?i.a_():Cs(t)&&t.K_.set("Unknown"))}function $p(n,e){if(n.U_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Te.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Xo(n).V_(e)}function WE(n,e){n.U_.xe(e),Xo(n).m_(e)}function Gp(n){n.U_=new CA({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ut:e=>n.B_.get(e)||null,nt:()=>n.datastore.serializer.databaseId}),Xo(n).start(),n.K_.F_()}function Qp(n){return Cs(n)&&!Xo(n).i_()&&n.B_.size>0}function Cs(n){return Ee(n).k_.size===0}function HE(n){n.U_=void 0}async function AP(n){n.K_.set("Online")}async function PP(n){n.B_.forEach((e,t)=>{$p(n,e)})}async function kP(n,e){HE(n),Qp(n)?(n.K_.O_(e),Gp(n)):n.K_.set("Unknown")}async function NP(n,e,t){if(n.K_.set("Online"),e instanceof kE&&e.state===2&&e.cause)try{await async function(o,l){const c=l.cause;for(const d of l.targetIds)o.B_.has(d)&&(await o.remoteSyncer.rejectListen(d,c),o.B_.delete(d),o.U_.removeTarget(d))}(n,e)}catch(i){ie("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),i),await Wc(n,i)}else if(e instanceof vc?n.U_.$e(e):e instanceof PE?n.U_.Je(e):n.U_.Ge(e),!t.isEqual(Te.min()))try{const i=await jE(n.localStore);t.compareTo(i)>=0&&await function(l,c){const d=l.U_.it(c);return d.targetChanges.forEach((p,_)=>{if(p.resumeToken.approximateByteSize()>0){const v=l.B_.get(_);v&&l.B_.set(_,v.withResumeToken(p.resumeToken,c))}}),d.targetMismatches.forEach((p,_)=>{const v=l.B_.get(p);if(!v)return;l.B_.set(p,v.withResumeToken(Ut.EMPTY_BYTE_STRING,v.snapshotVersion)),WE(l,p);const w=new yi(v.target,p,_,v.sequenceNumber);$p(l,w)}),l.remoteSyncer.applyRemoteEvent(d)}(n,t)}catch(i){ie("RemoteStore","Failed to raise snapshot:",i),await Wc(n,i)}}async function Wc(n,e,t){if(!Yo(e))throw e;n.k_.add(1),await La(n),n.K_.set("Offline"),t||(t=()=>jE(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{ie("RemoteStore","Retrying IndexedDB access"),await t(),n.k_.delete(1),await dh(n)})}function $E(n,e){return e().catch(t=>Wc(n,t,e))}async function fh(n){const e=Ee(n),t=Ni(e);let i=e.L_.length>0?e.L_[e.L_.length-1].batchId:-1;for(;xP(e);)try{const o=await pP(e.localStore,i);if(o===null){e.L_.length===0&&t.a_();break}i=o.batchId,DP(e,o)}catch(o){await Wc(e,o)}GE(e)&&QE(e)}function xP(n){return Cs(n)&&n.L_.length<10}function DP(n,e){n.L_.push(e);const t=Ni(n);t.s_()&&t.f_&&t.g_(e.mutations)}function GE(n){return Cs(n)&&!Ni(n).i_()&&n.L_.length>0}function QE(n){Ni(n).start()}async function VP(n){Ni(n).w_()}async function LP(n){const e=Ni(n);for(const t of n.L_)e.g_(t.mutations)}async function OP(n,e,t){const i=n.L_.shift(),o=Up.from(i,e,t);await $E(n,()=>n.remoteSyncer.applySuccessfulWrite(o)),await fh(n)}async function MP(n,e){e&&Ni(n).f_&&await async function(i,o){if(function(c){return wA(c)&&c!==H.ABORTED}(o.code)){const l=i.L_.shift();Ni(i).__(),await $E(i,()=>i.remoteSyncer.rejectFailedWrite(l.batchId,o)),await fh(i)}}(n,e),GE(n)&&QE(n)}async function Qy(n,e){const t=Ee(n);t.asyncQueue.verifyOperationInProgress(),ie("RemoteStore","RemoteStore received new credentials");const i=Cs(t);t.k_.add(3),await La(t),i&&t.K_.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.k_.delete(3),await dh(t)}async function FP(n,e){const t=Ee(n);e?(t.k_.delete(2),await dh(t)):e||(t.k_.add(2),await La(t),t.K_.set("Unknown"))}function Xo(n){return n.W_||(n.W_=function(t,i,o){const l=Ee(t);return l.b_(),new TP(i,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)}(n.datastore,n.asyncQueue,{Ro:AP.bind(null,n),mo:PP.bind(null,n),po:kP.bind(null,n),R_:NP.bind(null,n)}),n.q_.push(async e=>{e?(n.W_.__(),Qp(n)?Gp(n):n.K_.set("Unknown")):(await n.W_.stop(),HE(n))})),n.W_}function Ni(n){return n.G_||(n.G_=function(t,i,o){const l=Ee(t);return l.b_(),new IP(i,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)}(n.datastore,n.asyncQueue,{Ro:()=>Promise.resolve(),mo:VP.bind(null,n),po:MP.bind(null,n),p_:LP.bind(null,n),y_:OP.bind(null,n)}),n.q_.push(async e=>{e?(n.G_.__(),await fh(n)):(await n.G_.stop(),n.L_.length>0&&(ie("RemoteStore",`Stopping write stream with ${n.L_.length} pending writes`),n.L_=[]))})),n.G_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kp{constructor(e,t,i,o,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=o,this.removalCallback=l,this.deferred=new mr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(c=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,i,o,l){const c=Date.now()+i,d=new Kp(e,t,c,o,l);return d.start(i),d}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new te(H.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Yp(n,e){if(qr("AsyncQueue",`${e}: ${n}`),Yo(n))return new te(H.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class No{static emptySet(e){return new No(e.comparator)}constructor(e){this.comparator=e?(t,i)=>e(t,i)||he.comparator(t.key,i.key):(t,i)=>he.comparator(t.key,i.key),this.keyedMap=Zl(),this.sortedSet=new st(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,i)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof No)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=i.getNext().key;if(!o.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const i=new No;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ky{constructor(){this.z_=new st(he.comparator)}track(e){const t=e.doc.key,i=this.z_.get(t);i?e.type!==0&&i.type===3?this.z_=this.z_.insert(t,e):e.type===3&&i.type!==1?this.z_=this.z_.insert(t,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.z_=this.z_.insert(t,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.z_=this.z_.insert(t,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.z_=this.z_.remove(t):e.type===1&&i.type===2?this.z_=this.z_.insert(t,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.z_=this.z_.insert(t,{type:2,doc:e.doc}):ve():this.z_=this.z_.insert(t,e)}j_(){const e=[];return this.z_.inorderTraversal((t,i)=>{e.push(i)}),e}}class zo{constructor(e,t,i,o,l,c,d,p,_){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=o,this.mutatedKeys=l,this.fromCache=c,this.syncStateChanged=d,this.excludesMetadataChanges=p,this.hasCachedResults=_}static fromInitialDocuments(e,t,i,o,l){const c=[];return t.forEach(d=>{c.push({type:0,doc:d})}),new zo(e,t,No.emptySet(t),c,i,o,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&sh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==i[o].type||!t[o].doc.isEqual(i[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bP{constructor(){this.H_=void 0,this.J_=[]}Y_(){return this.J_.some(e=>e.Z_())}}class UP{constructor(){this.queries=Yy(),this.onlineState="Unknown",this.X_=new Set}terminate(){(function(t,i){const o=Ee(t),l=o.queries;o.queries=Yy(),l.forEach((c,d)=>{for(const p of d.J_)p.onError(i)})})(this,new te(H.ABORTED,"Firestore shutting down"))}}function Yy(){return new Ts(n=>pE(n),sh)}async function KE(n,e){const t=Ee(n);let i=3;const o=e.query;let l=t.queries.get(o);l?!l.Y_()&&e.Z_()&&(i=2):(l=new bP,i=e.Z_()?0:1);try{switch(i){case 0:l.H_=await t.onListen(o,!0);break;case 1:l.H_=await t.onListen(o,!1);break;case 2:await t.onFirstRemoteStoreListen(o)}}catch(c){const d=Yp(c,`Initialization of query '${Eo(e.query)}' failed`);return void e.onError(d)}t.queries.set(o,l),l.J_.push(e),e.ea(t.onlineState),l.H_&&e.ta(l.H_)&&Xp(t)}async function YE(n,e){const t=Ee(n),i=e.query;let o=3;const l=t.queries.get(i);if(l){const c=l.J_.indexOf(e);c>=0&&(l.J_.splice(c,1),l.J_.length===0?o=e.Z_()?0:1:!l.Y_()&&e.Z_()&&(o=2))}switch(o){case 0:return t.queries.delete(i),t.onUnlisten(i,!0);case 1:return t.queries.delete(i),t.onUnlisten(i,!1);case 2:return t.onLastRemoteStoreUnlisten(i);default:return}}function jP(n,e){const t=Ee(n);let i=!1;for(const o of e){const l=o.query,c=t.queries.get(l);if(c){for(const d of c.J_)d.ta(o)&&(i=!0);c.H_=o}}i&&Xp(t)}function BP(n,e,t){const i=Ee(n),o=i.queries.get(e);if(o)for(const l of o.J_)l.onError(t);i.queries.delete(e)}function Xp(n){n.X_.forEach(e=>{e.next()})}var Gf,Xy;(Xy=Gf||(Gf={})).na="default",Xy.Cache="cache";class XE{constructor(e,t,i){this.query=e,this.ra=t,this.ia=!1,this.sa=null,this.onlineState="Unknown",this.options=i||{}}ta(e){if(!this.options.includeMetadataChanges){const i=[];for(const o of e.docChanges)o.type!==3&&i.push(o);e=new zo(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.ia?this.oa(e)&&(this.ra.next(e),t=!0):this._a(e,this.onlineState)&&(this.aa(e),t=!0),this.sa=e,t}onError(e){this.ra.error(e)}ea(e){this.onlineState=e;let t=!1;return this.sa&&!this.ia&&this._a(this.sa,e)&&(this.aa(this.sa),t=!0),t}_a(e,t){if(!e.fromCache||!this.Z_())return!0;const i=t!=="Offline";return(!this.options.ua||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}oa(e){if(e.docChanges.length>0)return!0;const t=this.sa&&this.sa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}aa(e){e=zo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ia=!0,this.ra.next(e)}Z_(){return this.options.source!==Gf.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JE{constructor(e){this.key=e}}class ZE{constructor(e){this.key=e}}class zP{constructor(e,t){this.query=e,this.da=t,this.Aa=null,this.hasCachedResults=!1,this.current=!1,this.Ra=ke(),this.mutatedKeys=ke(),this.Va=mE(e),this.ma=new No(this.Va)}get fa(){return this.da}ga(e,t){const i=t?t.pa:new Ky,o=t?t.ma:this.ma;let l=t?t.mutatedKeys:this.mutatedKeys,c=o,d=!1;const p=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,_=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal((v,w)=>{const I=o.get(v),x=oh(this.query,w)?w:null,U=!!I&&this.mutatedKeys.has(I.key),q=!!x&&(x.hasLocalMutations||this.mutatedKeys.has(x.key)&&x.hasCommittedMutations);let z=!1;I&&x?I.data.isEqual(x.data)?U!==q&&(i.track({type:3,doc:x}),z=!0):this.ya(I,x)||(i.track({type:2,doc:x}),z=!0,(p&&this.Va(x,p)>0||_&&this.Va(x,_)<0)&&(d=!0)):!I&&x?(i.track({type:0,doc:x}),z=!0):I&&!x&&(i.track({type:1,doc:I}),z=!0,(p||_)&&(d=!0)),z&&(x?(c=c.add(x),l=q?l.add(v):l.delete(v)):(c=c.delete(v),l=l.delete(v)))}),this.query.limit!==null)for(;c.size>this.query.limit;){const v=this.query.limitType==="F"?c.last():c.first();c=c.delete(v.key),l=l.delete(v.key),i.track({type:1,doc:v})}return{ma:c,pa:i,ss:d,mutatedKeys:l}}ya(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i,o){const l=this.ma;this.ma=e.ma,this.mutatedKeys=e.mutatedKeys;const c=e.pa.j_();c.sort((v,w)=>function(x,U){const q=z=>{switch(z){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ve()}};return q(x)-q(U)}(v.type,w.type)||this.Va(v.doc,w.doc)),this.wa(i),o=o!=null&&o;const d=t&&!o?this.Sa():[],p=this.Ra.size===0&&this.current&&!o?1:0,_=p!==this.Aa;return this.Aa=p,c.length!==0||_?{snapshot:new zo(this.query,e.ma,l,c,e.mutatedKeys,p===0,_,!1,!!i&&i.resumeToken.approximateByteSize()>0),ba:d}:{ba:d}}ea(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({ma:this.ma,pa:new Ky,mutatedKeys:this.mutatedKeys,ss:!1},!1)):{ba:[]}}Da(e){return!this.da.has(e)&&!!this.ma.has(e)&&!this.ma.get(e).hasLocalMutations}wa(e){e&&(e.addedDocuments.forEach(t=>this.da=this.da.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.da=this.da.delete(t)),this.current=e.current)}Sa(){if(!this.current)return[];const e=this.Ra;this.Ra=ke(),this.ma.forEach(i=>{this.Da(i.key)&&(this.Ra=this.Ra.add(i.key))});const t=[];return e.forEach(i=>{this.Ra.has(i)||t.push(new ZE(i))}),this.Ra.forEach(i=>{e.has(i)||t.push(new JE(i))}),t}va(e){this.da=e.ds,this.Ra=ke();const t=this.ga(e.documents);return this.applyChanges(t,!0)}Ca(){return zo.fromInitialDocuments(this.query,this.ma,this.mutatedKeys,this.Aa===0,this.hasCachedResults)}}class qP{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}}class WP{constructor(e){this.key=e,this.Fa=!1}}class HP{constructor(e,t,i,o,l,c){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=o,this.currentUser=l,this.maxConcurrentLimboResolutions=c,this.Ma={},this.xa=new Ts(d=>pE(d),sh),this.Oa=new Map,this.Na=new Set,this.La=new st(he.comparator),this.Ba=new Map,this.ka=new zp,this.qa={},this.Qa=new Map,this.Ka=Bo.Qn(),this.onlineState="Unknown",this.$a=void 0}get isPrimaryClient(){return this.$a===!0}}async function $P(n,e,t=!0){const i=sw(n);let o;const l=i.xa.get(e);return l?(i.sharedClientState.addLocalQueryTarget(l.targetId),o=l.view.Ca()):o=await ew(i,e,t,!0),o}async function GP(n,e){const t=sw(n);await ew(t,e,!0,!1)}async function ew(n,e,t,i){const o=await mP(n.localStore,gr(e)),l=o.targetId,c=n.sharedClientState.addLocalQueryTarget(l,t);let d;return i&&(d=await QP(n,e,l,c==="current",o.resumeToken)),n.isPrimaryClient&&t&&qE(n.remoteStore,o),d}async function QP(n,e,t,i,o){n.Ua=(w,I,x)=>async function(q,z,ae,me){let _e=z.view.ga(ae);_e.ss&&(_e=await Hy(q.localStore,z.query,!1).then(({documents:D})=>z.view.ga(D,_e)));const we=me&&me.targetChanges.get(z.targetId),at=me&&me.targetMismatches.get(z.targetId)!=null,Me=z.view.applyChanges(_e,q.isPrimaryClient,we,at);return Zy(q,z.targetId,Me.ba),Me.snapshot}(n,w,I,x);const l=await Hy(n.localStore,e,!0),c=new zP(e,l.ds),d=c.ga(l.documents),p=Va.createSynthesizedTargetChangeForCurrentChange(t,i&&n.onlineState!=="Offline",o),_=c.applyChanges(d,n.isPrimaryClient,p);Zy(n,t,_.ba);const v=new qP(e,t,c);return n.xa.set(e,v),n.Oa.has(t)?n.Oa.get(t).push(e):n.Oa.set(t,[e]),_.snapshot}async function KP(n,e,t){const i=Ee(n),o=i.xa.get(e),l=i.Oa.get(o.targetId);if(l.length>1)return i.Oa.set(o.targetId,l.filter(c=>!sh(c,e))),void i.xa.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(o.targetId),i.sharedClientState.isActiveQueryTarget(o.targetId)||await $f(i.localStore,o.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(o.targetId),t&&Hp(i.remoteStore,o.targetId),Qf(i,o.targetId)}).catch(Ko)):(Qf(i,o.targetId),await $f(i.localStore,o.targetId,!0))}async function YP(n,e){const t=Ee(n),i=t.xa.get(e),o=t.Oa.get(i.targetId);t.isPrimaryClient&&o.length===1&&(t.sharedClientState.removeLocalQueryTarget(i.targetId),Hp(t.remoteStore,i.targetId))}async function XP(n,e,t){const i=ik(n);try{const o=await function(c,d){const p=Ee(c),_=It.now(),v=d.reduce((x,U)=>x.add(U.key),ke());let w,I;return p.persistence.runTransaction("Locally write mutations","readwrite",x=>{let U=Wr(),q=ke();return p.hs.getEntries(x,v).next(z=>{U=z,U.forEach((ae,me)=>{me.isValidDocument()||(q=q.add(ae))})}).next(()=>p.localDocuments.getOverlayedDocuments(x,U)).next(z=>{w=z;const ae=[];for(const me of d){const _e=mA(me,w.get(me.key).overlayedDocument);_e!=null&&ae.push(new Is(me.key,_e,oE(_e.value.mapValue),jr.exists(!0)))}return p.mutationQueue.addMutationBatch(x,_,ae,d)}).next(z=>{I=z;const ae=z.applyToLocalDocumentSet(w,q);return p.documentOverlayCache.saveOverlays(x,z.batchId,ae)})}).then(()=>({batchId:I.batchId,changes:_E(w)}))}(i.localStore,e);i.sharedClientState.addPendingMutation(o.batchId),function(c,d,p){let _=c.qa[c.currentUser.toKey()];_||(_=new st(De)),_=_.insert(d,p),c.qa[c.currentUser.toKey()]=_}(i,o.batchId,t),await Oa(i,o.changes),await fh(i.remoteStore)}catch(o){const l=Yp(o,"Failed to persist write");t.reject(l)}}async function tw(n,e){const t=Ee(n);try{const i=await dP(t.localStore,e);e.targetChanges.forEach((o,l)=>{const c=t.Ba.get(l);c&&(ze(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1),o.addedDocuments.size>0?c.Fa=!0:o.modifiedDocuments.size>0?ze(c.Fa):o.removedDocuments.size>0&&(ze(c.Fa),c.Fa=!1))}),await Oa(t,i,e)}catch(i){await Ko(i)}}function Jy(n,e,t){const i=Ee(n);if(i.isPrimaryClient&&t===0||!i.isPrimaryClient&&t===1){const o=[];i.xa.forEach((l,c)=>{const d=c.view.ea(e);d.snapshot&&o.push(d.snapshot)}),function(c,d){const p=Ee(c);p.onlineState=d;let _=!1;p.queries.forEach((v,w)=>{for(const I of w.J_)I.ea(d)&&(_=!0)}),_&&Xp(p)}(i.eventManager,e),o.length&&i.Ma.R_(o),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function JP(n,e,t){const i=Ee(n);i.sharedClientState.updateQueryState(e,"rejected",t);const o=i.Ba.get(e),l=o&&o.key;if(l){let c=new st(he.comparator);c=c.insert(l,Xt.newNoDocument(l,Te.min()));const d=ke().add(l),p=new ch(Te.min(),new Map,new st(De),c,d);await tw(i,p),i.La=i.La.remove(l),i.Ba.delete(e),Jp(i)}else await $f(i.localStore,e,!1).then(()=>Qf(i,e,t)).catch(Ko)}async function ZP(n,e){const t=Ee(n),i=e.batch.batchId;try{const o=await hP(t.localStore,e);rw(t,i,null),nw(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),await Oa(t,o)}catch(o){await Ko(o)}}async function ek(n,e,t){const i=Ee(n);try{const o=await function(c,d){const p=Ee(c);return p.persistence.runTransaction("Reject batch","readwrite-primary",_=>{let v;return p.mutationQueue.lookupMutationBatch(_,d).next(w=>(ze(w!==null),v=w.keys(),p.mutationQueue.removeMutationBatch(_,w))).next(()=>p.mutationQueue.performConsistencyCheck(_)).next(()=>p.documentOverlayCache.removeOverlaysForBatchId(_,v,d)).next(()=>p.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(_,v)).next(()=>p.localDocuments.getDocuments(_,v))})}(i.localStore,e);rw(i,e,t),nw(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),await Oa(i,o)}catch(o){await Ko(o)}}function nw(n,e){(n.Qa.get(e)||[]).forEach(t=>{t.resolve()}),n.Qa.delete(e)}function rw(n,e,t){const i=Ee(n);let o=i.qa[i.currentUser.toKey()];if(o){const l=o.get(e);l&&(t?l.reject(t):l.resolve(),o=o.remove(e)),i.qa[i.currentUser.toKey()]=o}}function Qf(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const i of n.Oa.get(e))n.xa.delete(i),t&&n.Ma.Wa(i,t);n.Oa.delete(e),n.isPrimaryClient&&n.ka.yr(e).forEach(i=>{n.ka.containsKey(i)||iw(n,i)})}function iw(n,e){n.Na.delete(e.path.canonicalString());const t=n.La.get(e);t!==null&&(Hp(n.remoteStore,t),n.La=n.La.remove(e),n.Ba.delete(t),Jp(n))}function Zy(n,e,t){for(const i of t)i instanceof JE?(n.ka.addReference(i.key,e),tk(n,i)):i instanceof ZE?(ie("SyncEngine","Document no longer in limbo: "+i.key),n.ka.removeReference(i.key,e),n.ka.containsKey(i.key)||iw(n,i.key)):ve()}function tk(n,e){const t=e.key,i=t.path.canonicalString();n.La.get(t)||n.Na.has(i)||(ie("SyncEngine","New document in limbo: "+t),n.Na.add(i),Jp(n))}function Jp(n){for(;n.Na.size>0&&n.La.size<n.maxConcurrentLimboResolutions;){const e=n.Na.values().next().value;n.Na.delete(e);const t=new he(Xe.fromString(e)),i=n.Ka.next();n.Ba.set(i,new WP(t)),n.La=n.La.insert(t,i),qE(n.remoteStore,new yi(gr(Mp(t.path)),i,"TargetPurposeLimboResolution",th.oe))}}async function Oa(n,e,t){const i=Ee(n),o=[],l=[],c=[];i.xa.isEmpty()||(i.xa.forEach((d,p)=>{c.push(i.Ua(p,e,t).then(_=>{var v;if((_||t)&&i.isPrimaryClient){const w=_?!_.fromCache:(v=t==null?void 0:t.targetChanges.get(p.targetId))===null||v===void 0?void 0:v.current;i.sharedClientState.updateQueryState(p.targetId,w?"current":"not-current")}if(_){o.push(_);const w=Wp.zi(p.targetId,_);l.push(w)}}))}),await Promise.all(c),i.Ma.R_(o),await async function(p,_){const v=Ee(p);try{await v.persistence.runTransaction("notifyLocalViewChanges","readwrite",w=>$.forEach(_,I=>$.forEach(I.Wi,x=>v.persistence.referenceDelegate.addReference(w,I.targetId,x)).next(()=>$.forEach(I.Gi,x=>v.persistence.referenceDelegate.removeReference(w,I.targetId,x)))))}catch(w){if(!Yo(w))throw w;ie("LocalStore","Failed to update sequence numbers: "+w)}for(const w of _){const I=w.targetId;if(!w.fromCache){const x=v.us.get(I),U=x.snapshotVersion,q=x.withLastLimboFreeSnapshotVersion(U);v.us=v.us.insert(I,q)}}}(i.localStore,l))}async function nk(n,e){const t=Ee(n);if(!t.currentUser.isEqual(e)){ie("SyncEngine","User change. New user:",e.toKey());const i=await UE(t.localStore,e);t.currentUser=e,function(l,c){l.Qa.forEach(d=>{d.forEach(p=>{p.reject(new te(H.CANCELLED,c))})}),l.Qa.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await Oa(t,i.Ts)}}function rk(n,e){const t=Ee(n),i=t.Ba.get(e);if(i&&i.Fa)return ke().add(i.key);{let o=ke();const l=t.Oa.get(e);if(!l)return o;for(const c of l){const d=t.xa.get(c);o=o.unionWith(d.view.fa)}return o}}function sw(n){const e=Ee(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=tw.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=rk.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=JP.bind(null,e),e.Ma.R_=jP.bind(null,e.eventManager),e.Ma.Wa=BP.bind(null,e.eventManager),e}function ik(n){const e=Ee(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=ZP.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=ek.bind(null,e),e}class Hc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=hh(e.databaseInfo.databaseId),this.sharedClientState=this.za(e),this.persistence=this.ja(e),await this.persistence.start(),this.localStore=this.Ha(e),this.gcScheduler=this.Ja(e,this.localStore),this.indexBackfillerScheduler=this.Ya(e,this.localStore)}Ja(e,t){return null}Ya(e,t){return null}Ha(e){return cP(this.persistence,new aP,e.initialUser,this.serializer)}ja(e){return new bE(qp.ei,this.serializer)}za(e){return new _P}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Hc.provider={build:()=>new Hc};class sk extends Hc{constructor(e){super(),this.cacheSizeBytes=e}Ja(e,t){ze(this.persistence.referenceDelegate instanceof qc);const i=this.persistence.referenceDelegate.garbageCollector;return new GA(i,e.asyncQueue,t)}ja(e){const t=this.cacheSizeBytes!==void 0?hn.withCacheSize(this.cacheSizeBytes):hn.DEFAULT;return new bE(i=>qc.ei(i,t),this.serializer)}}class Kf{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>Jy(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=nk.bind(null,this.syncEngine),await FP(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new UP}()}createDatastore(e){const t=hh(e.databaseInfo.databaseId),i=function(l){return new wP(l)}(e.databaseInfo);return function(l,c,d,p){return new CP(l,c,d,p)}(e.authCredentials,e.appCheckCredentials,i,t)}createRemoteStore(e){return function(i,o,l,c,d){return new RP(i,o,l,c,d)}(this.localStore,this.datastore,e.asyncQueue,t=>Jy(this.syncEngine,t,0),function(){return Gy.p()?new Gy:new yP}())}createSyncEngine(e,t){return function(o,l,c,d,p,_,v){const w=new HP(o,l,c,d,p,_);return v&&(w.$a=!0),w}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(o){const l=Ee(o);ie("RemoteStore","RemoteStore shutting down."),l.k_.add(5),await La(l),l.Q_.shutdown(),l.K_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}Kf.provider={build:()=>new Kf};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ow{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Xa(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Xa(this.observer.error,e):qr("Uncaught Error in snapshot listener:",e.toString()))}eu(){this.muted=!0}Xa(e,t){setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ok{constructor(e,t,i,o,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this.databaseInfo=o,this.user=Gt.UNAUTHENTICATED,this.clientId=rE.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(i,async c=>{ie("FirestoreClient","Received user=",c.uid),await this.authCredentialListener(c),this.user=c}),this.appCheckCredentials.start(i,c=>(ie("FirestoreClient","Received new app check token=",c),this.appCheckCredentialListener(c,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new mr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const i=Yp(t,"Failed to shutdown persistence");e.reject(i)}}),e.promise}}async function pf(n,e){n.asyncQueue.verifyOperationInProgress(),ie("FirestoreClient","Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let i=t.initialUser;n.setCredentialChangeListener(async o=>{i.isEqual(o)||(await UE(e.localStore,o),i=o)}),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}async function ev(n,e){n.asyncQueue.verifyOperationInProgress();const t=await lk(n);ie("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener(i=>Qy(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,o)=>Qy(e.remoteStore,o)),n._onlineComponents=e}async function lk(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){ie("FirestoreClient","Using user provided OfflineComponentProvider");try{await pf(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function(o){return o.name==="FirebaseError"?o.code===H.FAILED_PRECONDITION||o.code===H.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11}(t))throw t;Mo("Error using user provided cache. Falling back to memory cache: "+t),await pf(n,new Hc)}}else ie("FirestoreClient","Using default OfflineComponentProvider"),await pf(n,new sk(void 0));return n._offlineComponents}async function Zp(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(ie("FirestoreClient","Using user provided OnlineComponentProvider"),await ev(n,n._uninitializedComponentsProvider._online)):(ie("FirestoreClient","Using default OnlineComponentProvider"),await ev(n,new Kf))),n._onlineComponents}function ak(n){return Zp(n).then(e=>e.syncEngine)}function uk(n){return Zp(n).then(e=>e.datastore)}async function lw(n){const e=await Zp(n),t=e.eventManager;return t.onListen=$P.bind(null,e.syncEngine),t.onUnlisten=KP.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=GP.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=YP.bind(null,e.syncEngine),t}function ck(n,e,t={}){const i=new mr;return n.asyncQueue.enqueueAndForget(async()=>function(l,c,d,p,_){const v=new ow({next:I=>{v.eu(),c.enqueueAndForget(()=>YE(l,w));const x=I.docs.has(d);!x&&I.fromCache?_.reject(new te(H.UNAVAILABLE,"Failed to get document because the client is offline.")):x&&I.fromCache&&p&&p.source==="server"?_.reject(new te(H.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):_.resolve(I)},error:I=>_.reject(I)}),w=new XE(Mp(d.path),v,{includeMetadataChanges:!0,ua:!0});return KE(l,w)}(await lw(n),n.asyncQueue,e,t,i)),i.promise}function hk(n,e,t={}){const i=new mr;return n.asyncQueue.enqueueAndForget(async()=>function(l,c,d,p,_){const v=new ow({next:I=>{v.eu(),c.enqueueAndForget(()=>YE(l,w)),I.fromCache&&p.source==="server"?_.reject(new te(H.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):_.resolve(I)},error:I=>_.reject(I)}),w=new XE(d,v,{includeMetadataChanges:!0,ua:!0});return KE(l,w)}(await lw(n),n.asyncQueue,e,t,i)),i.promise}function dk(n,e,t){const i=new mr;return n.asyncQueue.enqueueAndForget(async()=>{try{const o=await uk(n);i.resolve(async function(c,d,p){var _;const v=Ee(c),{request:w,lt:I,parent:x}=OA(v.serializer,tA(d),p);v.connection.Co||delete w.parent;const U=(await v.ko("RunAggregationQuery",v.serializer.databaseId,x,w,1)).filter(z=>!!z.result);ze(U.length===1);const q=(_=U[0].result)===null||_===void 0?void 0:_.aggregateFields;return Object.keys(q).reduce((z,ae)=>(z[I[ae]]=q[ae],z),{})}(o,e,t))}catch(o){i.reject(o)}}),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aw(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tv=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uw(n,e,t){if(!t)throw new te(H.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function fk(n,e,t,i){if(e===!0&&i===!0)throw new te(H.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function nv(n){if(!he.isDocumentKey(n))throw new te(H.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function rv(n){if(he.isDocumentKey(n))throw new te(H.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function ph(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=function(i){return i.constructor?i.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":ve()}function xi(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new te(H.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=ph(n);throw new te(H.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iv{constructor(e){var t,i;if(e.host===void 0){if(e.ssl!==void 0)throw new te(H.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(t=e.ssl)===null||t===void 0||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new te(H.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}fk("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=aw((i=e.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),function(l){if(l.timeoutSeconds!==void 0){if(isNaN(l.timeoutSeconds))throw new te(H.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (must not be NaN)`);if(l.timeoutSeconds<5)throw new te(H.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (minimum allowed value is 5)`);if(l.timeoutSeconds>30)throw new te(H.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(i,o){return i.timeoutSeconds===o.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class mh{constructor(e,t,i,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new iv({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new te(H.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new te(H.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new iv(e),e.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new wR;switch(i.type){case"firstParty":return new SR(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new te(H.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const i=tv.get(t);i&&(ie("ComponentProvider","Removing Datastore"),tv.delete(t),i.terminate())}(this),Promise.resolve()}}function pk(n,e,t,i={}){var o;const l=(n=xi(n,mh))._getSettings(),c=`${e}:${t}`;if(l.host!=="firestore.googleapis.com"&&l.host!==c&&Mo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},l),{host:c,ssl:!1})),i.mockUserToken){let d,p;if(typeof i.mockUserToken=="string")d=i.mockUserToken,p=Gt.MOCK_USER;else{d=wv(i.mockUserToken,(o=n._app)===null||o===void 0?void 0:o.options.projectId);const _=i.mockUserToken.sub||i.mockUserToken.user_id;if(!_)throw new te(H.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new Gt(_)}n._authCredentials=new TR(new nE(d,p))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vr{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new vr(this.firestore,e,this._query)}}class fn{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ii(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new fn(this.firestore,e,this._key)}}class Ii extends vr{constructor(e,t,i){super(e,t,Mp(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new fn(this.firestore,null,new he(e))}withConverter(e){return new Ii(this.firestore,e,this._path)}}function ac(n,e,...t){if(n=pn(n),uw("collection","path",e),n instanceof mh){const i=Xe.fromString(e,...t);return rv(i),new Ii(n,null,i)}{if(!(n instanceof fn||n instanceof Ii))throw new te(H.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(Xe.fromString(e,...t));return rv(i),new Ii(n.firestore,null,i)}}function Yf(n,e,...t){if(n=pn(n),arguments.length===1&&(e=rE.newId()),uw("doc","path",e),n instanceof mh){const i=Xe.fromString(e,...t);return nv(i),new fn(n,null,new he(i))}{if(!(n instanceof fn||n instanceof Ii))throw new te(H.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(Xe.fromString(e,...t));return nv(i),new fn(n.firestore,n instanceof Ii?n.converter:null,new he(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sv{constructor(e=Promise.resolve()){this.Iu=[],this.Eu=!1,this.du=[],this.Au=null,this.Ru=!1,this.Vu=!1,this.mu=[],this.r_=new BE(this,"async_queue_retry"),this.fu=()=>{const i=ff();i&&ie("AsyncQueue","Visibility state changed to "+i.visibilityState),this.r_.Jo()},this.gu=e;const t=ff();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.fu)}get isShuttingDown(){return this.Eu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.pu(),this.yu(e)}enterRestrictedMode(e){if(!this.Eu){this.Eu=!0,this.Vu=e||!1;const t=ff();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.fu)}}enqueue(e){if(this.pu(),this.Eu)return new Promise(()=>{});const t=new mr;return this.yu(()=>this.Eu&&this.Vu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Iu.push(e),this.wu()))}async wu(){if(this.Iu.length!==0){try{await this.Iu[0](),this.Iu.shift(),this.r_.reset()}catch(e){if(!Yo(e))throw e;ie("AsyncQueue","Operation failed with retryable error: "+e)}this.Iu.length>0&&this.r_.jo(()=>this.wu())}}yu(e){const t=this.gu.then(()=>(this.Ru=!0,e().catch(i=>{this.Au=i,this.Ru=!1;const o=function(c){let d=c.message||"";return c.stack&&(d=c.stack.includes(c.message)?c.stack:c.message+`
`+c.stack),d}(i);throw qr("INTERNAL UNHANDLED ERROR: ",o),i}).then(i=>(this.Ru=!1,i))));return this.gu=t,t}enqueueAfterDelay(e,t,i){this.pu(),this.mu.indexOf(e)>-1&&(t=0);const o=Kp.createAndSchedule(this,e,t,i,l=>this.Su(l));return this.du.push(o),o}pu(){this.Au&&ve()}verifyOperationInProgress(){}async bu(){let e;do e=this.gu,await e;while(e!==this.gu)}Du(e){for(const t of this.du)if(t.timerId===e)return!0;return!1}vu(e){return this.bu().then(()=>{this.du.sort((t,i)=>t.targetTimeMs-i.targetTimeMs);for(const t of this.du)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.bu()})}Cu(e){this.mu.push(e)}Su(e){const t=this.du.indexOf(e);this.du.splice(t,1)}}class Ma extends mh{constructor(e,t,i,o){super(e,t,i,o),this.type="firestore",this._queue=new sv,this._persistenceKey=(o==null?void 0:o.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new sv(e),this._firestoreClient=void 0,await e}}}function mk(n,e){const t=typeof n=="object"?n:Vv(),i=typeof n=="string"?n:"(default)",o=Nv(t,"firestore").getImmediate({identifier:i});if(!o._initialized){const l=vv("firestore");l&&pk(o,...l)}return o}function gh(n){if(n._terminated)throw new te(H.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||gk(n),n._firestoreClient}function gk(n){var e,t,i;const o=n._freezeSettings(),l=function(d,p,_,v){return new BR(d,p,_,v.host,v.ssl,v.experimentalForceLongPolling,v.experimentalAutoDetectLongPolling,aw(v.experimentalLongPollingOptions),v.useFetchStreams)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,o);n._componentsProvider||!((t=o.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((i=o.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(n._componentsProvider={_offline:o.localCache._offlineComponentProvider,_online:o.localCache._onlineComponentProvider}),n._firestoreClient=new ok(n._authCredentials,n._appCheckCredentials,n._queue,l,n._componentsProvider&&function(d){const p=d==null?void 0:d._online.build();return{_offline:d==null?void 0:d._offline.build(p),_online:p}}(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _k{constructor(e="count",t){this._internalFieldPath=t,this.type="AggregateField",this.aggregateType=e}}class yk{constructor(e,t,i){this._userDataWriter=t,this._data=i,this.type="AggregateQuerySnapshot",this.query=e}data(){return this._userDataWriter.convertObjectMap(this._data)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qo{constructor(e){this._byteString=e}static fromBase64String(e){try{return new qo(Ut.fromBase64String(e))}catch(t){throw new te(H.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new qo(Ut.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _h{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new te(H.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new bt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class em{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tm{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new te(H.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new te(H.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return De(this._lat,e._lat)||De(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nm{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(i,o){if(i.length!==o.length)return!1;for(let l=0;l<i.length;++l)if(i[l]!==o[l])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vk=/^__.*__$/;class cw{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return new Is(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function hw(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ve()}}class rm{constructor(e,t,i,o,l,c){this.settings=e,this.databaseId=t,this.serializer=i,this.ignoreUndefinedProperties=o,l===void 0&&this.Fu(),this.fieldTransforms=l||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Mu(){return this.settings.Mu}xu(e){return new rm(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ou(e){var t;const i=(t=this.path)===null||t===void 0?void 0:t.child(e),o=this.xu({path:i,Nu:!1});return o.Lu(e),o}Bu(e){var t;const i=(t=this.path)===null||t===void 0?void 0:t.child(e),o=this.xu({path:i,Nu:!1});return o.Fu(),o}ku(e){return this.xu({path:void 0,Nu:!0})}qu(e){return $c(e,this.settings.methodName,this.settings.Qu||!1,this.path,this.settings.Ku)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Fu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Lu(this.path.get(e))}Lu(e){if(e.length===0)throw this.qu("Document fields must not be empty");if(hw(this.Mu)&&vk.test(e))throw this.qu('Document fields cannot begin and end with "__"')}}class Ek{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=i||hh(e)}$u(e,t,i,o=!1){return new rm({Mu:e,methodName:t,Ku:i,path:bt.emptyPath(),Nu:!1,Qu:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function im(n){const e=n._freezeSettings(),t=hh(n._databaseId);return new Ek(n._databaseId,!!e.ignoreUndefinedProperties,t)}class yh extends em{_toFieldTransform(e){if(e.Mu!==2)throw e.Mu===1?e.qu(`${this._methodName}() can only appear at the top level of your update data`):e.qu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof yh}}function wk(n,e,t,i){const o=n.$u(1,e,t);pw("Data must be an object, but it was:",o,i);const l=[],c=Cn.empty();Vi(i,(p,_)=>{const v=sm(e,p,t);_=pn(_);const w=o.Bu(v);if(_ instanceof yh)l.push(v);else{const I=Fa(_,w);I!=null&&(l.push(v),c.set(v,I))}});const d=new er(l);return new cw(c,d,o.fieldTransforms)}function Tk(n,e,t,i,o,l){const c=n.$u(1,e,t),d=[ov(e,i,t)],p=[o];if(l.length%2!=0)throw new te(H.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let I=0;I<l.length;I+=2)d.push(ov(e,l[I])),p.push(l[I+1]);const _=[],v=Cn.empty();for(let I=d.length-1;I>=0;--I)if(!Sk(_,d[I])){const x=d[I];let U=p[I];U=pn(U);const q=c.Bu(x);if(U instanceof yh)_.push(x);else{const z=Fa(U,q);z!=null&&(_.push(x),v.set(x,z))}}const w=new er(_);return new cw(v,w,c.fieldTransforms)}function dw(n,e,t,i=!1){return Fa(t,n.$u(i?4:3,e))}function Fa(n,e){if(fw(n=pn(n)))return pw("Unsupported field value:",e,n),Ik(n,e);if(n instanceof em)return function(i,o){if(!hw(o.Mu))throw o.qu(`${i._methodName}() can only be used with update() and set()`);if(!o.path)throw o.qu(`${i._methodName}() is not currently supported inside arrays`);const l=i._toFieldTransform(o);l&&o.fieldTransforms.push(l)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.Nu&&e.Mu!==4)throw e.qu("Nested arrays are not supported");return function(i,o){const l=[];let c=0;for(const d of i){let p=Fa(d,o.ku(c));p==null&&(p={nullValue:"NULL_VALUE"}),l.push(p),c++}return{arrayValue:{values:l}}}(n,e)}return function(i,o){if((i=pn(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return uA(o.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const l=It.fromDate(i);return{timestampValue:zc(o.serializer,l)}}if(i instanceof It){const l=new It(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:zc(o.serializer,l)}}if(i instanceof tm)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof qo)return{bytesValue:NE(o.serializer,i._byteString)};if(i instanceof fn){const l=o.databaseId,c=i.firestore._databaseId;if(!c.isEqual(l))throw o.qu(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:Bp(i.firestore._databaseId||o.databaseId,i._key.path)}}if(i instanceof nm)return function(c,d){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:c.toArray().map(p=>{if(typeof p!="number")throw d.qu("VectorValues must only contain numeric values.");return bp(d.serializer,p)})}}}}}}(i,o);throw o.qu(`Unsupported field value: ${ph(i)}`)}(n,e)}function Ik(n,e){const t={};return iE(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Vi(n,(i,o)=>{const l=Fa(o,e.Ou(i));l!=null&&(t[i]=l)}),{mapValue:{fields:t}}}function fw(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof It||n instanceof tm||n instanceof qo||n instanceof fn||n instanceof em||n instanceof nm)}function pw(n,e,t){if(!fw(t)||!function(o){return typeof o=="object"&&o!==null&&(Object.getPrototypeOf(o)===Object.prototype||Object.getPrototypeOf(o)===null)}(t)){const i=ph(t);throw i==="an object"?e.qu(n+" a custom object"):e.qu(n+" "+i)}}function ov(n,e,t){if((e=pn(e))instanceof _h)return e._internalPath;if(typeof e=="string")return sm(n,e);throw $c("Field path arguments must be of type string or ",n,!1,void 0,t)}const Ck=new RegExp("[~\\*/\\[\\]]");function sm(n,e,t){if(e.search(Ck)>=0)throw $c(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new _h(...e.split("."))._internalPath}catch{throw $c(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function $c(n,e,t,i,o){const l=i&&!i.isEmpty(),c=o!==void 0;let d=`Function ${e}() called with invalid data`;t&&(d+=" (via `toFirestore()`)"),d+=". ";let p="";return(l||c)&&(p+=" (found",l&&(p+=` in field ${i}`),c&&(p+=` in document ${o}`),p+=")"),new te(H.INVALID_ARGUMENT,d+n+p)}function Sk(n,e){return n.some(t=>t.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class om{constructor(e,t,i,o,l){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=o,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new fn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new Rk(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(vh("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class Rk extends om{data(){return super.data()}}function vh(n,e){return typeof e=="string"?sm(n,e):e instanceof _h?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ak(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new te(H.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class lm{}class ba extends lm{}function uc(n,e,...t){let i=[];e instanceof lm&&i.push(e),i=i.concat(t),function(l){const c=l.filter(p=>p instanceof am).length,d=l.filter(p=>p instanceof Eh).length;if(c>1||c>0&&d>0)throw new te(H.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(i);for(const o of i)n=o._apply(n);return n}class Eh extends ba{constructor(e,t,i){super(),this._field=e,this._op=t,this._value=i,this.type="where"}static _create(e,t,i){return new Eh(e,t,i)}_apply(e){const t=this._parse(e);return gw(e._query,t),new vr(e.firestore,e.converter,Bf(e._query,t))}_parse(e){const t=im(e.firestore);return function(l,c,d,p,_,v,w){let I;if(_.isKeyField()){if(v==="array-contains"||v==="array-contains-any")throw new te(H.INVALID_ARGUMENT,`Invalid Query. You can't perform '${v}' queries on documentId().`);if(v==="in"||v==="not-in"){uv(w,v);const x=[];for(const U of w)x.push(av(p,l,U));I={arrayValue:{values:x}}}else I=av(p,l,w)}else v!=="in"&&v!=="not-in"&&v!=="array-contains-any"||uv(w,v),I=dw(d,c,w,v==="in"||v==="not-in");return gt.create(_,v,I)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function cc(n,e,t){const i=e,o=vh("where",n);return Eh._create(o,i,t)}class am extends lm{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new am(e,t)}_parse(e){const t=this._queryConstraints.map(i=>i._parse(e)).filter(i=>i.getFilters().length>0);return t.length===1?t[0]:nr.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:(function(o,l){let c=o;const d=l.getFlattenedFilters();for(const p of d)gw(c,p),c=Bf(c,p)}(e._query,t),new vr(e.firestore,e.converter,Bf(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class um extends ba{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new um(e,t)}_apply(e){const t=function(o,l,c){if(o.startAt!==null)throw new te(H.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(o.endAt!==null)throw new te(H.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Ca(l,c)}(e._query,this._field,this._direction);return new vr(e.firestore,e.converter,function(o,l){const c=o.explicitOrderBy.concat([l]);return new Li(o.path,o.collectionGroup,c,o.filters.slice(),o.limit,o.limitType,o.startAt,o.endAt)}(e._query,t))}}function mf(n,e="asc"){const t=e,i=vh("orderBy",n);return um._create(i,t)}class wh extends ba{constructor(e,t,i){super(),this.type=e,this._limit=t,this._limitType=i}static _create(e,t,i){return new wh(e,t,i)}_apply(e){return new vr(e.firestore,e.converter,Uc(e._query,this._limit,this._limitType))}}function lv(n){return wh._create("limit",n,"F")}function Pk(n){return wh._create("limitToLast",n,"L")}class cm extends ba{constructor(e,t,i){super(),this.type=e,this._docOrFields=t,this._inclusive=i}static _create(e,t,i){return new cm(e,t,i)}_apply(e){const t=mw(e,this.type,this._docOrFields,this._inclusive);return new vr(e.firestore,e.converter,function(o,l){return new Li(o.path,o.collectionGroup,o.explicitOrderBy.slice(),o.filters.slice(),o.limit,o.limitType,l,o.endAt)}(e._query,t))}}function kk(...n){return cm._create("startAfter",n,!1)}class hm extends ba{constructor(e,t,i){super(),this.type=e,this._docOrFields=t,this._inclusive=i}static _create(e,t,i){return new hm(e,t,i)}_apply(e){const t=mw(e,this.type,this._docOrFields,this._inclusive);return new vr(e.firestore,e.converter,function(o,l){return new Li(o.path,o.collectionGroup,o.explicitOrderBy.slice(),o.filters.slice(),o.limit,o.limitType,o.startAt,l)}(e._query,t))}}function Nk(...n){return hm._create("endBefore",n,!1)}function mw(n,e,t,i){if(t[0]=pn(t[0]),t[0]instanceof om)return function(l,c,d,p,_){if(!p)throw new te(H.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${d}().`);const v=[];for(const w of ko(l))if(w.field.isKeyField())v.push(bc(c,p.key));else{const I=p.data.field(w.field);if(rh(I))throw new te(H.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+w.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(I===null){const x=w.field.canonicalString();throw new te(H.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${x}' (used as the orderBy) does not exist.`)}v.push(I)}return new jo(v,_)}(n._query,n.firestore._databaseId,e,t[0]._document,i);{const o=im(n.firestore);return function(c,d,p,_,v,w){const I=c.explicitOrderBy;if(v.length>I.length)throw new te(H.INVALID_ARGUMENT,`Too many arguments provided to ${_}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const x=[];for(let U=0;U<v.length;U++){const q=v[U];if(I[U].field.isKeyField()){if(typeof q!="string")throw new te(H.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${_}(), but got a ${typeof q}`);if(!Fp(c)&&q.indexOf("/")!==-1)throw new te(H.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${_}() must be a plain document ID, but '${q}' contains a slash.`);const z=c.path.child(Xe.fromString(q));if(!he.isDocumentKey(z))throw new te(H.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${_}() must result in a valid document path, but '${z}' is not because it contains an odd number of segments.`);const ae=new he(z);x.push(bc(d,ae))}else{const z=dw(p,_,q);x.push(z)}}return new jo(x,w)}(n._query,n.firestore._databaseId,o,e,t,i)}}function av(n,e,t){if(typeof(t=pn(t))=="string"){if(t==="")throw new te(H.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Fp(e)&&t.indexOf("/")!==-1)throw new te(H.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const i=e.path.child(Xe.fromString(t));if(!he.isDocumentKey(i))throw new te(H.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return bc(n,new he(i))}if(t instanceof fn)return bc(n,t._key);throw new te(H.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${ph(t)}.`)}function uv(n,e){if(!Array.isArray(n)||n.length===0)throw new te(H.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function gw(n,e){const t=function(o,l){for(const c of o)for(const d of c.getFlattenedFilters())if(l.indexOf(d.op)>=0)return d.op;return null}(n.filters,function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new te(H.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new te(H.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class xk{convertValue(e,t="none"){switch(ki(e)){case 0:return null;case 1:return e.booleanValue;case 2:return dt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Pi(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw ve()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const i={};return Vi(e,(o,l)=>{i[o]=this.convertValue(l,t)}),i}convertVectorValue(e){var t,i,o;const l=(o=(i=(t=e.fields)===null||t===void 0?void 0:t.value.arrayValue)===null||i===void 0?void 0:i.values)===null||o===void 0?void 0:o.map(c=>dt(c.doubleValue));return new nm(l)}convertGeoPoint(e){return new tm(dt(e.latitude),dt(e.longitude))}convertArray(e,t){return(e.values||[]).map(i=>this.convertValue(i,t))}convertServerTimestamp(e,t){switch(t){case"previous":const i=ih(e);return i==null?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(wa(e));default:return null}}convertTimestamp(e){const t=Ai(e);return new It(t.seconds,t.nanos)}convertDocumentKey(e,t){const i=Xe.fromString(e);ze(FE(i));const o=new Ta(i.get(1),i.get(3)),l=new he(i.popFirst(5));return o.isEqual(t)||qr(`Document ${l} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}function Dk(){return new _k("count")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ta{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class _w extends om{constructor(e,t,i,o,l,c){super(e,t,i,o,c),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Ec(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const i=this._document.data.field(vh("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}}class Ec extends _w{data(e={}){return super.data(e)}}class Vk{constructor(e,t,i,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new ta(o.hasPendingWrites,o.fromCache),this.query=i}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(i=>{e.call(t,new Ec(this._firestore,this._userDataWriter,i.key,i,new ta(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new te(H.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(o,l){if(o._snapshot.oldDocs.isEmpty()){let c=0;return o._snapshot.docChanges.map(d=>{const p=new Ec(o._firestore,o._userDataWriter,d.doc.key,d.doc,new ta(o._snapshot.mutatedKeys.has(d.doc.key),o._snapshot.fromCache),o.query.converter);return d.doc,{type:"added",doc:p,oldIndex:-1,newIndex:c++}})}{let c=o._snapshot.oldDocs;return o._snapshot.docChanges.filter(d=>l||d.type!==3).map(d=>{const p=new Ec(o._firestore,o._userDataWriter,d.doc.key,d.doc,new ta(o._snapshot.mutatedKeys.has(d.doc.key),o._snapshot.fromCache),o.query.converter);let _=-1,v=-1;return d.type!==0&&(_=c.indexOf(d.doc.key),c=c.delete(d.doc.key)),d.type!==1&&(c=c.add(d.doc),v=c.indexOf(d.doc.key)),{type:Lk(d.type),doc:p,oldIndex:_,newIndex:v}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function Lk(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yw(n){n=xi(n,fn);const e=xi(n.firestore,Ma);return ck(gh(e),n._key).then(t=>Fk(e,n,t))}class dm extends xk{constructor(e){super(),this.firestore=e}convertBytes(e){return new qo(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new fn(this.firestore,null,t)}}function gf(n){n=xi(n,vr);const e=xi(n.firestore,Ma),t=gh(e),i=new dm(e);return Ak(n._query),hk(t,n._query).then(o=>new Vk(e,i,n,o))}function Ok(n,e,t,...i){n=xi(n,fn);const o=xi(n.firestore,Ma),l=im(o);let c;return c=typeof(e=pn(e))=="string"||e instanceof _h?Tk(l,"updateDoc",n._key,e,t,i):wk(l,"updateDoc",n._key,e),Mk(o,[c.toMutation(n._key,jr.exists(!0))])}function Mk(n,e){return function(i,o){const l=new mr;return i.asyncQueue.enqueueAndForget(async()=>XP(await ak(i),o,l)),l.promise}(gh(n),e)}function Fk(n,e,t){const i=t.docs.get(e._key),o=new dm(n);return new _w(n,o,e._key,i,new ta(t.hasPendingWrites,t.fromCache),e.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bk(n){return Uk(n,{count:Dk()})}function Uk(n,e){const t=xi(n.firestore,Ma),i=gh(t),o=UR(e,(l,c)=>new vA(c,l.aggregateType,l._internalFieldPath));return dk(i,n._query,o).then(l=>function(d,p,_){const v=new dm(d);return new yk(p,v,_)}(t,n,l))}(function(e,t=!0){(function(o){Qo=o})(xv),da(new Do("firestore",(i,{instanceIdentifier:o,options:l})=>{const c=i.getProvider("app").getImmediate(),d=new Ma(new IR(i.getProvider("auth-internal")),new AR(i.getProvider("app-check-internal")),function(_,v){if(!Object.prototype.hasOwnProperty.apply(_.options,["projectId"]))throw new te(H.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ta(_.options.projectId,v)}(c,o),c);return l=Object.assign({useFetchStreams:t},l),d._setSettings(l),d},"PUBLIC").setMultipleInstances(!0)),wi(Ty,"4.7.5",e),wi(Ty,"4.7.5","esm2017")})();const jk={apiKey:"AIzaSyDeJS1-Ucxs8YniV-vS-TB5uDWIEaTCsFg",authDomain:"dht-firebase-if51.firebaseapp.com",databaseURL:"https://dht-firebase-if51-default-rtdb.asia-southeast1.firebasedatabase.app",projectId:"dht-firebase-if51",storageBucket:"dht-firebase-if51.firebasestorage.app",messagingSenderId:"508179112287",appId:"1:508179112287:web:eb19dceb481f4bd0db16ea",measurementId:"G-VP8SK1EK3L"},vw=Dv(jk),Bk=yR(vw),fs=mk(vw),na={TEMPERATURE:"°C",HUMIDITY:"%"};function zk(){const[n,e]=Qt.useState(!1),[t,i]=Qt.useState(!1),[o,l]=Qt.useState(0),[c,d]=Qt.useState(0),[p,_]=Qt.useState(0),[v,w]=Qt.useState(0),I=async(U,q,z,ae)=>{const me=Yf(fs,"thresholds","threshold"),we=(await yw(me)).data();e(we.leftTemperature<=U&&we.leftHumidity<=q),i(we.rightTemperature<=z&&we.rightHumidity<=ae)},x=()=>n&&t?"Both":n?"Left":t?"Right":"Safe";return Qt.useEffect(()=>{const U=aR(Bk);cR(U,q=>{const z=q.val(),ae=z.leftTemperature,me=z.leftHumidity,_e=z.rightTemperature,we=z.rightHumidity;l(ae),d(me),_(_e),w(we),I(ae,me,_e,we)})},[]),W.jsxs("div",{className:"live-monitoring",children:[W.jsx("p",{className:"content-title",children:"Live Sensor Monitoring"}),W.jsxs("div",{className:"grow",children:[W.jsx("div",{className:"card-unimportant card-title ",children:W.jsx("p",{children:"Overall Status"})}),W.jsx("div",{className:"card card-background live-measure-status "+(n||t?"live-measure-danger":"live-measure-safe"),children:x()})]}),W.jsxs("div",{className:"md:content",children:[W.jsxs("div",{className:"grow",children:[W.jsx("div",{className:"card-unimportant card-title",children:W.jsx("p",{children:"DHT Left"})}),W.jsx("div",{className:"card card-background",children:W.jsxs("div",{className:"live-measure-row",children:[W.jsx(cv,{value:n}),W.jsx(hc,{unit:na.TEMPERATURE,value:o}),W.jsx(hc,{unit:na.HUMIDITY,value:c})]})})]}),W.jsxs("div",{className:"grow",children:[W.jsx("div",{className:"card-unimportant card-title",children:W.jsx("p",{children:"DHT Right"})}),W.jsx("div",{className:"card card-background",children:W.jsxs("div",{className:"live-measure-row",children:[W.jsx(cv,{value:t}),W.jsx(hc,{unit:na.TEMPERATURE,value:p}),W.jsx(hc,{unit:na.HUMIDITY,value:v})]})})]})]})]})}function cv({value:n}){return W.jsx("p",{className:"live-measure-status "+(n?"live-measure-danger":"live-measure-safe"),children:n?"Danger":"Safe"})}function hc({unit:n,value:e}){return W.jsxs("div",{className:"sm:live-measure",children:[W.jsx("p",{className:"ml-auto my-auto sm:text-xl",children:n==na.TEMPERATURE?"Temperature":"Humidity"}),W.jsx("p",{className:"live-measure-units min-w-24",children:e+n})]})}const qk="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20height='24px'%20viewBox='0%20-960%20960%20960'%20width='24px'%20fill='%23434343'%3e%3cpath%20d='M480-160q-134%200-227-93t-93-227q0-134%2093-227t227-93q69%200%20132%2028.5T720-690v-110h80v280H520v-80h168q-32-56-87.5-88T480-720q-100%200-170%2070t-70%20170q0%20100%2070%20170t170%2070q77%200%20139-44t87-116h84q-28%20106-114%20173t-196%2067Z'/%3e%3c/svg%3e",hv="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20height='24px'%20viewBox='0%20-960%20960%20960'%20width='24px'%20fill='%23434343'%3e%3cpath%20d='m313-440%20224%20224-57%2056-320-320%20320-320%2057%2056-224%20224h487v80H313Z'/%3e%3c/svg%3e",dv="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20height='24px'%20viewBox='0%20-960%20960%20960'%20width='24px'%20fill='%23434343'%3e%3cpath%20d='M647-440H160v-80h487L423-744l57-56%20320%20320-320%20320-57-56%20224-224Z'/%3e%3c/svg%3e";function fv({dhtid:n}){const[t,i]=Qt.useState(null),[o,l]=Qt.useState(0),[c,d]=Qt.useState(0),p=async(x=null,U=!0,q=0)=>{const z=await bk(uc(ac(fs,"records"),cc("dhtid","==",n)));l(z.data().count);let ae;q==0?ae=await gf(uc(ac(fs,"records"),cc("dhtid","==",n),mf("timestamp","desc"),lv(10))):U?ae=await gf(uc(ac(fs,"records"),cc("dhtid","==",n),mf("timestamp","desc"),kk(x),lv(10))):ae=await gf(uc(ac(fs,"records"),cc("dhtid","==",n),mf("timestamp","desc"),Nk(x),Pk(10))),i(ae)},_=()=>{p(t.docs[t.docs.length-1],!0,c+1),d(c+1)},v=()=>{p(t.docs[0],!1,c-1),d(c-1)},w=()=>t?t.docs.map((x,U)=>x.data()):[];Qt.useEffect(()=>{p()},[]);const I={day:"2-digit",month:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",second:"numeric"};return W.jsxs("div",{className:"records-table",children:[W.jsxs("table",{children:[W.jsx("thead",{children:W.jsxs("tr",{children:[W.jsx("th",{className:"hidden sm:table-cell",children:"No."}),W.jsx("th",{children:"Waktu Pencatatan"}),W.jsx("th",{children:"Suhu"}),W.jsx("th",{children:"Kelembapan"})]})}),W.jsx("tbody",{children:w().map((x,U)=>W.jsxs("tr",{children:[W.jsx("td",{className:"hidden sm:table-cell",children:U+c*10+1}),W.jsx("td",{children:x.timestamp.toDate().toLocaleDateString("en-GB",I)}),W.jsx("td",{children:x.temperature}),W.jsx("td",{children:x.humidity})]},U))})]}),W.jsxs("div",{className:"flex px-4 pt-2",children:[W.jsx("div",{className:"flex-shrink pr-4 py-2 hidden sm:block",children:`Jumlah data: ${o}`}),W.jsx("button",{className:"records-table-button",type:"button",onClick:()=>p(null,!1),children:W.jsx("img",{src:qk})}),W.jsx("div",{className:"flex-grow"}),c>0?W.jsx("button",{className:"records-table-button",type:"button",onClick:v,children:W.jsx("img",{src:hv})}):W.jsx("button",{className:"records-table-button",type:"button",disabled:!0,children:W.jsx("img",{className:"invisible",src:hv})}),(c+1)*10<o?W.jsx("button",{className:"records-table-button",type:"button",onClick:_,children:W.jsx("img",{src:dv})}):W.jsx("button",{className:"records-table-button",type:"button",disabled:!0,children:W.jsx("img",{className:"invisible",src:dv})})]})]})}function Wk(){return W.jsxs("div",{className:"records",children:[W.jsx("p",{className:"content-title",children:"Measurement Records"}),W.jsxs("div",{className:"lg:content",children:[W.jsxs("div",{className:"grow",children:[W.jsx("div",{className:"card-unimportant card-title",children:W.jsx("p",{children:"DHT Left"})}),W.jsx("div",{className:"card card-background",children:W.jsx(fv,{dhtid:0})})]}),W.jsxs("div",{className:"grow",children:[W.jsx("div",{className:"card-unimportant card-title",children:W.jsx("p",{children:"DHT Right"})}),W.jsx("div",{className:"card card-background",children:W.jsx(fv,{dhtid:1})})]})]})]})}const Co={TEMPERATURE:"°C",HUMIDITY:"%"},So={LEFT:"0",RIGHT:"1"};function Hk(){const[n,e]=Qt.useState({leftTemperature:"0",leftHumidity:"0",rightTemperature:"0",rightHumidity:"0"}),t=async()=>{const l=Yf(fs,"thresholds","threshold"),c=await yw(l);e(c.data())},i=l=>{e(c=>({...c,[l.target.name]:l.target.value}))},o=async l=>{l.preventDefault();const c=Yf(fs,"thresholds","threshold");await Ok(c,{leftTemperature:parseFloat(n.leftTemperature),leftHumidity:parseFloat(n.leftHumidity),rightTemperature:parseFloat(n.rightTemperature),rightHumidity:parseFloat(n.rightHumidity)})};return Qt.useEffect(()=>{t()},[]),W.jsxs("div",{className:"settings",children:[W.jsx("p",{className:"content-title",children:"Sensor Settings"}),W.jsx("div",{className:"lg:content",children:W.jsxs("form",{className:"grow lg:grow-0 lg:mx-auto",onSubmit:o,children:[W.jsx("div",{className:"card-unimportant card-title",children:W.jsx("p",{children:"Threshold"})}),W.jsxs("div",{className:"card card-background",children:[W.jsx(dc,{sensor:So.LEFT,unit:Co.TEMPERATURE,value:n.leftTemperature,onChange:i}),W.jsx(dc,{sensor:So.LEFT,unit:Co.HUMIDITY,value:n.leftHumidity,onChange:i}),W.jsx(dc,{sensor:So.RIGHT,unit:Co.TEMPERATURE,value:n.rightTemperature,onChange:i}),W.jsx(dc,{sensor:So.RIGHT,unit:Co.HUMIDITY,value:n.rightHumidity,onChange:i}),W.jsx("div",{className:"w-full",children:W.jsx("button",{className:"card card-emphasis block ml-auto bg-yellow-200 focus:bg-green-200",children:"Save"})})]})]})})]})}function dc({sensor:n,unit:e,value:t,onChange:i}){const o=()=>(n==So.LEFT?"left":"right")+(e==Co.TEMPERATURE?"Temperature":"Humidity"),l=()=>(n==So.LEFT?"Left":"Right")+" "+(e==Co.TEMPERATURE?"Temperature":"Humidity");return W.jsxs("div",{className:"sm:threshold",children:[W.jsx("label",{htmlFor:o(),className:"mr-auto my-auto sm:text-xl col-span-1",children:l()}),W.jsxs("div",{className:"flex flex-row col-span-2 gap-2 sm:gap-4 my-auto",children:[W.jsx("input",{type:"number",step:"0.1",id:o(),name:o(),value:t,className:"threshold-units basis-5/6 grow sm:text-right",onChange:i,required:!0}),W.jsx("p",{className:"threshold-units basis-1/6",children:e})]})]})}const $k="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20height='24px'%20viewBox='0%20-960%20960%20960'%20width='24px'%20fill='%23F3F3F3'%3e%3cpath%20d='M197-197q-54-55-85.5-127.5T80-480q0-84%2031.5-156.5T197-763l57%2057q-44%2044-69%20102t-25%20124q0%2067%2025%20125t69%20101l-57%2057Zm113-113q-32-33-51-76.5T240-480q0-51%2019-94.5t51-75.5l57%2057q-22%2022-34.5%2051T320-480q0%2033%2012.5%2062t34.5%2051l-57%2057Zm170-90q-33%200-56.5-23.5T400-480q0-33%2023.5-56.5T480-560q33%200%2056.5%2023.5T560-480q0%2033-23.5%2056.5T480-400Zm170%2090-57-57q22-22%2034.5-51t12.5-62q0-33-12.5-62T593-593l57-57q32%2032%2051%2075.5t19%2094.5q0%2050-19%2093.5T650-310Zm113%20113-57-57q44-44%2069-102t25-124q0-67-25-125t-69-101l57-57q54%2054%2085.5%20126.5T880-480q0%2083-31.5%20155.5T763-197Z'/%3e%3c/svg%3e",Gk="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20height='24px'%20viewBox='0%20-960%20960%20960'%20width='24px'%20fill='%23F3F3F3'%3e%3cpath%20d='M280-600v-80h560v80H280Zm0%20160v-80h560v80H280Zm0%20160v-80h560v80H280ZM160-600q-17%200-28.5-11.5T120-640q0-17%2011.5-28.5T160-680q17%200%2028.5%2011.5T200-640q0%2017-11.5%2028.5T160-600Zm0%20160q-17%200-28.5-11.5T120-480q0-17%2011.5-28.5T160-520q17%200%2028.5%2011.5T200-480q0%2017-11.5%2028.5T160-440Zm0%20160q-17%200-28.5-11.5T120-320q0-17%2011.5-28.5T160-360q17%200%2028.5%2011.5T200-320q0%2017-11.5%2028.5T160-280Z'/%3e%3c/svg%3e",Qk="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20height='24px'%20viewBox='0%20-960%20960%20960'%20width='24px'%20fill='%23F3F3F3'%3e%3cpath%20d='m370-80-16-128q-13-5-24.5-12T307-235l-119%2050L78-375l103-78q-1-7-1-13.5v-27q0-6.5%201-13.5L78-585l110-190%20119%2050q11-8%2023-15t24-12l16-128h220l16%20128q13%205%2024.5%2012t22.5%2015l119-50%20110%20190-103%2078q1%207%201%2013.5v27q0%206.5-2%2013.5l103%2078-110%20190-118-50q-11%208-23%2015t-24%2012L590-80H370Zm70-80h79l14-106q31-8%2057.5-23.5T639-327l99%2041%2039-68-86-65q5-14%207-29.5t2-31.5q0-16-2-31.5t-7-29.5l86-65-39-68-99%2042q-22-23-48.5-38.5T533-694l-13-106h-79l-14%20106q-31%208-57.5%2023.5T321-633l-99-41-39%2068%2086%2064q-5%2015-7%2030t-2%2032q0%2016%202%2031t7%2030l-86%2065%2039%2068%2099-42q22%2023%2048.5%2038.5T427-266l13%20106Zm42-180q58%200%2099-41t41-99q0-58-41-99t-99-41q-59%200-99.5%2041T342-480q0%2058%2040.5%2099t99.5%2041Zm-2-140Z'/%3e%3c/svg%3e",pv={LIVE_MONITORING:{label:"Live Monitoring",page:W.jsx(zk,{}),icon:W.jsx("img",{src:$k})},RECORDS:{label:"Records",page:W.jsx(Wk,{}),icon:W.jsx("img",{src:Gk})},SETTINGS:{label:"Settings",page:W.jsx(Hk,{}),icon:W.jsx("img",{src:Qk})}};function Kk(){const[n,e]=Qt.useState(pv.LIVE_MONITORING),[t,i]=Qt.useState(!1);return W.jsxs("div",{className:"outer-webpage",children:[t?W.jsx(Yk,{}):W.jsx(W.Fragment,{}),W.jsxs("div",{className:"inner-webpage",children:[W.jsx(Xk,{items:pv,onClick:o=>e(o)}),W.jsx("div",{className:"content-page",children:n.page})]})]})}function Yk(){return W.jsx("div",{className:"topbar",children:W.jsx("p",{children:"IoT Digital Humidity and Temperature Monitoring"})})}function Xk({items:n,onClick:e}){const[t,i]=Qt.useState(1);return W.jsx(W.Fragment,{children:W.jsxs("div",{className:"sidebar",children:[W.jsx("a",{className:"no-hover",href:"https://console.firebase.google.com/u/0/project/dht-firebase-if51/",children:W.jsx(Jk,{status:t})}),Object.keys(n).map((o,l)=>W.jsx(Zk,{item:n[o],onClick:()=>e(n[o])},l))]})})}function Jk({status:n}){return W.jsx(W.Fragment,{children:n?W.jsxs("div",{className:"sidebar-status",children:[W.jsx("span",{className:"dot dot-online md:mr-3"}),W.jsx("span",{className:"hidden md:inline",children:"Online"})]}):W.jsxs("div",{className:"sidebar-status",children:[W.jsx("span",{className:"dot dot-offline md:mr-3"}),W.jsx("span",{className:"hidden md:inline",children:"Offline"})]})})}function Zk({item:n,onClick:e}){return W.jsxs(W.Fragment,{children:[W.jsx("div",{className:"sidebar-item md:block hidden",onClick:()=>e(),children:W.jsx("p",{children:n.label})}),W.jsx("div",{className:"sidebar-item block md:hidden",onClick:()=>e(),children:n.icon})]})}xT.createRoot(document.getElementById("root")).render(W.jsx(Kk,{}));
